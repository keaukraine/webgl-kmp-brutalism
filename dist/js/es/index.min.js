class t{enterFullScreen(){document.fullscreenElement||document.documentElement.requestFullscreen({navigationUI:"hide"})}exitFullScreen(){document.exitFullscreen&&document.exitFullscreen()}addFullScreenListener(t){document.addEventListener("fullscreenchange",t,!1)}isFullScreen(){return!!document.fullscreenElement}}class e{static async load(t){return(await fetch(t)).arrayBuffer()}}class n{static load(t,e,n=e.LINEAR,i=e.LINEAR,r=!1){return new Promise(((s,o)=>{const a=e.createTexture();if(null===a)return void o("Error creating WebGL texture");const h=new Image;h.src=t,h.onload=()=>{e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,h),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),!0===r?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)),e.bindTexture(e.TEXTURE_2D,null),h&&h.src&&console.log(`Loaded texture ${t} [${h.width}x${h.height}]`),s(a)},h.onerror=()=>o("Cannot load image")}))}static async loadCubemap(t,e,n="png"){const i=e.createTexture();if(null===i)throw new Error("Error creating WebGL texture");e.bindTexture(e.TEXTURE_CUBE_MAP,i),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.NEAREST);const r=[{type:e.TEXTURE_CUBE_MAP_POSITIVE_X,suffix:`-posx.${n}`},{type:e.TEXTURE_CUBE_MAP_NEGATIVE_X,suffix:`-negx.${n}`},{type:e.TEXTURE_CUBE_MAP_POSITIVE_Y,suffix:`-posy.${n}`},{type:e.TEXTURE_CUBE_MAP_NEGATIVE_Y,suffix:`-negy.${n}`},{type:e.TEXTURE_CUBE_MAP_POSITIVE_Z,suffix:`-posz.${n}`},{type:e.TEXTURE_CUBE_MAP_NEGATIVE_Z,suffix:`-negz.${n}`}].map((n=>new Promise(((r,s)=>{const o=new Image;o.src=t+n.suffix,o.onload=()=>{e.bindTexture(e.TEXTURE_CUBE_MAP,i),e.texImage2D(n.type,0,e.RGB,e.RGB,e.UNSIGNED_BYTE,o),o&&o.src&&console.log(`Loaded texture ${t}${n.suffix} [${o.width}x${o.height}]`),r()},o.onerror=()=>s("Cannot load image")}))));return await Promise.all(r),e.bindTexture(e.TEXTURE_2D,null),i}}class i{constructor(){this.numIndices=0}loadBuffer(t,e,n,i){var r=new Uint8Array(i,0,i.byteLength);t.bindBuffer(n,e),t.bufferData(n,r,t.STATIC_DRAW)}async load(t,n){const[i,r]=await Promise.all([e.load(`${t}-indices.bin`),e.load(`${t}-strides.bin`)]);console.log(`Loaded ${t}-indices.bin (${i.byteLength} bytes)`),console.log(`Loaded ${t}-strides.bin (${r.byteLength} bytes)`),this.bufferIndices=n.createBuffer(),this.loadBuffer(n,this.bufferIndices,n.ELEMENT_ARRAY_BUFFER,i),this.numIndices=i.byteLength/2/3,this.bufferStrides=n.createBuffer(),this.loadBuffer(n,this.bufferStrides,n.ARRAY_BUFFER,r)}bindBuffers(t){t.bindBuffer(t.ARRAY_BUFFER,this.bufferStrides),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.bufferIndices)}getNumIndices(){return this.numIndices}}class r{constructor(t){this.gl=t,this.vertexShaderCode="",this.fragmentShaderCode="",this.fillCode(),this.initShader()}getShader(t,e){const n=this.gl.createShader(t);if(n){if(this.gl.shaderSource(n,e),this.gl.compileShader(n),this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS))return n;console.warn(this.gl.getShaderInfoLog(n))}else console.warn("Error creating shader.")}getUniform(t){if(void 0===this.program)throw new Error("No program for shader.");const e=this.gl.getUniformLocation(this.program,t);if(null!==e)return e;throw new Error(`Cannot get uniform "${t}".`)}getAttrib(t){if(void 0===this.program)throw new Error("No program for shader.");return this.gl.getAttribLocation(this.program,t)}initShader(){const t=this.getShader(this.gl.FRAGMENT_SHADER,this.fragmentShaderCode),e=this.getShader(this.gl.VERTEX_SHADER,this.vertexShaderCode),n=this.gl.createProgram();void 0!==t&&void 0!==e&&null!==n&&(this.gl.attachShader(n,e),this.gl.attachShader(n,t),this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?console.log(this.constructor.name+": Initialised shader"):console.warn(this.constructor.name+": Could not initialise shader"),this.gl.useProgram(n),this.program=n,this.fillUniformsAttributes())}use(){this.program&&this.gl.useProgram(this.program)}deleteProgram(){this.program&&this.gl.deleteProgram(this.program)}}var s=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;function a(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function h(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],m=e[11],_=e[12],g=e[13],p=e[14],E=e[15],w=n[0],v=n[1],A=n[2],T=n[3];return t[0]=w*i+v*a+A*c+T*_,t[1]=w*r+v*h+A*f+T*g,t[2]=w*s+v*u+A*d+T*p,t[3]=w*o+v*l+A*m+T*E,w=n[4],v=n[5],A=n[6],T=n[7],t[4]=w*i+v*a+A*c+T*_,t[5]=w*r+v*h+A*f+T*g,t[6]=w*s+v*u+A*d+T*p,t[7]=w*o+v*l+A*m+T*E,w=n[8],v=n[9],A=n[10],T=n[11],t[8]=w*i+v*a+A*c+T*_,t[9]=w*r+v*h+A*f+T*g,t[10]=w*s+v*u+A*d+T*p,t[11]=w*o+v*l+A*m+T*E,w=n[12],v=n[13],A=n[14],T=n[15],t[12]=w*i+v*a+A*c+T*_,t[13]=w*r+v*h+A*f+T*g,t[14]=w*s+v*u+A*d+T*p,t[15]=w*o+v*l+A*m+T*E,t}function u(){var t=new o(3);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function l(t,e,n){var i=new o(3);return i[0]=t,i[1]=e,i[2]=n,i}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function c(){var t=new o(4);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}u(),function(){var t,e=(t=new o(4),o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();var f;u(),l(1,0,0),l(0,1,0),c(),c(),f=new o(9),o!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,function(){var t=function(){var t=new o(2);return o!=Float32Array&&(t[0]=0,t[1]=0),t}()}();class d{constructor(){this.mMMatrix=a(),this.mVMatrix=a(),this.mMVPMatrix=a(),this.mProjMatrix=a(),this.matOrtho=a(),this.m_boundTick=this.tick.bind(this),this.isWebGL2=!1,this.viewportWidth=0,this.viewportHeight=0}get gl(){if(void 0===this.m_gl)throw new Error("No WebGL context");return this.m_gl}logGLError(){var t=this.gl.getError();t!==this.gl.NO_ERROR&&console.warn(`WebGL error # + ${t}`)}setTexture2D(t,e,n){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(n,t)}setTextureCubemap(t,e,n){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,e),this.gl.uniform1i(n,t)}setFOV(t,e,n,i,r){const s=Math.tan(e/360*Math.PI)*i,o=s*n;!function(t,e,n,i,r,s,o){var a=1/(n-e),h=1/(r-i),u=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*h,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*h,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0}(t,-o,o,-s,s,i,r)}calculateMVPMatrix(t,e,n,i,r,o,a,u,l){!function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this.mMMatrix),function(t,e,n,i){var r,o,a,h,u,l,c,f,d,m,_,g,p,E,w,v,A,T,b,R,x,C,S,M,N=i[0],y=i[1],F=i[2],O=Math.hypot(N,y,F);O<s||(N*=O=1/O,y*=O,F*=O,r=Math.sin(n),a=1-(o=Math.cos(n)),h=e[0],u=e[1],l=e[2],c=e[3],f=e[4],d=e[5],m=e[6],_=e[7],g=e[8],p=e[9],E=e[10],w=e[11],v=N*N*a+o,A=y*N*a+F*r,T=F*N*a-y*r,b=N*y*a-F*r,R=y*y*a+o,x=F*y*a+N*r,C=N*F*a+y*r,S=y*F*a-N*r,M=F*F*a+o,t[0]=h*v+f*A+g*T,t[1]=u*v+d*A+p*T,t[2]=l*v+m*A+E*T,t[3]=c*v+_*A+w*T,t[4]=h*b+f*R+g*x,t[5]=u*b+d*R+p*x,t[6]=l*b+m*R+E*x,t[7]=c*b+_*R+w*x,t[8]=h*C+f*S+g*M,t[9]=u*C+d*S+p*M,t[10]=l*C+m*S+E*M,t[11]=c*C+_*S+w*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this.mMMatrix,this.mMMatrix,0,[1,0,0]),function(t,e,n){var i,r,s,o,a,h,u,l,c,f,d,m,_=n[0],g=n[1],p=n[2];e===t?(t[12]=e[0]*_+e[4]*g+e[8]*p+e[12],t[13]=e[1]*_+e[5]*g+e[9]*p+e[13],t[14]=e[2]*_+e[6]*g+e[10]*p+e[14],t[15]=e[3]*_+e[7]*g+e[11]*p+e[15]):(i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],m=e[11],t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=m,t[12]=i*_+a*g+c*p+e[12],t[13]=r*_+h*g+f*p+e[13],t[14]=s*_+u*g+d*p+e[14],t[15]=o*_+l*g+m*p+e[15])}(this.mMMatrix,this.mMMatrix,[t,e,n]),function(t,e,n){var i=n[0],r=n[1],s=n[2];t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this.mMMatrix,this.mMMatrix,[a,u,l]),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],h=e[7],u=e[8],l=e[9],c=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+u*i,t[5]=o*r+l*i,t[6]=a*r+c*i,t[7]=h*r+f*i,t[8]=u*r-s*i,t[9]=l*r-o*i,t[10]=c*r-a*i,t[11]=f*r-h*i}(this.mMMatrix,this.mMMatrix,i),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],h=e[3],u=e[8],l=e[9],c=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-u*i,t[1]=o*r-l*i,t[2]=a*r-c*i,t[3]=h*r-f*i,t[8]=s*i+u*r,t[9]=o*i+l*r,t[10]=a*i+c*r,t[11]=h*i+f*r}(this.mMMatrix,this.mMMatrix,r),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],h=e[3],u=e[4],l=e[5],c=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+u*i,t[1]=o*r+l*i,t[2]=a*r+c*i,t[3]=h*r+f*i,t[4]=u*r-s*i,t[5]=l*r-o*i,t[6]=c*r-a*i,t[7]=f*r-h*i}(this.mMMatrix,this.mMMatrix,o),h(this.mMVPMatrix,this.mVMatrix,this.mMMatrix),h(this.mMVPMatrix,this.mProjMatrix,this.mMVPMatrix)}drawScene(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}tick(){requestAnimationFrame(this.m_boundTick),this.resizeCanvas(),this.drawScene(),this.animate()}initGL(t){const e=t.getContext("webgl",{alpha:!1});if(null===e)throw new Error("Cannot initialize WebGL context");return e}initGL2(t){let e=t.getContext("webgl2",{alpha:!1});return null===e?(console.warn("Could not initialise WebGL 2, falling back to WebGL 1"),this.initGL(t)):e}generateMipmaps(...t){for(const e of t)this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)}init(t,e=!1){if(this.onBeforeInit(),this.canvas=document.getElementById(t),null===this.canvas)throw new Error("Cannot find canvas element");this.viewportWidth=this.canvas.width,this.viewportHeight=this.canvas.height,this.m_gl=e?this.initGL2(this.canvas):this.initGL(this.canvas),this.m_gl?(this.resizeCanvas(),this.onAfterInit(),this.initShaders(),this.loadData(),this.m_boundTick()):this.onInitError()}resizeCanvas(){if(void 0===this.canvas)return;const t=window.devicePixelRatio||1,e=Math.floor(this.canvas.clientWidth*t),n=Math.floor(this.canvas.clientHeight*t);this.canvas.width==e&&this.canvas.height==n||(this.canvas.width=e,this.canvas.height=n)}checkGlError(t){let e;for(;(e=this.gl.getError())!==this.gl.NO_ERROR;)console.error(`${t}: glError ${e}`)}unbindBuffers(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}getMVPMatrix(){return this.mMVPMatrix}getOrthoMatrix(){return this.matOrtho}getModelMatrix(){return this.mMMatrix}getViewMatrix(){return this.mVMatrix}getProjectionMatrix(){return this.mProjMatrix}}class m{constructor(t){this.gl=t,this.m_textureHandle=null,this.m_depthTextureHandle=null,this.m_framebufferHandle=null,this.m_depthbufferHandle=null}createGLData(t,e){if(this.m_width=t,this.m_height=e,null!==this.m_textureHandle&&this.m_width>0&&this.m_height>0){this.m_framebufferHandle=this.gl.createFramebuffer(),null!==this.m_textureHandle&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.m_textureHandle),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.m_framebufferHandle),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.m_textureHandle,0),this.checkGlError("FB")),null===this.m_depthTextureHandle?(this.m_depthbufferHandle=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.m_depthbufferHandle),this.checkGlError("FB - glBindRenderbuffer"),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.m_width,this.m_height),this.checkGlError("FB - glRenderbufferStorage"),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.m_depthbufferHandle),this.checkGlError("FB - glFramebufferRenderbuffer")):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.m_depthTextureHandle),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.m_framebufferHandle),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.m_depthTextureHandle,0),this.checkGlError("FB depth"));const t=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);t!=this.gl.FRAMEBUFFER_COMPLETE&&console.error(`Error creating framebufer: ${t}`),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}}checkGlError(t){let e;for(;(e=this.gl.getError())!==this.gl.NO_ERROR;)console.error(`${t}: glError ${e}`)}get width(){return this.m_width}set width(t){this.m_width=t}get height(){return this.m_height}set height(t){this.m_height=t}get textureHandle(){return this.m_textureHandle}set textureHandle(t){this.m_textureHandle=t}get depthbufferHandle(){return this.m_depthbufferHandle}set depthbufferHandle(t){this.m_depthbufferHandle=t}get framebufferHandle(){return this.m_framebufferHandle}set framebufferHandle(t){this.m_framebufferHandle=t}get depthTextureHandle(){return this.m_depthTextureHandle}set depthTextureHandle(t){this.m_depthTextureHandle=t}}class _{constructor(t){this.gl=t,this.m_textureHandle=null,this.m_depthTextureHandle=null,this.m_framebufferHandle=null,this.m_framebufferMsaaHandle=null,this.m_depthBufferHandle=null,this.m_depthBufferMsaaHandle=null,this.m_colorBufferHandle=null}createGLData(t,e){if(this.m_width=t,this.m_height=e,null!==this.m_textureHandle&&this.m_width>0&&this.m_height>0){this.m_framebufferHandle=this.gl.createFramebuffer(),null!==this.m_textureHandle&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.m_textureHandle),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.m_framebufferHandle),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.m_textureHandle,0),this.checkGlError("FB")),null===this.m_depthTextureHandle?(this.m_depthBufferHandle=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.m_depthBufferHandle),this.checkGlError("FB - glBindRenderbuffer"),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.m_width,this.m_height),this.checkGlError("FB - glRenderbufferStorage"),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.m_depthBufferHandle),this.checkGlError("FB - glFramebufferRenderbuffer")):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.m_depthTextureHandle),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.m_framebufferHandle),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.m_depthTextureHandle,0),this.checkGlError("FB depth"));const t=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);t!=this.gl.FRAMEBUFFER_COMPLETE&&console.error(`Error creating framebufer: ${t}`),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.m_depthBufferMsaaHandle=this.gl.createRenderbuffer(),this.m_framebufferMsaaHandle=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.m_framebufferMsaaHandle),this.m_colorBufferHandle=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.m_colorBufferHandle),this.gl.renderbufferStorageMultisample(this.gl.RENDERBUFFER,4,this.gl.RGB8,this.m_width,this.m_height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.RENDERBUFFER,this.m_colorBufferHandle),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.m_depthBufferMsaaHandle),this.gl.renderbufferStorageMultisample(this.gl.RENDERBUFFER,4,this.gl.DEPTH_COMPONENT16,this.m_width,this.m_height),this.checkGlError("FB - glRenderbufferStorage"),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.m_depthBufferMsaaHandle);const e=this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER);e!=this.gl.FRAMEBUFFER_COMPLETE&&console.error(`Error creating MSAA framebufer: ${e}`),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}}checkGlError(t){let e;for(;(e=this.gl.getError())!==this.gl.NO_ERROR;)console.error(`${t}: glError ${e}`)}get width(){return this.m_width}set width(t){this.m_width=t}get height(){return this.m_height}set height(t){this.m_height=t}get textureHandle(){return this.m_textureHandle}set textureHandle(t){this.m_textureHandle=t}get depthbufferHandle(){return this.m_depthBufferHandle}set depthbufferHandle(t){this.m_depthBufferHandle=t}get framebufferHandle(){return this.m_framebufferHandle}set framebufferHandle(t){this.m_framebufferHandle=t}get depthTextureHandle(){return this.m_depthTextureHandle}set depthTextureHandle(t){this.m_depthTextureHandle=t}get colorBufferHandle(){return this.m_colorBufferHandle}get framebufferMsaaHandle(){return this.m_framebufferMsaaHandle}}class g{static createNpotTexture(t,e,n,i=!1){const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);let s=null,o=null;return i?(s=t.RGBA,o=t.RGBA):(s=t.RGB,o=t.RGB),t.texImage2D(t.TEXTURE_2D,0,o,e,n,0,s,t.UNSIGNED_BYTE,null),r}static createDepthTexture(t,e,n){const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameterf(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const r=t.getParameter(t.VERSION)||"",s=t.DEPTH_COMPONENT,o=r.includes("WebGL 2")?t.DEPTH_COMPONENT16:t.DEPTH_COMPONENT,a=t.UNSIGNED_SHORT;return t.texImage2D(t.TEXTURE_2D,0,o,e,n,0,s,a,null),i}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function p(t,e){return t(e={exports:{}},e.exports),e.exports}var E=p((function(t,e){var n,i;void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,i=arguments[1]|0,r=i<0?Math.max(n+i,0):Math.min(i,n),s=arguments[2],o=void 0===s?n:s|0,a=o<0?Math.max(n+o,0):Math.min(o,n);r<a;)e[r]=t,r++;return e}}),[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array].forEach((function(t){void 0===t.prototype.fill&&Object.defineProperty(t.prototype,"fill",{value:Array.prototype.fill})})),void 0===Math.clz32&&(Math.clz32=(n=Math.log,i=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(n(e)/i|0)|0})),void 0===Math.imul&&(Math.imul=function(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0}),function(t){var e,n,i,r,s,o,a,h,u,l,c,f,d,m,_,g,p,E,w,v,A,T,b,R,x,C,S,M,N,y,F,O=Math.clz32,$=ArrayBuffer.isView,L=Math.imul;function I(t){var e;t:if(li(t,be)&&t.k())e=!0;else{for(var n=t.h();n.o();){var i=n.p();if(null==i||!li(i,Re)||!this.y3(i)){e=!1;break t}}e=!0}return e}function D(){}function B(){}function U(){}function P(){this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function k(t){return!(t==t)}function H(t){return 0===t?0:1<<31-O(t)}function G(t){return pr(t)}function z(t){return Cr([t])}function V(t,e,n,i,r){R.f(i,r,t.length);var s=r-i|0;if(R.f(n,n+s|0,e.length),$(e)&&$(t)){var o=t.subarray(i,r);e.set(o,n)}else if(t!==e||n<=i){var a=0;if(a<s)do{var h=a;a=a+1|0,e[n+h|0]=t[i+h|0]}while(a<s)}else{var u=s-1|0;if(0<=u)do{var l=u;u=u+-1|0,e[n+l|0]=t[i+l|0]}while(0<=u)}}function j(t){return t}function W(t){return void 0!==t.toArray?t.toArray():G(t)}function X(){ur.call(this)}function Y(t){this.n_1=t,this.l_1=0,this.m_1=-1}function q(){X.call(this),this.r_1=0}function Z(){_r.call(this),this.y_1=null,this.z_1=null}function K(){X.call(this)}function J(t){if(!(t>=0))throw Mi(Qe("capacity must be non-negative."));return Le(Array(t),null)}function Q(t,e,n){t.fill(null,e,n)}function tt(t,e){return wi(t,e)}function et(){i=this;var t=this,e=ot(0);e.o1_1=!0,t.p1_1=e}function nt(){return null==i&&new et,i}function it(t){var e=[];return lt.call(t,e),t}function rt(){return it(mn(fn(lt)))}function st(t,e){var n=[];if(lt.call(e,n),!(t>=0))throw Mi(Qe("Negative initial capacity: "+t));return e}function ot(t){return st(t,mn(fn(lt)))}function at(t,e){var n=W(t);return lt.call(e,n),e}function ht(t){return at(t,mn(fn(lt)))}function ut(t,e){return R.q1(e,t.g()),e}function lt(t){nt(),q.call(this),this.n1_1=t,this.o1_1=!1}function ct(t,e){return Z.call(e),gt.call(e),e.x1_1=t,e}function ft(t){return ct(xt(),t),t}function dt(){return ft(mn(fn(gt)))}function mt(t,e,n){return ct(Mt(t,e),n),n}function _t(t,e){return mt(t,1,e),e}function gt(){this.y1_1=null}function pt(t){X.call(this),this.a2_1=t}function Et(t){wt.call(this,t)}function wt(t){K.call(this),this.e2_1=t}function vt(t){this.j2_1=t}function At(t){X.call(this),this.l2_1=t}function Tt(t,e){return H(L(ge(e,1),3))}function bt(t,e){return O(e)+1|0}function Rt(t){return Ct(8,t),t}function xt(){return Rt(mn(fn(qt)))}function Ct(t,e){return qt.call(e,J(t),null,new Int32Array(t),new Int32Array(Tt(r,t)),2,0),e}function St(t,e,n){if(Ct(t,n),!(e>0))throw Mi(Qe("Non-positive load factor: "+e));return n}function Mt(t,e){return St(t,e,mn(fn(qt)))}function Nt(t){return t.m2_1.length}function yt(t){return t.p2_1.length}function Ft(t){t.t2_1=t.t2_1+1|0}function Ot(t,e){$t(t,e)?Ut(t,yt(t)):Lt(t,t.r2_1+e|0)}function $t(t,e){var n=Nt(t)-t.r2_1|0,i=t.r2_1-t.g()|0;return n<e&&(i+n|0)>=e&&i>=(Nt(t)/4|0)}function Lt(t,e){if(e<0)throw Wi("too many elements");if(e>Nt(t)){var n=R.w2(Nt(t),e);t.m2_1=tt(t.m2_1,n);var i=t,s=t.n2_1;i.n2_1=null==s?null:tt(s,n),t.o2_1=Ei(t.o2_1,n);var o=Tt(r,n);o>yt(t)&&Ut(t,o)}}function It(t){var e=t.n2_1;if(null!=e)return e;var n=J(Nt(t));return t.n2_1=n,n}function Dt(t,e){return null==e?0:L(en(e),-1640531527)>>>t.s2_1|0}function Bt(t){for(var e=0,n=0,i=t.n2_1;e<t.r2_1;)t.o2_1[e]>=0&&(t.m2_1[n]=t.m2_1[e],null!=i&&(i[n]=i[e]),n=n+1|0),e=e+1|0;Q(t.m2_1,n,t.r2_1),null==i||Q(i,n,t.r2_1),t.r2_1=n}function Ut(t,e){Ft(t),t.r2_1>t.u2_1&&Bt(t),e!==yt(t)?(t.p2_1=new Int32Array(e),t.s2_1=bt(r,e)):gi(t.p2_1,0,0,yt(t));for(var n=0;n<t.r2_1;){var i=n;if(n=i+1|0,!Pt(t,i))throw Ui("This cannot happen with fixed magic multiplier and grow-only hash array. Have object hashCodes changed?")}}function Pt(t,e){for(var n=Dt(t,t.m2_1[e]),i=t.q2_1;;){if(0===t.p2_1[n])return t.p2_1[n]=e+1|0,t.o2_1[e]=n,!0;if((i=i-1|0)<0)return!1;var r=n;n=r-1|0,0===r&&(n=yt(t)-1|0)}}function kt(t,e){for(var n=Dt(t,e),i=t.q2_1;;){var r=t.p2_1[n];if(0===r)return-1;if(r>0&&ln(t.m2_1[r-1|0],e))return r-1|0;if((i=i-1|0)<0)return-1;var s=n;n=s-1|0,0===s&&(n=yt(t)-1|0)}}function Ht(t,e){for(var n=t.r2_1;(n=n-1|0)>=0;)if(t.o2_1[n]>=0&&ln(pn(t.n2_1)[n],e))return n;return-1}function Gt(t,e){t.r1();t:for(;;)for(var n=Dt(t,e),i=_e(L(t.q2_1,2),yt(t)/2|0),r=0;;){var s=t.p2_1[n];if(s<=0){if(t.r2_1>=Nt(t)){Ot(t,1);continue t}var o=t.r2_1;t.r2_1=o+1|0;var a=o;return t.m2_1[a]=e,t.o2_1[a]=n,t.p2_1[n]=a+1|0,t.u2_1=t.u2_1+1|0,Ft(t),r>t.q2_1&&(t.q2_1=r),a}if(ln(t.m2_1[s-1|0],e))return 0|-s;if((r=r+1|0)>i){Ut(t,L(yt(t),2));continue t}var h=n;n=h-1|0,0===h&&(n=yt(t)-1|0)}}function zt(t,e){return t.u2_1===e.g()&&t.i2(e.j1())}function Vt(){this.x2_1=-1640531527,this.y2_1=8,this.z2_1=2,this.a3_1=-1}function jt(t){this.b3_1=t,this.c3_1=0,this.d3_1=-1,this.e3_1=this.b3_1.t2_1,this.f3()}function Wt(t){jt.call(this,t)}function Xt(t){jt.call(this,t)}function Yt(t,e){this.v3_1=t,this.w3_1=e}function qt(t,e,n,i,s,o){this.m2_1=t,this.n2_1=e,this.o2_1=n,this.p2_1=i,this.q2_1=s,this.r2_1=o,this.s2_1=bt(r,yt(this)),this.t2_1=0,this.u2_1=0,this.v2_1=!1}function Zt(){}function Kt(t){return ft(t),ee.call(t),t}function Jt(){return Kt(mn(fn(ee)))}function Qt(t,e){return _t(t,e),ee.call(e),e}function te(t){return Qt(t,mn(fn(ee)))}function ee(){}function ne(){return Ur(Math.random()*Math.pow(2,32)|0)}function ie(t,e){return se(e),e}function re(t){return ie(t,mn(fn(ae)))}function se(t){return ae.call(t,""),t}function oe(){return se(mn(fn(ae)))}function ae(t){this.r3_1=void 0!==t?t:""}function he(t){return ht(xr(t))}function ue(t,e){return le(t,e)>=0}function le(t,e){if(null==e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;if(n=n+1|0,null==t[r])return r}while(n<=i)}else{var s=0,o=t.length-1|0;if(s<=o)do{var a=s;if(s=s+1|0,ln(e,t[a]))return a}while(s<=o)}return-1}function ce(t,e,n,i,r,s,o){return e=e===b?", ":e,n=n===b?"":n,i=i===b?"":i,r=r===b?-1:r,s=s===b?"...":s,o=o===b?null:o,fe(t,oe(),e,n,i,r,s,o).toString()}function fe(t,e,n,i,r,s,o,a){n=n===b?", ":n,i=i===b?"":i,r=r===b?"":r,s=s===b?-1:s,o=o===b?"...":o,a=a===b?null:a,e.z3(i);var h=0,u=0,l=t.length;t:for(;u<l;){var c=t[u];if(u=u+1|0,(h=h+1|0)>1&&e.z3(n),!(s<0||h<=s))break t;jr(e,c,a)}return s>=0&&h>s&&e.z3(o),e.z3(r),e}function de(t,e,n,i,r,s,o){return e=e===b?", ":e,n=n===b?"":n,i=i===b?"":i,r=r===b?-1:r,s=s===b?"...":s,o=o===b?null:o,me(t,oe(),e,n,i,r,s,o).toString()}function me(t,e,n,i,r,s,o,a){n=n===b?", ":n,i=i===b?"":i,r=r===b?"":r,s=s===b?-1:s,o=o===b?"...":o,a=a===b?null:a,e.z3(i);var h=0,u=t.h();t:for(;u.o();){var l=u.p();if((h=h+1|0)>1&&e.z3(n),!(s<0||h<=s))break t;jr(e,l,a)}return s>=0&&h>s&&e.z3(o),e.z3(r),e}function _e(t,e){return t>e?e:t}function ge(t,e){return t<e?e:t}function pe(){return s}function Ee(t){return t}function we(t){return t}function ve(t){return String.fromCharCode(we(t))}function Ae(){}function Te(){}function be(){}function Re(){}function xe(){}function Ce(){}function Se(){}function Me(t,e){this.a4_1=t,this.b4_1=e}function Ne(t){var e=null==t?null:Qe(t);return null==e?"null":e}function ye(t){for(var e=1,n=[],i=0,r=t.length;i<r;){var s=t[i];i=i+1|0;var o=e,a=s.prototype.$imask$,h=null==a?s.$imask$:a;null!=h&&(n.push(h),o=h.length);var u=s.$metadata$.iid,l=null==u?null:Fe(u);null!=l&&(n.push(l),o=Math.max(o,l.length)),o>e&&(e=o)}return Oe(e,n)}function Fe(t){var e=t>>5,n=new Int32Array(e+1|0),i=1<<(31&t);return n[e]=n[e]|i,n}function Oe(t,e){for(var n=0,i=new Int32Array(t);n<t;){for(var r=n,s=0,o=0,a=e.length;o<a;){var h=e[o];o=o+1|0,r<h.length&&(s|=h[r])}i[r]=s,n=n+1|0}return i}function $e(t,e){var n=e>>5;if(n>t.length)return!1;var i=1<<(31&e);return!(0===(t[n]&i))}function Le(t,e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0,t[r]=e}while(r!==i);return t}function Ie(t){return new De(t)}function De(t){this.h4_1=t,this.g4_1=0}function Be(){return ze(),o}function Ue(){return ze(),a}function Pe(){return ze(),h}function ke(){return ze(),u}function He(){return ze(),l}function Ge(t){return ze(),(0|t)===t?oi(t):(Ue()[0]=t,L(Pe()[He()],31)+Pe()[ke()]|0)}function ze(){c||(c=!0,o=new ArrayBuffer(8),a=new Float64Array(Be()),new Float32Array(Be()),h=new Int32Array(Be()),Ue()[0]=-1,u=0!==Pe()[0]?1:0,l=1-ke()|0)}function Ve(t){return ce(t,", ","[","]",b,b,je)}function je(t){return Qe(t)}function We(t,e){var n;switch(typeof t){case"number":n="number"==typeof e?Xe(t,e):e instanceof xn?Xe(t,e.k4()):Ye(t,e);break;case"string":case"boolean":n=Ye(t,e);break;default:n=qe(t,e)}return n}function Xe(t,e){var n;if(t<e)n=-1;else if(t>e)n=1;else if(t===e){var i;if(0!==t)i=0;else{var r=1/t;i=r===1/e?0:r<0?-1:1}n=i}else n=t!=t?e!=e?0:1:-1;return n}function Ye(t,e){return t<e?-1:t>e?1:0}function qe(t,e){return t.f4(e)}function Ze(t){return Ke(t)}function Ke(t){if(!("kotlinHashCodeValue$"in t)){var e=Je(),n=new Object;n.value=e,n.enumerable=!1,Object.defineProperty(t,"kotlinHashCodeValue$",n)}return t.kotlinHashCodeValue$}function Je(){return 4294967296*Math.random()|0}function Qe(t){return null==t?"null":hi(t)?"[...]":"function"!=typeof t.toString?tn(t):t.toString()}function tn(t){return Object.prototype.toString.call(t)}function en(t){if(null==t)return 0;var e,n=typeof t;switch(n){case"object":e="function"==typeof t.hashCode?t.hashCode():Ke(t);break;case"function":e=Ke(t);break;case"number":e=Ge(t);break;case"boolean":e=nn(t);break;case"string":e=rn(String(t));break;case"bigint":e=sn(t);break;case"symbol":e=on(t);break;default:e=function(){throw new Error("Unexpected typeof `"+n+"`")}()}return e}function nn(t){return t?1231:1237}function rn(t){var e=0,n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0;var s=t.charCodeAt(r);e=L(e,31)+s|0}while(r!==i);return e}function sn(t){for(var e=BigInt(32),n=BigInt(4294967295),i=t<0?-t:t,r=0,s=t<0?-1:1;0!=i;){var o=Number(i&n);r=L(31,r)+o|0,i>>=e}return L(r,s)}function on(t){var e=an(t)?hn():un(),n=e.get(t);if(n!==b)return n;var i=Je();return e.set(t,i),i}function an(t){return Symbol.keyFor(t)!=b}function hn(){return f===b&&(f=new Map),f}function un(){return d===b&&(d=new WeakMap),d}function ln(t,e){if(null==t)return null==e;if(null==e)return!1;if("object"==typeof t&&"function"==typeof t.equals)return t.equals(e);if(t!=t)return e!=e;if("number"==typeof t&&"number"==typeof e){var n;if(t===e)n=0!==t||1/t==1/e;else n=!1;return n}return t===e}function cn(t,e){null!=Error.captureStackTrace?Error.captureStackTrace(t,e):t.stack=(new Error).stack}function fn(t){return t.prototype}function dn(t,e,n,i){return Object.defineProperty(t,e,{configurable:!0,get:n,set:i})}function mn(t){return Object.create(t)}function _n(t,e,n){Error.call(t),gn(t,e,n)}function gn(t,e,n){var i=di(Object.getPrototypeOf(t));if(!(1&i)){var r;if(null==e){var s;if(null!==e){var o=null==n?null:n.toString();s=null==o?b:o}else s=b;r=s}else r=e;t.message=r}2&i||(t.cause=n),t.name=Object.getPrototypeOf(t).constructor.name}function pn(t){var e;return null==t?En():e=t,e}function En(){throw ir()}function wn(){throw or()}function vn(t){throw Mi(t)}function An(t,e){for(var n=t.length,i=e.length,r=0,s=e;r<n&&r<i;){var o=r,a=r;r=a+1|0,s[o]=t[a]}return e}function Tn(t,e,n){var i=t.slice(0,e);void 0!==t.$type$&&(i.$type$=t.$type$);var r=t.length;if(e>r)for(i.length=e;r<e;){var s=r;r=s+1|0,i[s]=n}return i}function bn(){m=this,this.l4_1=new xn(0,-2147483648),this.m4_1=new xn(-1,2147483647),this.n4_1=8,this.o4_1=64}function Rn(){return null==m&&new bn,m}function xn(t,e){Rn(),B.call(this),this.i4_1=t,this.j4_1=e}function Cn(){return Qn(),_}function Sn(){return Qn(),g}function Mn(){return Qn(),p}function Nn(){return Qn(),E}function yn(){return Qn(),w}function Fn(){return Qn(),v}function On(t,e){if(Qn(),kn(t,e))return 0;var n=Vn(t),i=Vn(e);return n&&!i?-1:!n&&i?1:Vn(Ln(t,e))?-1:1}function $n(t,e){Qn();var n=t.j4_1>>>16|0,i=65535&t.j4_1,r=t.i4_1>>>16|0,s=65535&t.i4_1,o=e.j4_1>>>16|0,a=65535&e.j4_1,h=e.i4_1>>>16|0,u=0,l=0,c=0,f=0;return u=(u=u+((l=(l=l+((c=(c=c+((f=f+(s+(65535&e.i4_1)|0)|0)>>>16|0)|0)+(r+h|0)|0)>>>16|0)|0)+(i+a|0)|0)>>>16|0)|0)+(n+o|0)|0,new xn((c&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535))}function Ln(t,e){return Qn(),$n(t,e.s4())}function In(t,e){if(Qn(),jn(t))return Cn();if(jn(e))return Cn();if(kn(t,yn()))return Wn(e)?yn():Cn();if(kn(e,yn()))return Wn(t)?yn():Cn();if(Vn(t))return Vn(e)?In(Xn(t),Xn(e)):Xn(In(Xn(t),e));if(Vn(e))return Xn(In(t,Xn(e)));if(Yn(t,Fn())&&Yn(e,Fn()))return qn(Pn(t)*Pn(e));var n=t.j4_1>>>16|0,i=65535&t.j4_1,r=t.i4_1>>>16|0,s=65535&t.i4_1,o=e.j4_1>>>16|0,a=65535&e.j4_1,h=e.i4_1>>>16|0,u=65535&e.i4_1,l=0,c=0,f=0,d=0;return f=f+((d=d+L(s,u)|0)>>>16|0)|0,d&=65535,c=(c=c+((f=f+L(r,u)|0)>>>16|0)|0)+((f=(f&=65535)+L(s,h)|0)>>>16|0)|0,f&=65535,l=(l=(l=l+((c=c+L(i,u)|0)>>>16|0)|0)+((c=(c&=65535)+L(r,h)|0)>>>16|0)|0)+((c=(c&=65535)+L(s,a)|0)>>>16|0)|0,c&=65535,l=l+(((L(n,u)+L(i,h)|0)+L(r,a)|0)+L(s,o)|0)|0,new xn(f<<16|d,(l&=65535)<<16|c)}function Dn(t,e){if(Qn(),jn(e))throw bi("division by zero");if(jn(t))return Cn();if(kn(t,yn())){if(kn(e,Sn())||kn(e,Mn()))return yn();if(kn(e,yn()))return Sn();var n=Bn(Un(t,1).r4(e),1);return kn(n,Cn())?Vn(e)?Sn():Mn():$n(n,Ln(t,In(e,n)).r4(e))}if(kn(e,yn()))return Cn();if(Vn(t))return Vn(e)?Xn(t).r4(Xn(e)):Xn(Xn(t).r4(e));if(Vn(e))return Xn(t.r4(Xn(e)));for(var i=Cn(),r=t;Kn(r,e);){for(var s=Pn(r)/Pn(e),o=Math.max(1,Math.floor(s)),a=Math.ceil(Math.log(o)/Math.LN2),h=a<=48?1:Math.pow(2,a-48),u=qn(o),l=In(u,e);Vn(l)||Zn(l,r);)l=In(u=qn(o-=h),e);jn(u)&&(u=Sn()),i=$n(i,u),r=Ln(r,l)}return i}function Bn(t,e){Qn();var n=63&e;return 0===n?t:n<32?new xn(t.i4_1<<n,t.j4_1<<n|t.i4_1>>>(32-n|0)):new xn(0,t.i4_1<<(n-32|0))}function Un(t,e){Qn();var n=63&e;return 0===n?t:n<32?new xn(t.i4_1>>>n|t.j4_1<<(32-n|0),t.j4_1>>n):new xn(t.j4_1>>(n-32|0),t.j4_1>=0?0:-1)}function Pn(t){return Qn(),4294967296*t.j4_1+Jn(t)}function kn(t,e){return Qn(),t.j4_1===e.j4_1&&t.i4_1===e.i4_1}function Hn(t){return Qn(),t.i4_1^t.j4_1}function Gn(t,e){if(Qn(),e<2||36<e)throw bi("radix out of range: "+e);if(jn(t))return"0";if(Vn(t)){if(kn(t,yn())){var n=zn(e),i=t.r4(n),r=Ln(In(i,n),t).u4();return Gn(i,e)+r.toString(e)}return"-"+Gn(Xn(t),e)}for(var s=2===e?31:e<=10?9:e<=21?7:e<=35?6:5,o=qn(Math.pow(e,s)),a=t,h="";;){var u=a.r4(o),l=Ln(a,In(u,o)).u4().toString(e);if(jn(a=u))return l+h;for(;l.length<s;)l="0"+l;h=l+h}}function zn(t){return Qn(),new xn(t,t<0?-1:0)}function Vn(t){return Qn(),t.j4_1<0}function jn(t){return Qn(),0===t.j4_1&&0===t.i4_1}function Wn(t){return Qn(),!(1&~t.i4_1)}function Xn(t){return Qn(),t.s4()}function Yn(t,e){return Qn(),On(t,e)<0}function qn(t){if(Qn(),k(t))return Cn();if(t<=-0x8000000000000000)return yn();if(t+1>=0x8000000000000000)return Nn();if(t<0)return Xn(qn(-t));var e=4294967296;return new xn(t%e|0,t/e|0)}function Zn(t,e){return Qn(),On(t,e)>0}function Kn(t,e){return Qn(),On(t,e)>=0}function Jn(t){return Qn(),t.i4_1>=0?t.i4_1:4294967296+t.i4_1}function Qn(){A||(A=!0,_=zn(0),g=zn(1),p=zn(-1),E=new xn(-1,2147483647),w=new xn(0,-2147483648),v=zn(16777216))}function ti(t,e,n,i,r){return ei("class",t,e,n,i,r,null)}function ei(t,e,n,i,r,s,o){return{kind:t,simpleName:e,associatedObjectKey:i,associatedObjects:r,suspendArity:s,$kClass$:b,defaultConstructor:n,iid:o}}function ni(t,e,n,i,r,s,o,a,h){null!=i&&(t.prototype=Object.create(i.prototype),t.prototype.constructor=t);var u=n(e,s,o,a,null==h?[]:h);t.$metadata$=u,null!=r&&((null!=u.iid?t:t.prototype).$imask$=ye(r))}function ii(t,e,n,i,r){return ei("interface",t,e,n,i,r,ri())}function ri(){return T===b&&(T=0),T=T+1|0}function si(t,e,n,i,r){return ei("object",t,e,n,i,r,null)}function oi(t){return t instanceof xn?t.u4():ai(t)}function ai(t){return t>2147483647?2147483647:t<-2147483648?-2147483648:0|t}function hi(t){return!!ui(t)||$(t)}function ui(t){return Array.isArray(t)}function li(t,e){return ci(t,e.$metadata$.iid)}function ci(t,e){var n=t.$imask$;return null!=n&&$e(n,e)}function fi(t){return"string"==typeof t||li(t,D)}function di(t){var e=t.constructor,n=null==e?null:e.$metadata$,i=null==n?null:n.errorInfo;if(null!=i)return i;var r=0;if(mi(t,"message")&&(r|=1),mi(t,"cause")&&(r|=2),3!==r){var s=_i(t);s!=Error.prototype&&(r|=di(s))}return null!=n&&(n.errorInfo=r),r}function mi(t,e){return t.hasOwnProperty(e)}function _i(t){return Object.getPrototypeOf(t)}function gi(t,e,n,i){n=n===b?0:n,i=i===b?t.length:i,R.f(n,i,t.length),t.fill(e,n,i)}function pi(t){return new lt(t)}function Ei(t,e){if(!(e>=0))throw Mi(Qe("Invalid new array size: "+e+"."));return An(t,new Int32Array(e))}function wi(t,e){if(!(e>=0))throw Mi(Qe("Invalid new array size: "+e+"."));return Tn(t,e,null)}function vi(t){return _n(t),Ri.call(t),t}function Ai(){var t=vi(mn(fn(Ri)));return cn(t,Ai),t}function Ti(t,e){return _n(e,t),Ri.call(e),e}function bi(t){var e=Ti(t,mn(fn(Ri)));return cn(e,bi),e}function Ri(){cn(this,Ri)}function xi(t){return zi(t),Ni.call(t),t}function Ci(){var t=xi(mn(fn(Ni)));return cn(t,Ci),t}function Si(t,e){return ji(t,e),Ni.call(e),e}function Mi(t){var e=Si(t,mn(fn(Ni)));return cn(e,Mi),e}function Ni(){cn(this,Ni)}function yi(t){return zi(t),Li.call(t),t}function Fi(){var t=yi(mn(fn(Li)));return cn(t,Fi),t}function Oi(t,e){return ji(t,e),Li.call(e),e}function $i(t){var e=Oi(t,mn(fn(Li)));return cn(e,$i),e}function Li(){cn(this,Li)}function Ii(t){return zi(t),Pi.call(t),t}function Di(){var t=Ii(mn(fn(Pi)));return cn(t,Di),t}function Bi(t,e){return ji(t,e),Pi.call(e),e}function Ui(t){var e=Bi(t,mn(fn(Pi)));return cn(e,Ui),e}function Pi(){cn(this,Pi)}function ki(t){return zi(t),Gi.call(t),t}function Hi(){var t=ki(mn(fn(Gi)));return cn(t,Hi),t}function Gi(){cn(this,Gi)}function zi(t){return vi(t),Xi.call(t),t}function Vi(){var t=zi(mn(fn(Xi)));return cn(t,Vi),t}function ji(t,e){return Ti(t,e),Xi.call(e),e}function Wi(t){var e=ji(t,mn(fn(Xi)));return cn(e,Wi),e}function Xi(){cn(this,Xi)}function Yi(t){return zi(t),Ji.call(t),t}function qi(){var t=Yi(mn(fn(Ji)));return cn(t,qi),t}function Zi(t,e){return ji(t,e),Ji.call(e),e}function Ki(t){var e=Zi(t,mn(fn(Ji)));return cn(e,Ki),e}function Ji(){cn(this,Ji)}function Qi(t){return zi(t),er.call(t),t}function tr(){var t=Qi(mn(fn(er)));return cn(t,tr),t}function er(){cn(this,er)}function nr(t){return zi(t),rr.call(t),t}function ir(){var t=nr(mn(fn(rr)));return cn(t,ir),t}function rr(){cn(this,rr)}function sr(t){return zi(t),ar.call(t),t}function or(){var t=sr(mn(fn(ar)));return cn(t,or),t}function ar(){cn(this,ar)}function hr(t){return function(e){return e===t?"(this Collection)":Ne(e)}}function ur(){}function lr(){this.e_1=2147483639}function cr(t,e){return e===t?"(this Map)":Ne(e)}function fr(t,e){var n;t:{for(var i=t.j1().h();i.o();){var r=i.p();if(ln(r.x3(),e)){n=r;break t}}n=null}return n}function dr(){}function mr(t){return function(e){return t.x4(e)}}function _r(){this.d1_1=null,this.e1_1=null}function gr(){}function pr(t){if(t.k())return[];for(var e=t.g(),n=Le(Array(e),null),i=t.h(),r=0;i.o();){var s=r;r=s+1|0,n[s]=i.p()}return n}function Er(t){return 0===t.length?rt():ht(new vr(t,!0))}function wr(t){return t.length>0?pi(t):Ar()}function vr(t,e){this.y4_1=t,this.z4_1=e}function Ar(){return br()}function Tr(){C=this,this.c5_1=new xn(-1478467534,-1720727600)}function br(){return null==C&&new Tr,C}function Rr(){}function xr(t){return new vr(t,!1)}function Cr(t){return 0===t.length?rt():ht(new vr(t,!0))}function Sr(t){return t.length>0?Mr(t,te(j(t.length))):Nr()}function Mr(t,e){return yr(e,t),e}function Nr(){var t=Or();return li(t,xe)?t:wn()}function yr(t,e){for(var n=0,i=e.length;n<i;){var r=e[n];n=n+1|0;var s=r.g5(),o=r.h5();t.c1(s,o)}}function Fr(){M=this,this.i5_1=new xn(-888910638,1920087921)}function Or(){return null==M&&new Fr,M}function $r(){N=this,this.l5_1=new xn(1993859828,793161749)}function Lr(){return null==N&&new $r,N}function Ir(){y=this,Br.call(this),this.m5_1=ne()}function Dr(){return null==y&&new Ir,y}function Br(){Dr()}function Ur(t){return Hr(t,t>>31)}function Pr(t,e){return t>>>(32-e|0)&-e>>31}function kr(t,e,n){return Vr.call(n,t,e,0,0,~t,t<<10^e>>>4),n}function Hr(t,e){return kr(t,e,mn(fn(Vr)))}function Gr(){F=this,this.p5_1=new xn(0,0)}function zr(){return null==F&&new Gr,F}function Vr(t,e,n,i,r,s){if(zr(),Br.call(this),this.q5_1=t,this.r5_1=e,this.s5_1=n,this.t5_1=i,this.u5_1=r,this.v5_1=s,0===(this.q5_1|this.r5_1|this.s5_1|this.t5_1|this.u5_1))throw Mi(Qe("Initial state must have at least one non-zero element."));var o=0;if(o<64)do{o=o+1|0,this.w5()}while(o<64)}function jr(t,e,n){null!=n?t.z3(n(e)):null==e||fi(e)?t.z3(e):e instanceof Ae?t.u3(e.x5_1):t.z3(Ne(e))}function Wr(t,e){this.e5_1=t,this.f5_1=e}function Xr(t,e){return new Wr(t,e)}ni(D,"CharSequence",ii),ni(B,"Number",ti),ni(U,"Unit",si),ni(P,"IntCompanionObject",si),ni(be,"Collection",ii),ni(ur,"AbstractCollection",ti,b,[be]),ni(X,"AbstractMutableCollection",ti,ur,[ur,be]),ni(Y,"IteratorImpl",ti),ni(Te,"List",ii,b,[be]),ni(q,"AbstractMutableList",ti,X,[X,be,Te]),ni(xe,"Map",ii),ni(_r,"AbstractMap",ti,b,[xe]),ni(Z,"AbstractMutableMap",ti,_r,[_r,xe]),ni(Ce,"Set",ii,b,[be]),ni(K,"AbstractMutableSet",ti,X,[X,Ce,be]),ni(et,"Companion",si),ni(lt,"ArrayList",ti,q,[q,be,Te],rt),ni(gt,"HashMap",ti,Z,[Z,xe],dt),ni(pt,"HashMapValues",ti,X,[be,X]),ni(wt,"HashMapEntrySetBase",ti,K,[Ce,be,K]),ni(Et,"HashMapEntrySet",ti,wt),ni(vt,b,ti),ni(At,"HashMapValuesDefault",ti,X),ni(Vt,"Companion",si),ni(jt,"Itr",ti),ni(Wt,"ValuesItr",ti,jt),ni(Xt,"EntriesItr",ti,jt),ni(Re,"Entry",ii),ni(Yt,"EntryRef",ti,b,[Re]),ni(Zt,"InternalMap",ii),ni(qt,"InternalHashMap",ti,b,[Zt],xt),ni(ee,"LinkedHashMap",ti,gt,[gt,xe],Jt),ni(ae,"StringBuilder",ti,b,[D],oe),ni(Ae,"Char",ti),ni(Se,"Companion",si),ni(Me,"Enum",ti),ni(De,b,ti),ni(bn,"Companion",si),ni(xn,"Long",ti,B),ni(Ri,"Exception",ti,Error,b,Ai),ni(Xi,"RuntimeException",ti,Ri,b,Vi),ni(Ni,"IllegalArgumentException",ti,Xi,b,Ci),ni(Li,"IndexOutOfBoundsException",ti,Xi,b,Fi),ni(Pi,"IllegalStateException",ti,Xi,b,Di),ni(Gi,"UnsupportedOperationException",ti,Xi,b,Hi),ni(Ji,"NoSuchElementException",ti,Xi,b,qi),ni(er,"ConcurrentModificationException",ti,Xi,b,tr),ni(rr,"NullPointerException",ti,Xi,b,ir),ni(ar,"ClassCastException",ti,Xi,b,or),ni(lr,"Companion",si),ni(dr,"Companion",si),ni(gr,"Companion",si),ni(vr,"ArrayAsCollection",ti,b,[be]),ni(Tr,"EmptyList",si,b,[Te]),ni(Rr,"EmptyIterator",si),ni(Fr,"EmptyMap",si,b,[xe]),ni($r,"EmptySet",si,b,[Ce]),ni(Br,"Random",ti),ni(Ir,"Default",si,Br),ni(Gr,"Companion",si),ni(Vr,"XorWowRandom",ti,Br),ni(Wr,"Pair",ti),fn(U).toString=function(){return"kotlin.Unit"},fn(P).a=function(){return this.MIN_VALUE},fn(P).b=function(){return this.MAX_VALUE},fn(P).c=function(){return this.SIZE_BYTES},fn(P).d=function(){return this.SIZE_BITS},fn(X).toJSON=function(){return this.toArray()},fn(Y).o=function(){return this.l_1<this.n_1.g()},fn(Y).p=function(){if(!this.o())throw qi();var t=this,e=this.l_1;return this.l_1=e+1|0,t.m_1=e,this.n_1.q(this.m_1)},fn(q).h=function(){return new Y(this)},fn(q).i=function(t){return this.t(t)>=0},fn(q).t=function(t){var e;t:{for(var n=0,i=this.h();i.o();){if(ln(i.p(),t)){e=n;break t}n=n+1|0}e=-1}return e},fn(q).equals=function(t){return t===this||!(null==t||!li(t,Te))&&R.u(this,t)},fn(q).hashCode=function(){return R.v(this)},fn(Z).a1=function(){return new At(this)},fn(Z).b1=function(){var t,e=this.z_1;if(null==e){var n=this.a1();this.z_1=n,t=n}else t=e;return t},fn(K).equals=function(t){return t===this||!(null==t||!li(t,Ce))&&x.k1(this,t)},fn(K).hashCode=function(){return x.l1(this)},fn(lt).g=function(){return this.n1_1.length},fn(lt).q=function(t){var e=this.n1_1[ut(this,t)];return null==e||null!=e?e:wn()},fn(lt).s=function(t,e){this.r1(),ut(this,t);var n=this.n1_1[t];return this.n1_1[t]=e,null==n||null!=n?n:wn()},fn(lt).t=function(t){return le(this.n1_1,t)},fn(lt).toString=function(){return Ve(this.n1_1)},fn(lt).s1=function(){return[].slice.call(this.n1_1)},fn(lt).toArray=function(){return this.s1()},fn(lt).r1=function(){if(this.o1_1)throw Hi()},fn(gt).f1=function(t){return this.x1_1.z1(t)},fn(gt).g1=function(t){return this.x1_1.g1(t)},fn(gt).a1=function(){return new pt(this.x1_1)},fn(gt).j1=function(){var t,e=this.y1_1;if(null==e){var n=new Et(this.x1_1);this.y1_1=n,t=n}else t=e;return t},fn(gt).i1=function(t){return this.x1_1.i1(t)},fn(gt).c1=function(t,e){return this.x1_1.c1(t,e)},fn(gt).g=function(){return this.x1_1.g()},fn(pt).g=function(){return this.a2_1.g()},fn(pt).k=function(){return 0===this.a2_1.g()},fn(pt).b2=function(t){return this.a2_1.g1(t)},fn(pt).i=function(t){return(null==t||null!=t)&&this.b2(null==t||null!=t?t:wn())},fn(pt).h=function(){return this.a2_1.c2()},fn(Et).h=function(){return this.e2_1.f2()},fn(wt).g=function(){return this.e2_1.g()},fn(wt).k=function(){return 0===this.e2_1.g()},fn(wt).g2=function(t){return this.e2_1.h2(t)},fn(wt).i=function(t){return!(null==t||!li(t,Re))&&this.g2(null!=t&&li(t,Re)?t:wn())},fn(wt).j=function(t){return this.e2_1.i2(t)},fn(vt).o=function(){return this.j2_1.o()},fn(vt).p=function(){return this.j2_1.p().k2()},fn(At).b2=function(t){return this.l2_1.g1(t)},fn(At).i=function(t){return(null==t||null!=t)&&this.b2(null==t||null!=t?t:wn())},fn(At).h=function(){return new vt(this.l2_1.j1().h())},fn(At).g=function(){return this.l2_1.g()},fn(jt).f3=function(){for(;this.c3_1<this.b3_1.r2_1&&this.b3_1.o2_1[this.c3_1]<0;)this.c3_1=this.c3_1+1|0},fn(jt).o=function(){return this.c3_1<this.b3_1.r2_1},fn(jt).g3=function(){if(this.b3_1.t2_1!==this.e3_1)throw tr()},fn(Wt).p=function(){if(this.g3(),this.c3_1>=this.b3_1.r2_1)throw qi();var t=this,e=this.c3_1;this.c3_1=e+1|0,t.d3_1=e;var n=pn(this.b3_1.n2_1)[this.d3_1];return this.f3(),n},fn(Xt).p=function(){if(this.g3(),this.c3_1>=this.b3_1.r2_1)throw qi();var t=this,e=this.c3_1;this.c3_1=e+1|0,t.d3_1=e;var n=new Yt(this.b3_1,this.d3_1);return this.f3(),n},fn(Xt).p3=function(){if(this.c3_1>=this.b3_1.r2_1)throw qi();var t=this,e=this.c3_1;this.c3_1=e+1|0,t.d3_1=e;var n=this.b3_1.m2_1[this.d3_1],i=null==n?null:en(n),r=null==i?0:i,s=pn(this.b3_1.n2_1)[this.d3_1],o=null==s?null:en(s),a=r^(null==o?0:o);return this.f3(),a},fn(Xt).q3=function(t){if(this.c3_1>=this.b3_1.r2_1)throw qi();var e=this,n=this.c3_1;this.c3_1=n+1|0,e.d3_1=n;var i=this.b3_1.m2_1[this.d3_1];ln(i,this.b3_1)?t.t3("(this Map)"):t.s3(i),t.u3(Ee(61));var r=pn(this.b3_1.n2_1)[this.d3_1];ln(r,this.b3_1)?t.t3("(this Map)"):t.s3(r),this.f3()},fn(Yt).x3=function(){return this.v3_1.m2_1[this.w3_1]},fn(Yt).k2=function(){return pn(this.v3_1.n2_1)[this.w3_1]},fn(Yt).equals=function(t){return!(null==t||!li(t,Re)||!ln(t.x3(),this.x3()))&&ln(t.k2(),this.k2())},fn(Yt).hashCode=function(){var t=this.x3(),e=null==t?null:en(t),n=null==e?0:e,i=this.k2(),r=null==i?null:en(i);return n^(null==r?0:r)},fn(Yt).toString=function(){return this.x3()+"="+this.k2()},fn(qt).g=function(){return this.u2_1},fn(qt).g1=function(t){return Ht(this,t)>=0},fn(qt).i1=function(t){var e=kt(this,t);return e<0?null:pn(this.n2_1)[e]},fn(qt).z1=function(t){return kt(this,t)>=0},fn(qt).c1=function(t,e){var n=Gt(this,t),i=It(this);if(n<0){var r=i[(0|-n)-1|0];return i[(0|-n)-1|0]=e,r}return i[n]=e,null},fn(qt).equals=function(t){return t===this||!(null==t||!li(t,xe))&&zt(this,t)},fn(qt).hashCode=function(){for(var t=0,e=this.f2();e.o();)t=t+e.p3()|0;return t},fn(qt).toString=function(){var t=re(2+L(this.u2_1,3)|0);t.t3("{");for(var e=0,n=this.f2();n.o();)e>0&&t.t3(", "),n.q3(t),e=e+1|0;return t.t3("}"),t.toString()},fn(qt).r1=function(){if(this.v2_1)throw Hi()},fn(qt).h2=function(t){var e=kt(this,t.x3());return!(e<0)&&ln(pn(this.n2_1)[e],t.k2())},fn(qt).y3=function(t){return this.h2(li(t,Re)?t:wn())},fn(qt).c2=function(){return new Wt(this)},fn(qt).f2=function(){return new Xt(this)},fn(ae).u3=function(t){return this.r3_1=this.r3_1+ve(t),this},fn(ae).z3=function(t){return this.r3_1=this.r3_1+Ne(t),this},fn(ae).s3=function(t){return this.r3_1=this.r3_1+Ne(t),this},fn(ae).t3=function(t){var e=this,n=this.r3_1;return e.r3_1=n+(null==t?"null":t),this},fn(ae).toString=function(){return this.r3_1},fn(Me).c4=function(){return this.a4_1},fn(Me).d4=function(){return this.b4_1},fn(Me).e4=function(t){return We(this.b4_1,t.b4_1)},fn(Me).f4=function(t){return this.e4(t instanceof Me?t:wn())},fn(Me).equals=function(t){return this===t},fn(Me).hashCode=function(){return Ze(this)},fn(Me).toString=function(){return this.a4_1},fn(De).o=function(){return!(this.g4_1===this.h4_1.length)},fn(De).p=function(){if(this.g4_1===this.h4_1.length)throw Ki(""+this.g4_1);var t=this.g4_1;return this.g4_1=t+1|0,this.h4_1[t]},fn(xn).p4=function(t){return On(this,t)},fn(xn).f4=function(t){return this.p4(t instanceof xn?t:wn())},fn(xn).q4=function(t){return $n(this,t)},fn(xn).r4=function(t){return Dn(this,t)},fn(xn).s4=function(){return this.t4().q4(new xn(1,0))},fn(xn).t4=function(){return new xn(~this.i4_1,~this.j4_1)},fn(xn).u4=function(){return this.i4_1},fn(xn).k4=function(){return Pn(this)},fn(xn).valueOf=function(){return this.k4()},fn(xn).equals=function(t){return t instanceof xn&&kn(this,t)},fn(xn).hashCode=function(){return Hn(this)},fn(xn).toString=function(){return Gn(this,10)},fn(ur).i=function(t){var e;t:if(li(this,be)&&this.k())e=!1;else{for(var n=this.h();n.o();)if(ln(n.p(),t)){e=!0;break t}e=!1}return e},fn(ur).j=function(t){var e;t:if(li(t,be)&&t.k())e=!0;else{for(var n=t.h();n.o();){var i=n.p();if(!this.i(i)){e=!1;break t}}e=!0}return e},fn(ur).k=function(){return 0===this.g()},fn(ur).toString=function(){return de(this,", ","[","]",b,b,hr(this))},fn(ur).toArray=function(){return G(this)},fn(lr).q1=function(t,e){if(t<0||t>=e)throw $i("index: "+t+", size: "+e)},fn(lr).f=function(t,e,n){if(t<0||e>n)throw $i("fromIndex: "+t+", toIndex: "+e+", size: "+n);if(t>e)throw Mi("fromIndex: "+t+" > toIndex: "+e)},fn(lr).w2=function(t,e){var i=t+(t>>1)|0;return(i-e|0)<0&&(i=e),(i-2147483639|0)>0&&(i=e>2147483639?n.MAX_VALUE:2147483639),i},fn(lr).v=function(t){for(var e=1,n=t.h();n.o();){var i=n.p(),r=L(31,e),s=null==i?null:en(i);e=r+(null==s?0:s)|0}return e},fn(lr).u=function(t,e){if(t.g()!==e.g())return!1;for(var n=e.h(),i=t.h();i.o();)if(!ln(i.p(),n.p()))return!1;return!0},fn(_r).f1=function(t){return!(null==fr(this,t))},fn(_r).g1=function(t){var e;t:{var n=this.j1();if(li(n,be)&&n.k())e=!1;else{for(var i=n.h();i.o();)if(ln(i.p().k2(),t)){e=!0;break t}e=!1}}return e},fn(_r).h1=function(t){if(null==t||!li(t,Re))return!1;var e=t.x3(),n=t.k2(),i=(li(this,xe)?this:wn()).i1(e);return!(!ln(n,i)||null==i&&!(li(this,xe)?this:wn()).f1(e))},fn(_r).equals=function(t){if(t===this)return!0;if(null==t||!li(t,xe))return!1;if(this.g()!==t.g())return!1;var e;t:{var n=t.j1();if(li(n,be)&&n.k())e=!0;else{for(var i=n.h();i.o();){var r=i.p();if(!this.h1(r)){e=!1;break t}}e=!0}}return e},fn(_r).i1=function(t){var e=fr(this,t);return null==e?null:e.k2()},fn(_r).hashCode=function(){return en(this.j1())},fn(_r).k=function(){return 0===this.g()},fn(_r).g=function(){return this.j1().g()},fn(_r).toString=function(){return de(this.j1(),", ","{","}",b,b,mr(this))},fn(_r).x4=function(t){return cr(this,t.x3())+"="+cr(this,t.k2())},fn(gr).l1=function(t){for(var e=0,n=t.h();n.o();){var i=n.p(),r=e,s=null==i?null:en(i);e=r+(null==s?0:s)|0}return e},fn(gr).k1=function(t,e){return t.g()===e.g()&&t.j(e)},fn(vr).g=function(){return this.y4_1.length},fn(vr).k=function(){return 0===this.y4_1.length},fn(vr).a5=function(t){return ue(this.y4_1,t)},fn(vr).b5=function(t){var e;t:if(li(t,be)&&t.k())e=!0;else{for(var n=t.h();n.o();){var i=n.p();if(!this.a5(i)){e=!1;break t}}e=!0}return e},fn(vr).j=function(t){return this.b5(t)},fn(vr).h=function(){return Ie(this.y4_1)},fn(Tr).equals=function(t){return!(null==t||!li(t,Te))&&t.k()},fn(Tr).hashCode=function(){return 1},fn(Tr).toString=function(){return"[]"},fn(Tr).g=function(){return 0},fn(Tr).k=function(){return!0},fn(Tr).d5=function(t){return t.k()},fn(Tr).j=function(t){return this.d5(t)},fn(Tr).q=function(t){throw $i("Empty list doesn't contain element at index "+t+".")},fn(Tr).h=function(){return S},fn(Rr).o=function(){return!1},fn(Rr).p=function(){throw qi()},fn(Fr).equals=function(t){return!(null==t||!li(t,xe))&&t.k()},fn(Fr).hashCode=function(){return 0},fn(Fr).toString=function(){return"{}"},fn(Fr).g=function(){return 0},fn(Fr).k=function(){return!0},fn(Fr).j5=function(t){return!1},fn(Fr).f1=function(t){return(null==t||null!=t)&&this.j5(null==t||null!=t?t:wn())},fn(Fr).k5=function(t){return null},fn(Fr).i1=function(t){return null!=t&&null==t?null:this.k5(null==t||null!=t?t:wn())},fn(Fr).j1=function(){return Lr()},fn($r).equals=function(t){return!(null==t||!li(t,Ce))&&t.k()},fn($r).hashCode=function(){return 0},fn($r).toString=function(){return"[]"},fn($r).g=function(){return 0},fn($r).k=function(){return!0},fn($r).d5=function(t){return t.k()},fn($r).j=function(t){return this.d5(t)},fn($r).h=function(){return S},fn(Ir).n5=function(t){return this.m5_1.n5(t)},fn(Ir).o5=function(){return this.m5_1.o5()},fn(Br).o5=function(){return this.n5(24)/16777216},fn(Vr).w5=function(){var t=this.q5_1;t^=t>>>2|0,this.q5_1=this.r5_1,this.r5_1=this.s5_1,this.s5_1=this.t5_1;var e=this.u5_1;return this.t5_1=e,t=t^t<<1^e^e<<4,this.u5_1=t,this.v5_1=this.v5_1+362437|0,t+this.v5_1|0},fn(Vr).n5=function(t){return Pr(this.w5(),t)},fn(Wr).toString=function(){return"("+this.e5_1+", "+this.f5_1+")"},fn(Wr).g5=function(){return this.e5_1},fn(Wr).h5=function(){return this.f5_1},fn(Wr).hashCode=function(){var t=null==this.e5_1?0:en(this.e5_1);return t=L(t,31)+(null==this.f5_1?0:en(this.f5_1))|0},fn(Wr).equals=function(t){if(this===t)return!0;if(!(t instanceof Wr))return!1;var e=t instanceof Wr?t:wn();return!!ln(this.e5_1,e.e5_1)&&!!ln(this.f5_1,e.f5_1)},fn(qt).i2=I,e=new U,n=new P,r=new Vt,s=3.141592653589793,R=new lr,x=new gr,S=new Rr,t.$_$=t.$_$||{},t.$_$.a=b,t.$_$.b=rt,t.$_$.c=Jt,t.$_$.d=bi,t.$_$.e=Mi,t.$_$.f=Dr,t.$_$.g=e,t.$_$.h=V,t.$_$.i=z,t.$_$.j=wr,t.$_$.k=Sr,t.$_$.l=Er,t.$_$.m=he,t.$_$.n=ti,t.$_$.o=dn,t.$_$.p=ln,t.$_$.q=Le,t.$_$.r=Ge,t.$_$.s=en,t.$_$.t=oi,t.$_$.u=mn,t.$_$.v=si,t.$_$.w=fn,t.$_$.x=ni,t.$_$.y=Qe,t.$_$.z=pe,t.$_$.a1=Me,t.$_$.b1=wn,t.$_$.c1=vn,t.$_$.d1=pn,t.$_$.e1=Xr}(t.exports)})),w=p((function(t,e){!function(t,e){var n,i,r,s,o,a,h,u,l,c,f,d,m,_,g,p,E,w,v,A,T,b,R,x,C,S,M,N,y,F,O,$,L,I,D,B,U,P,k,H,G,z,V,j,W,X,Y,q,Z,K,J,Q,tt,et,nt,it,rt,st,ot,at,ht,ut,lt,ct,ft,dt,mt,_t,gt,pt,Et,wt,vt,At,Tt,bt,Rt,xt,Ct,St,Mt,Nt,yt,Ft,Ot,$t,Lt,It,Dt,Bt,Ut,Pt,kt,Ht,Gt,zt,Vt,jt,Wt,Xt,Yt,qt,Zt,Kt,Jt,Qt,te,ee,ne,ie,re,se,oe,ae,he,ue,le,ce,fe,de,me,_e,ge,pe,Ee,we,ve,Ae,Te,be,Re,xe,Ce,Se,Me,Ne,ye,Fe,Oe,$e,Le,Ie,De,Be,Ue,Pe,ke,He,Ge,ze,Ve,je=Math.imul,We=e.$_$.c1,Xe=e.$_$.g,Ye=e.$_$.a1,qe=e.$_$.w,Ze=e.$_$.o,Ke=e.$_$.n,Je=e.$_$.x,Qe=e.$_$.a,tn=e.$_$.b,en=e.$_$.b1,nn=e.$_$.h,rn=e.$_$.s,sn=e.$_$.p,on=e.$_$.t,an=e.$_$.d,hn=e.$_$.d1,un=e.$_$.v,ln=e.$_$.m,cn=e.$_$.u,fn=e.$_$.f,dn=e.$_$.y,mn=e.$_$.e,_n=e.$_$.z,gn=e.$_$.r,pn=e.$_$.c;function En(){return[Tn(),bn()]}function wn(t){switch(t){case"OPENGL":return Tn();case"METAL":return bn();default:vn(),We("No enum constant value.")}}function vn(){if(r)return Xe;r=!0,n=new An("OPENGL",0),i=new An("METAL",1)}function An(t,e,n){Ye.call(this,t,e)}function Tn(){return vn(),n}function bn(){return vn(),i}function Rn(){return Jn(),s}function xn(){return[Ln(),In(),Dn()]}function Cn(t){switch(t){case"ADD":return Ln();case"SUBTRACT":return In();case"REVERSE_SUBTRACT":return Dn();default:Sn(),We("No enum constant value.")}}function Sn(){if(u)return Xe;u=!0,o=new Mn("ADD",0),a=new Mn("SUBTRACT",1),h=new Mn("REVERSE_SUBTRACT",2)}function Mn(t,e,n){Ye.call(this,t,e)}function Nn(){return[Bn(),Un(),Pn(),kn(),Hn(),Gn(),zn(),Vn(),jn(),Wn(),Xn(),Yn(),qn(),Zn(),Kn()]}function yn(t){switch(t){case"ZERO":return Bn();case"ONE":return Un();case"SRC_COLOR":return Pn();case"ONE_MINUS_SRC_COLOR":return kn();case"DST_COLOR":return Hn();case"ONE_MINUS_DST_COLOR":return Gn();case"SRC_ALPHA":return zn();case"ONE_MINUS_SRC_ALPHA":return Vn();case"DST_ALPHA":return jn();case"ONE_MINUS_DST_ALPHA":return Wn();case"CONSTANT_COLOR":return Xn();case"ONE_MINUS_CONSTANT_COLOR":return Yn();case"CONSTANT_ALPHA":return qn();case"ONE_MINUS_CONSTANT_ALPHA":return Zn();case"SRC_ALPHA_SATURATE":return Kn();default:Fn(),We("No enum constant value.")}}function Fn(){if(x)return Xe;x=!0,l=new On("ZERO",0),c=new On("ONE",1),f=new On("SRC_COLOR",2),d=new On("ONE_MINUS_SRC_COLOR",3),m=new On("DST_COLOR",4),_=new On("ONE_MINUS_DST_COLOR",5),g=new On("SRC_ALPHA",6),p=new On("ONE_MINUS_SRC_ALPHA",7),E=new On("DST_ALPHA",8),w=new On("ONE_MINUS_DST_ALPHA",9),v=new On("CONSTANT_COLOR",10),A=new On("ONE_MINUS_CONSTANT_COLOR",11),T=new On("CONSTANT_ALPHA",12),b=new On("ONE_MINUS_CONSTANT_ALPHA",13),R=new On("SRC_ALPHA_SATURATE",14)}function On(t,e,n){Ye.call(this,t,e)}function $n(){this.enabled=!1,this.isSeparateAlpha=!1,this.equationAlpha=Ln(),this.equationColor=Ln(),this.sourceFactorAlpha=Bn(),this.destinationFactorAlpha=Bn(),this.sourceFactorColor=Bn(),this.destinationFactorColor=Bn()}function Ln(){return Sn(),o}function In(){return Sn(),a}function Dn(){return Sn(),h}function Bn(){return Fn(),l}function Un(){return Fn(),c}function Pn(){return Fn(),f}function kn(){return Fn(),d}function Hn(){return Fn(),m}function Gn(){return Fn(),_}function zn(){return Fn(),g}function Vn(){return Fn(),p}function jn(){return Fn(),E}function Wn(){return Fn(),w}function Xn(){return Fn(),v}function Yn(){return Fn(),A}function qn(){return Fn(),T}function Zn(){return Fn(),b}function Kn(){return Fn(),R}function Jn(){if(!C){C=!0;var t=new $n;t.enabled=!1,s=t}}function Qn(){return[ii(),ri(),si(),oi()]}function ti(t){switch(t){case"FRONT":return ii();case"BACK":return ri();case"FRONT_AND_BACK":return si();case"DISABLED":return oi();default:ei(),We("No enum constant value.")}}function ei(){if(F)return Xe;F=!0,S=new ni("FRONT",0),M=new ni("BACK",1),N=new ni("FRONT_AND_BACK",2),y=new ni("DISABLED",3)}function ni(t,e,n){Ye.call(this,t,e)}function ii(){return ei(),S}function ri(){return ei(),M}function si(){return ei(),N}function oi(){return ei(),y}function ai(){return li(),O}function hi(){return li(),$}function ui(t,e){t=t!==Qe&&t,e=e!==Qe&&e,this.depthTest=t,this.depthWrite=e}function li(){L||(L=!0,new ui(!1,!1),O=new ui(!0,!0),$=new ui(!0,!1),new ui(!1,!0))}function ci(){this.name="",this.id=0,this.fileName="",this.loaded=!1}function fi(t,e,n,i,r,s){var o,a=n/360*3.1415925,h=Math.tan(a)*r;o=h*i,Yo().o7(e,0,-o,o,-h,h,r,s)}function di(){this.lastFrameTime=0,this.viewportWidth=0,this.viewportHeight=0,this.matView=new Float32Array(16),this.useExternalViewMatrix=!1,this.matProjection=new Float32Array(16),this.matModel=new Float32Array(16),this.matMVP=new Float32Array(16),this.zoom=0,this.ZOOM_FOV=10,this.FOV_LANDSCAPE=0,this.FOV_PORTRAIT=0,this.Z_NEAR=0,this.Z_FAR=0,this.backendMode=Tn(),this.p7_1=!1,this.q7_1=tn(),this.r7_1=tn(),this.s7_1=tn(),this.t7_1=tn()}function mi(){this.name="",this.id=-1}function _i(){return[Mi(),Ni(),yi(),Fi(),Oi(),$i()]}function gi(t){switch(t){case"NEAREST":return Mi();case"LINEAR":return Ni();case"NEAREST_MIPMAP_NEAREST":return yi();case"LINEAR_MIPMAP_NEAREST":return Fi();case"NEAREST_MIPMAP_LINEAR":return Oi();case"LINEAR_MIPMAP_LINEAR":return $i();default:pi(),We("No enum constant value.")}}function pi(){if(H)return Xe;H=!0,I=new Ei("NEAREST",0),D=new Ei("LINEAR",1),B=new Ei("NEAREST_MIPMAP_NEAREST",2),U=new Ei("LINEAR_MIPMAP_NEAREST",3),P=new Ei("NEAREST_MIPMAP_LINEAR",4),k=new Ei("LINEAR_MIPMAP_LINEAR",5)}function Ei(t,e,n){Ye.call(this,t,e)}function wi(){return[Li(),Ii(),Di()]}function vi(t){switch(t){case"CLAMP_TO_EDGE":return Li();case"MIRRORED_REPEAT":return Ii();case"REPEAT":return Di();default:Ai(),We("No enum constant value.")}}function Ai(){if(j)return Xe;j=!0,G=new Ti("CLAMP_TO_EDGE",0),z=new Ti("MIRRORED_REPEAT",1),V=new Ti("REPEAT",2)}function Ti(t,e,n){Ye.call(this,t,e)}function bi(){return[Bi(),Ui(),Pi(),ki(),Hi(),Gi(),zi()]}function Ri(t){switch(t){case"RGBA8":return Bi();case"RGB8":return Ui();case"RGB16F":return Pi();case"RGB32F":return ki();case"RGBA16F":return Hi();case"RGBA32F":return Gi();case"ASTC":return zi();default:xi(),We("No enum constant value.")}}function xi(){if(Q)return Xe;Q=!0,W=new Ci("RGBA8",0),X=new Ci("RGB8",1),Y=new Ci("RGB16F",2),q=new Ci("RGB32F",3),Z=new Ci("RGBA16F",4),K=new Ci("RGBA32F",5),J=new Ci("ASTC",6)}function Ci(t,e,n){Ye.call(this,t,e)}function Si(){this.name="",this.fileName="",this.id=0,this.loaded=!1,this.width=0,this.height=0,this.minFilter=Ni(),this.magFilter=Ni(),this.wrapping=Di(),this.mipmaps=0,this.format=Bi(),this.anisotropy=0}function Mi(){return pi(),I}function Ni(){return pi(),D}function yi(){return pi(),B}function Fi(){return pi(),U}function Oi(){return pi(),P}function $i(){return pi(),k}function Li(){return Ai(),G}function Ii(){return Ai(),z}function Di(){return Ai(),V}function Bi(){return xi(),W}function Ui(){return xi(),X}function Pi(){return xi(),Y}function ki(){return xi(),q}function Hi(){return xi(),Z}function Gi(){return xi(),K}function zi(){return xi(),J}function Vi(){}function ji(t){Vi.call(this),this.value=t}function Wi(t){Vi.call(this),this.value=t}function Xi(t){Vi.call(this),this.value=t}function Yi(t,e){var n=(t instanceof ji?t:en()).value,i=e.length;nn(e,n,0,0,i)}function qi(t,e,n,i,r){var s=t instanceof ji?t:en();s.value[0]=e,s.value[1]=n,s.value[2]=i,s.value[3]=r}function Zi(t,e){(t instanceof Wi?t:en()).value[0]=e}function Ki(t,e){(t instanceof ji?t:en()).value[0]=e}function Ji(){return[rr(),sr(),or(),ar(),hr(),ur(),lr(),cr(),fr(),dr(),mr(),_r(),gr(),pr(),Er(),wr(),vr(),Ar(),Tr(),br(),Rr(),xr(),Cr(),Sr(),Mr(),Nr(),yr(),Fr(),Or(),$r(),Lr(),Ir(),Dr(),Br(),Ur(),Pr(),kr(),Hr(),Gr(),zr(),Vr(),jr(),Wr(),Xr(),Yr(),qr(),Zr(),Kr(),Jr(),Qr()]}function Qi(t){switch(t){case"UBYTE":return rr();case"UBYTE2":return sr();case"UBYTE3":return or();case"UBYTE4":return ar();case"BYTE":return hr();case"BYTE2":return ur();case"BYTE3":return lr();case"BYTE4":return cr();case"UBYTE_NORMALIZED":return fr();case"UBYTE2_NORMALIZED":return dr();case"UBYTE3_NORMALIZED":return mr();case"UBYTE4_NORMALIZED":return _r();case"BYTE_NORMALIZED":return gr();case"BYTE2_NORMALIZED":return pr();case"BYTE3_NORMALIZED":return Er();case"BYTE4_NORMALIZED":return wr();case"USHORT":return vr();case"USHORT2":return Ar();case"USHORT3":return Tr();case"USHORT4":return br();case"SHORT":return Rr();case"SHORT2":return xr();case"SHORT3":return Cr();case"SHORT4":return Sr();case"USHORT_NORMALIZED":return Mr();case"USHORT2_NORMALIZED":return Nr();case"USHORT3_NORMALIZED":return yr();case"USHORT4_NORMALIZED":return Fr();case"SHORT_NORMALIZED":return Or();case"SHORT2_NORMALIZED":return $r();case"SHORT3_NORMALIZED":return Lr();case"SHORT4_NORMALIZED":return Ir();case"HALF":return Dr();case"HALF2":return Br();case"HALF3":return Ur();case"HALF4":return Pr();case"FLOAT":return kr();case"FLOAT2":return Hr();case"FLOAT3":return Gr();case"FLOAT4":return zr();case"UINT":return Vr();case"UINT2":return jr();case"UINT3":return Wr();case"UINT4":return Xr();case"INT":return Yr();case"INT2":return qr();case"INT3":return Zr();case"INT4":return Kr();case"INT_1010102_NORMALIZED":return Jr();case"UINT_1010102_NORMALIZED":return Qr();default:tr(),We("No enum constant value.")}}function tr(){if(Zt)return Xe;Zt=!0,tt=new er("UBYTE",0),et=new er("UBYTE2",1),nt=new er("UBYTE3",2),it=new er("UBYTE4",3),rt=new er("BYTE",4),st=new er("BYTE2",5),ot=new er("BYTE3",6),at=new er("BYTE4",7),ht=new er("UBYTE_NORMALIZED",8),ut=new er("UBYTE2_NORMALIZED",9),lt=new er("UBYTE3_NORMALIZED",10),ct=new er("UBYTE4_NORMALIZED",11),ft=new er("BYTE_NORMALIZED",12),dt=new er("BYTE2_NORMALIZED",13),mt=new er("BYTE3_NORMALIZED",14),_t=new er("BYTE4_NORMALIZED",15),gt=new er("USHORT",16),pt=new er("USHORT2",17),Et=new er("USHORT3",18),wt=new er("USHORT4",19),vt=new er("SHORT",20),At=new er("SHORT2",21),Tt=new er("SHORT3",22),bt=new er("SHORT4",23),Rt=new er("USHORT_NORMALIZED",24),xt=new er("USHORT2_NORMALIZED",25),Ct=new er("USHORT3_NORMALIZED",26),St=new er("USHORT4_NORMALIZED",27),Mt=new er("SHORT_NORMALIZED",28),Nt=new er("SHORT2_NORMALIZED",29),yt=new er("SHORT3_NORMALIZED",30),Ft=new er("SHORT4_NORMALIZED",31),Ot=new er("HALF",32),$t=new er("HALF2",33),Lt=new er("HALF3",34),It=new er("HALF4",35),Dt=new er("FLOAT",36),Bt=new er("FLOAT2",37),Ut=new er("FLOAT3",38),Pt=new er("FLOAT4",39),kt=new er("UINT",40),Ht=new er("UINT2",41),Gt=new er("UINT3",42),zt=new er("UINT4",43),Vt=new er("INT",44),jt=new er("INT2",45),Wt=new er("INT3",46),Xt=new er("INT4",47),Yt=new er("INT_1010102_NORMALIZED",48),qt=new er("UINT_1010102_NORMALIZED",49)}function er(t,e,n){Ye.call(this,t,e)}function nr(t,e,n){this.index=t,this.format=e,this.offset=n}function ir(t,e){this.attributes=t,this.stride=e}function rr(){return tr(),tt}function sr(){return tr(),et}function or(){return tr(),nt}function ar(){return tr(),it}function hr(){return tr(),rt}function ur(){return tr(),st}function lr(){return tr(),ot}function cr(){return tr(),at}function fr(){return tr(),ht}function dr(){return tr(),ut}function mr(){return tr(),lt}function _r(){return tr(),ct}function gr(){return tr(),ft}function pr(){return tr(),dt}function Er(){return tr(),mt}function wr(){return tr(),_t}function vr(){return tr(),gt}function Ar(){return tr(),pt}function Tr(){return tr(),Et}function br(){return tr(),wt}function Rr(){return tr(),vt}function xr(){return tr(),At}function Cr(){return tr(),Tt}function Sr(){return tr(),bt}function Mr(){return tr(),Rt}function Nr(){return tr(),xt}function yr(){return tr(),Ct}function Fr(){return tr(),St}function Or(){return tr(),Mt}function $r(){return tr(),Nt}function Lr(){return tr(),yt}function Ir(){return tr(),Ft}function Dr(){return tr(),Ot}function Br(){return tr(),$t}function Ur(){return tr(),Lt}function Pr(){return tr(),It}function kr(){return tr(),Dt}function Hr(){return tr(),Bt}function Gr(){return tr(),Ut}function zr(){return tr(),Pt}function Vr(){return tr(),kt}function jr(){return tr(),Ht}function Wr(){return tr(),Gt}function Xr(){return tr(),zt}function Yr(){return tr(),Vt}function qr(){return tr(),jt}function Zr(){return tr(),Wt}function Kr(){return tr(),Xt}function Jr(){return tr(),Yt}function Qr(){return tr(),qt}function ts(t,e,n){this.wa_1=t,this.xa_1=n,this.ya_1=1/this.wa_1*.5;var i=this,r=e/this.wa_1,s=Math.ceil(r);i.bb_1=je(on(s),this.xa_1+1|0),this.za_1=1/this.bb_1*.5,this.ab_1=1/this.bb_1;var o=this,a=e/this.wa_1;o.cb_1=1/Math.ceil(a)}function es(t){var e=t.ib_1[t.gb_1];t.eb_1.setMinDuration(t.minDuration*t.jb_1),t.eb_1.setPosition(e),t.eb_1.reset()}function ns(t,e,n,i){i=i!==Qe&&i,this.speed=t,this.minDuration=e,this.transitionDuration=n,this.enabled=!0,this.eb_1=new hs(i),this.fb_1=!1,this.gb_1=0,this.hb_1=ms(),this.ib_1=[],this.jb_1=1,this.kb_1=0,this.eb_1.speed=this.speed,this.eb_1.setMinDuration(this.minDuration*this.jb_1)}function is(t,e){this.gc_1=t,this.hc_1=e}function rs(t){if(null==t.lb_1)throw an("position is not set");var e=hn(t.lb_1).ic_1.gc_1,n=hn(t.lb_1).jc_1.gc_1,i=n.x-e.x,r=Math.pow(i,2),s=n.y-e.y,o=r+Math.pow(s,2),a=n.z-e.z,h=o+Math.pow(a,2);return Math.sqrt(h)}function ss(t){if(null==t.lb_1)throw an("position is not set");var e=t.timer;t.isSmooth&&(e=ze.lc(0,1,t.timer));var n=t.reverse?hn(t.lb_1).jc_1:hn(t.lb_1).ic_1,i=t.reverse?hn(t.lb_1).ic_1:hn(t.lb_1).jc_1;t.qb_1.x=n.gc_1.x+e*(i.gc_1.x-n.gc_1.x),t.qb_1.y=n.gc_1.y+e*(i.gc_1.y-n.gc_1.y),t.qb_1.z=n.gc_1.z+e*(i.gc_1.z-n.gc_1.z),t.rb_1.x=n.hc_1.x+e*(i.hc_1.x-n.hc_1.x),t.rb_1.y=n.hc_1.y+e*(i.hc_1.y-n.hc_1.y),t.rb_1.z=n.hc_1.z+e*(i.hc_1.z-n.hc_1.z),Yo().d9(t.matrix,0),Yo().f9(t.matrix,0,57.2958*(t.rb_1.x-1.5707964),1,0,0),Yo().f9(t.matrix,0,57.2958*t.rb_1.y,0,0,1),Yo().f9(t.matrix,0,57.2958*t.rb_1.z,0,1,0),Yo().g9(t.matrix,0,-t.qb_1.x,-t.qb_1.y,-t.qb_1.z)}function os(){this.mc_1=1.5707964}function as(){return Kt}function hs(t){t=t!==Qe&&t,this.isSmooth=t,this.lb_1=null,this.speed=0,this.mb_1=0,this.nb_1=3e3,this.ob_1=0,this.timer=0,this.pb_1=0,this.reverse=!1,this.qb_1=new Zo(0,0,0),this.rb_1=new Zo(0,0,0),this.matrix=new Float32Array(16)}function us(t,e,n){n=n===Qe?1:n,this.ic_1=t,this.jc_1=e,this.kc_1=n}function ls(){return[ms(),_s()]}function cs(t){switch(t){case"ANIMATING":return ms();case"TRANSITIONING":return _s();default:fs(),We("No enum constant value.")}}function fs(){if(te)return Xe;te=!0,Jt=new ds("ANIMATING",0,0),Qt=new ds("TRANSITIONING",1,1)}function ds(t,e,n){Ye.call(this,t,e),this.value=n}function ms(){return fs(),Jt}function _s(){return fs(),Qt}function gs(){return[Ts(),bs(),Rs(),xs()]}function ps(t){switch(t){case"KERNEL_5":return Ts();case"KERNEL_4":return bs();case"KERNEL_3":return Rs();case"KERNEL_2":return xs();default:Es(),We("No enum constant value.")}}function Es(){if(se)return Xe;se=!0,ee=new ws("KERNEL_5",0),ne=new ws("KERNEL_4",1),ie=new ws("KERNEL_3",2),re=new ws("KERNEL_2",3)}function ws(t,e){Ye.call(this,t,e)}function vs(){So(this),this.zc_1=Ws(),this.minSize=200,this.brightness=1,this.blurSize=bs(),this.id=0}function As(){Is.call(this),this.hd_1=Xs(),this.blending=Rn(),this.id=0}function Ts(){return Es(),ee}function bs(){return Es(),ne}function Rs(){return Es(),ie}function xs(){return Es(),re}function Cs(){Is.call(this),this.ld_1=Gs(),this.color=new Ko(0,0,0,0)}function Ss(){return[Os(),$s(),Ls()]}function Ms(t){switch(t){case"COLOR":return Os();case"DEPTH":return $s();case"COLOR_AND_DEPTH":return Ls();default:Ns(),We("No enum constant value.")}}function Ns(){if(ue)return Xe;ue=!0,oe=new ys("COLOR",0),ae=new ys("DEPTH",1),he=new ys("COLOR_AND_DEPTH",2)}function ys(t,e,n){Ye.call(this,t,e)}function Fs(){Is.call(this),this.qd_1=zs(),this.clearType=Ls()}function Os(){return Ns(),oe}function $s(){return Ns(),ae}function Ls(){return Ns(),he}function Is(){this.enabled=!0,this.name=""}function Ds(){return[ks(),Hs(),Gs(),zs(),Vs(),js(),Ws(),Xs(),Ys(),qs(),Zs()]}function Bs(t){switch(t){case"NOOP":return ks();case"GROUP":return Hs();case"CLEAR_COLOR":return Gs();case"CLEAR":return zs();case"VIGNETTE":return Vs();case"DRAW_MESH":return js();case"BLURRED_PASS":return Ws();case"DRAW_BLURRED":return Xs();case"RENDER_PASS":return Ys();case"MAIN_PASS":return qs();case"CUSTOM":return Zs();default:Us(),We("No enum constant value.")}}function Us(){if(Ae)return Xe;Ae=!0,le=new Ps("NOOP",0,0),ce=new Ps("GROUP",1,1),fe=new Ps("CLEAR_COLOR",2,2),de=new Ps("CLEAR",3,3),me=new Ps("VIGNETTE",4,4),_e=new Ps("DRAW_MESH",5,5),ge=new Ps("BLURRED_PASS",6,6),pe=new Ps("DRAW_BLURRED",7,7),Ee=new Ps("RENDER_PASS",8,8),we=new Ps("MAIN_PASS",9,9),ve=new Ps("CUSTOM",10,10)}function Ps(t,e,n){Ye.call(this,t,e),this.value=n}function ks(){return Us(),le}function Hs(){return Us(),ce}function Gs(){return Us(),fe}function zs(){return Us(),de}function Vs(){return Us(),me}function js(){return Us(),_e}function Ws(){return Us(),ge}function Xs(){return Us(),pe}function Ys(){return Us(),Ee}function qs(){return Us(),we}function Zs(){return Us(),ve}function Ks(t,e,n,i,r){this.shader=t,this.blending=e,this.depthMode=n,this.culling=i,this.vertexAttributes=r}function Js(t,e,n){Is.call(this),this.mesh=t,this.uniforms=e,this.state=n,this.n9_1=js(),this.hints=tn()}function Qs(t,e,n,i,r,s,o,a){r=r===Qe?0:r,s=s===Qe?-1:s,o=o===Qe?-1:o,a=a===Qe?-1:a,Js.call(this,t,e,n),this.tranform=i,this.indexUniformMvp=r,this.indexUniformModel=s,this.indexUniformView=o,this.indexUniformProjection=a}function to(t,e,n){this.j9_1=t,this.k9_1=e,this.l9_1=n}function eo(t,e,n){return io.call(n),n.enabled=t,n.commands=ln(e),n}function no(t,e){return eo(t,e,cn(qe(io)))}function io(){Is.call(this),this.commands=tn()}function ro(){return vo(),Te}function so(){return vo(),be}function oo(){return vo(),Re}function ao(){}function ho(){return[mo(),_o(),go(),po(),Eo(),wo()]}function uo(t){switch(t){case"SHADING_RATE_1X1":return mo();case"SHADING_RATE_1X2":return _o();case"SHADING_RATE_2X1":return go();case"SHADING_RATE_2X2":return po();case"SHADING_RATE_4X2":return Eo();case"SHADING_RATE_4X4":return wo();default:lo(),We("No enum constant value.")}}function lo(){if(Fe)return Xe;Fe=!0,xe=new co("SHADING_RATE_1X1",0,38566),Ce=new co("SHADING_RATE_1X2",1,38567),Se=new co("SHADING_RATE_2X1",2,38568),Me=new co("SHADING_RATE_2X2",3,38569),Ne=new co("SHADING_RATE_4X2",4,38572),ye=new co("SHADING_RATE_4X4",5,38574)}function co(t,e,n){Ye.call(this,t,e),this.value=n}function fo(t){ao.call(this),this.shadingRate=t}function mo(){return lo(),xe}function _o(){return lo(),Ce}function go(){return lo(),Se}function po(){return lo(),Me}function Eo(){return lo(),Ne}function wo(){return lo(),ye}function vo(){Oe||(Oe=!0,Te=new fo(mo()),new fo(_o()),new fo(go()),be=new fo(po()),new fo(Eo()),Re=new fo(wo()))}function Ao(t){return So(t),xo.call(t),t}function To(){return Ao(cn(qe(xo)))}function bo(t,e,n){return No(t,e.slice(),n),xo.call(n),n}function Ro(t,e){return bo(t,e,cn(qe(xo)))}function xo(){this.ye_1=qs()}function Co(){Is.call(this)}function So(t){return io.call(t),Fo.call(t),t}function Mo(){return So(cn(qe(Fo)))}function No(t,e,n){return eo(t,e.slice(),n),Fo.call(n),n}function yo(t,e){return No(t,e,cn(qe(Fo)))}function Fo(){this.ze_1=Ys()}function Oo(){Is.call(this),this.af_1=Vs(),this.color0=new Ko(0,0,0,1),this.color1=new Ko(0,0,0,1)}function $o(){return[Bo(),Uo(),Po(),ko(),Ho(),Go(),zo(),Vo(),jo()]}function Lo(t){switch(t){case"Normal":return Bo();case"Grayscale":return Uo();case"Sepia":return Po();case"HighContrast":return ko();case"LowContrast":return Ho();case"BlackAndWhite":return Go();case"IsolatedColor":return zo();case"Crosshatch":return Vo();case"LimitedColors":return jo();default:Io(),We("No enum constant value.")}}function Io(){if(Ge)return Xe;Ge=!0,$e=new Do("Normal",0),Le=new Do("Grayscale",1),Ie=new Do("Sepia",2),De=new Do("HighContrast",3),Be=new Do("LowContrast",4),Ue=new Do("BlackAndWhite",5),Pe=new Do("IsolatedColor",6),ke=new Do("Crosshatch",7),He=new Do("LimitedColors",8)}function Do(t,e){Ye.call(this,t,e)}function Bo(){return Io(),$e}function Uo(){return Io(),Le}function Po(){return Io(),Ie}function ko(){return Io(),De}function Ho(){return Io(),Be}function Go(){return Io(),Ue}function zo(){return Io(),Pe}function Vo(){return Io(),ke}function jo(){return Io(),He}function Wo(){}function Xo(){Ve=this,this.h7_1=new Float32Array(32),this.i7_1=new Float32Array(16),this.j7_1=new Float32Array(16),this.k7_1=new Float32Array(16),this.l7_1=new Float32Array(4),this.m7_1=new Float32Array(16),this.n7_1=new Float32Array(4)}function Yo(){return null==Ve&&new Xo,Ve}function qo(t,e){this.nf_1=t,this.of_1=e}function Zo(t,e,n){this.yf_1=t,this.zf_1=e,this.ag_1=n}function Ko(t,e,n,i){this.gg_1=t,this.hg_1=e,this.ig_1=n,this.jg_1=i}function Jo(t,e,n){this.pg_1=t,this.qg_1=e,this.rg_1=n}function Qo(){this.sg_1=pn(),this.tg_1=0}function ta(t){var e,n;(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).BackendMode=An,s.BackendMode.values=En,s.BackendMode.valueOf=wn,Ze(s.BackendMode,"OPENGL",Tn),Ze(s.BackendMode,"METAL",bn),(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).BlendingEquation=Mn,s.BlendingEquation.values=xn,s.BlendingEquation.valueOf=Cn,Ze(s.BlendingEquation,"ADD",Ln),Ze(s.BlendingEquation,"SUBTRACT",In),Ze(s.BlendingEquation,"REVERSE_SUBTRACT",Dn),s.BlendingFactor=On,s.BlendingFactor.values=Nn,s.BlendingFactor.valueOf=yn,Ze(s.BlendingFactor,"ZERO",Bn),Ze(s.BlendingFactor,"ONE",Un),Ze(s.BlendingFactor,"SRC_COLOR",Pn),Ze(s.BlendingFactor,"ONE_MINUS_SRC_COLOR",kn),Ze(s.BlendingFactor,"DST_COLOR",Hn),Ze(s.BlendingFactor,"ONE_MINUS_DST_COLOR",Gn),Ze(s.BlendingFactor,"SRC_ALPHA",zn),Ze(s.BlendingFactor,"ONE_MINUS_SRC_ALPHA",Vn),Ze(s.BlendingFactor,"DST_ALPHA",jn),Ze(s.BlendingFactor,"ONE_MINUS_DST_ALPHA",Wn),Ze(s.BlendingFactor,"CONSTANT_COLOR",Xn),Ze(s.BlendingFactor,"ONE_MINUS_CONSTANT_COLOR",Yn),Ze(s.BlendingFactor,"CONSTANT_ALPHA",qn),Ze(s.BlendingFactor,"ONE_MINUS_CONSTANT_ALPHA",Zn),Ze(s.BlendingFactor,"SRC_ALPHA_SATURATE",Kn),s.Blending=$n,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).CullFace=ni,s.CullFace.values=Qn,s.CullFace.valueOf=ti,Ze(s.CullFace,"FRONT",ii),Ze(s.CullFace,"BACK",ri),Ze(s.CullFace,"FRONT_AND_BACK",si),Ze(s.CullFace,"DISABLED",oi),(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).DepthMode=ui,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).Mesh=ci,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).Scene=di,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).Shader=mi,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).TextureFiltering=Ei,s.TextureFiltering.values=_i,s.TextureFiltering.valueOf=gi,Ze(s.TextureFiltering,"NEAREST",Mi),Ze(s.TextureFiltering,"LINEAR",Ni),Ze(s.TextureFiltering,"NEAREST_MIPMAP_NEAREST",yi),Ze(s.TextureFiltering,"LINEAR_MIPMAP_NEAREST",Fi),Ze(s.TextureFiltering,"NEAREST_MIPMAP_LINEAR",Oi),Ze(s.TextureFiltering,"LINEAR_MIPMAP_LINEAR",$i),s.TextureWrapping=Ti,s.TextureWrapping.values=wi,s.TextureWrapping.valueOf=vi,Ze(s.TextureWrapping,"CLAMP_TO_EDGE",Li),Ze(s.TextureWrapping,"MIRRORED_REPEAT",Ii),Ze(s.TextureWrapping,"REPEAT",Di),s.TextureFormat=Ci,s.TextureFormat.values=bi,s.TextureFormat.valueOf=Ri,Ze(s.TextureFormat,"RGBA8",Bi),Ze(s.TextureFormat,"RGB8",Ui),Ze(s.TextureFormat,"RGB16F",Pi),Ze(s.TextureFormat,"RGB32F",ki),Ze(s.TextureFormat,"RGBA16F",Hi),Ze(s.TextureFormat,"RGBA32F",Gi),Ze(s.TextureFormat,"ASTC",zi),s.Texture=Si,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).UniformValue=Vi,s.UniformFloatValue=ji,s.UniformIntValue=Wi,s.UniformTextureValue=Xi,(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).VertexFormat=er,s.VertexFormat.values=Ji,s.VertexFormat.valueOf=Qi,Ze(s.VertexFormat,"UBYTE",rr),Ze(s.VertexFormat,"UBYTE2",sr),Ze(s.VertexFormat,"UBYTE3",or),Ze(s.VertexFormat,"UBYTE4",ar),Ze(s.VertexFormat,"BYTE",hr),Ze(s.VertexFormat,"BYTE2",ur),Ze(s.VertexFormat,"BYTE3",lr),Ze(s.VertexFormat,"BYTE4",cr),Ze(s.VertexFormat,"UBYTE_NORMALIZED",fr),Ze(s.VertexFormat,"UBYTE2_NORMALIZED",dr),Ze(s.VertexFormat,"UBYTE3_NORMALIZED",mr),Ze(s.VertexFormat,"UBYTE4_NORMALIZED",_r),Ze(s.VertexFormat,"BYTE_NORMALIZED",gr),Ze(s.VertexFormat,"BYTE2_NORMALIZED",pr),Ze(s.VertexFormat,"BYTE3_NORMALIZED",Er),Ze(s.VertexFormat,"BYTE4_NORMALIZED",wr),Ze(s.VertexFormat,"USHORT",vr),Ze(s.VertexFormat,"USHORT2",Ar),Ze(s.VertexFormat,"USHORT3",Tr),Ze(s.VertexFormat,"USHORT4",br),Ze(s.VertexFormat,"SHORT",Rr),Ze(s.VertexFormat,"SHORT2",xr),Ze(s.VertexFormat,"SHORT3",Cr),Ze(s.VertexFormat,"SHORT4",Sr),Ze(s.VertexFormat,"USHORT_NORMALIZED",Mr),Ze(s.VertexFormat,"USHORT2_NORMALIZED",Nr),Ze(s.VertexFormat,"USHORT3_NORMALIZED",yr),Ze(s.VertexFormat,"USHORT4_NORMALIZED",Fr),Ze(s.VertexFormat,"SHORT_NORMALIZED",Or),Ze(s.VertexFormat,"SHORT2_NORMALIZED",$r),Ze(s.VertexFormat,"SHORT3_NORMALIZED",Lr),Ze(s.VertexFormat,"SHORT4_NORMALIZED",Ir),Ze(s.VertexFormat,"HALF",Dr),Ze(s.VertexFormat,"HALF2",Br),Ze(s.VertexFormat,"HALF3",Ur),Ze(s.VertexFormat,"HALF4",Pr),Ze(s.VertexFormat,"FLOAT",kr),Ze(s.VertexFormat,"FLOAT2",Hr),Ze(s.VertexFormat,"FLOAT3",Gr),Ze(s.VertexFormat,"FLOAT4",zr),Ze(s.VertexFormat,"UINT",Vr),Ze(s.VertexFormat,"UINT2",jr),Ze(s.VertexFormat,"UINT3",Wr),Ze(s.VertexFormat,"UINT4",Xr),Ze(s.VertexFormat,"INT",Yr),Ze(s.VertexFormat,"INT2",qr),Ze(s.VertexFormat,"INT3",Zr),Ze(s.VertexFormat,"INT4",Kr),Ze(s.VertexFormat,"INT_1010102_NORMALIZED",Jr),Ze(s.VertexFormat,"UINT_1010102_NORMALIZED",Qr),s.VertexAttribute=nr,s.VertexAttributesDescriptor=ir,(e=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).camera||(s.camera={})).CameraPathAnimator=ns,(e=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).camera||(s.camera={})).CameraPositionInterpolator=hs,Ze(e.CameraPositionInterpolator,"Companion",as),(e=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).camera||(s.camera={})).CameraState=ds,e.CameraState.values=ls,e.CameraState.valueOf=cs,Ze(e.CameraState,"ANIMATING",ms),Ze(e.CameraState,"TRANSITIONING",_s),(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).BlurSize=ws,n.BlurSize.values=gs,n.BlurSize.valueOf=ps,Ze(n.BlurSize,"KERNEL_5",Ts),Ze(n.BlurSize,"KERNEL_4",bs),Ze(n.BlurSize,"KERNEL_3",Rs),Ze(n.BlurSize,"KERNEL_2",xs),n.BlurredPassCommand=vs,n.DrawBlurredCommand=As,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).ClearColorCommand=Cs,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).ClearCommandClearType=ys,n.ClearCommandClearType.values=Ss,n.ClearCommandClearType.valueOf=Ms,Ze(n.ClearCommandClearType,"COLOR",Os),Ze(n.ClearCommandClearType,"DEPTH",$s),Ze(n.ClearCommandClearType,"COLOR_AND_DEPTH",Ls),n.ClearCommand=Fs,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).Command=Is,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).CommandType=Ps,n.CommandType.values=Ds,n.CommandType.valueOf=Bs,Ze(n.CommandType,"NOOP",ks),Ze(n.CommandType,"GROUP",Hs),Ze(n.CommandType,"CLEAR_COLOR",Gs),Ze(n.CommandType,"CLEAR",zs),Ze(n.CommandType,"VIGNETTE",Vs),Ze(n.CommandType,"DRAW_MESH",js),Ze(n.CommandType,"BLURRED_PASS",Ws),Ze(n.CommandType,"DRAW_BLURRED",Xs),Ze(n.CommandType,"RENDER_PASS",Ys),Ze(n.CommandType,"MAIN_PASS",qs),Ze(n.CommandType,"CUSTOM",Zs),(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).DrawMeshState=Ks,n.DrawMeshCommand=Js,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).DrawTransformedMeshCommand=Qs,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).GroupCommand=io,n.GroupCommand.GroupCommandArr=no,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).Hint=ao,n.ShadingRate=co,n.ShadingRate.values=ho,n.ShadingRate.valueOf=uo,Ze(n.ShadingRate,"SHADING_RATE_1X1",mo),Ze(n.ShadingRate,"SHADING_RATE_1X2",_o),Ze(n.ShadingRate,"SHADING_RATE_2X1",go),Ze(n.ShadingRate,"SHADING_RATE_2X2",po),Ze(n.ShadingRate,"SHADING_RATE_4X2",Eo),Ze(n.ShadingRate,"SHADING_RATE_4X4",wo),n.VrsHint=fo,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).MainPassCommand=xo,n.MainPassCommand.MainPassCommandConstructor=To,n.MainPassCommand.MainPassCommandArr=Ro,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).NoopCommand=Co,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).RenderPassCommand=Fo,n.RenderPassCommand.RenderPassCommandConstructor=Mo,n.RenderPassCommand.RenderPassCommandArr=yo,(n=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).commands||(s.commands={})).VignetteCommand=Oo;var i,r,s,o=(s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).common||(s.common={});o.ColorMode=Do,o.ColorMode.values=$o,o.ColorMode.valueOf=Lo,Ze(o.ColorMode,"Normal",Bo),Ze(o.ColorMode,"Grayscale",Uo),Ze(o.ColorMode,"Sepia",Po),Ze(o.ColorMode,"HighContrast",ko),Ze(o.ColorMode,"LowContrast",Ho),Ze(o.ColorMode,"BlackAndWhite",Go),Ze(o.ColorMode,"IsolatedColor",zo),Ze(o.ColorMode,"Crosshatch",Vo),Ze(o.ColorMode,"LimitedColors",jo),((s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).math||(s.math={})).Vec2=qo,((s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).math||(s.math={})).Vec3=Zo,((s=(r=(i=t.org||(t.org={})).androidworks||(i.androidworks={})).engine||(r.engine={})).math||(s.math={})).Vec4=Ko}Je(An,"BackendMode",Ke,Ye),Je(Mn,"BlendingEquation",Ke,Ye),Je(On,"BlendingFactor",Ke,Ye),Je($n,"Blending",Ke,Qe,Qe,$n),Je(ni,"CullFace",Ke,Ye),Je(ui,"DepthMode",Ke,Qe,Qe,ui),Je(ci,"Mesh",Ke,Qe,Qe,ci),Je(di,"Scene",Ke),Je(mi,"Shader",Ke,Qe,Qe,mi),Je(Ei,"TextureFiltering",Ke,Ye),Je(Ti,"TextureWrapping",Ke,Ye),Je(Ci,"TextureFormat",Ke,Ye),Je(Si,"Texture",Ke,Qe,Qe,Si),Je(Vi,"UniformValue",Ke,Qe,Qe,Vi),Je(ji,"UniformFloatValue",Ke,Vi),Je(Wi,"UniformIntValue",Ke,Vi),Je(Xi,"UniformTextureValue",Ke,Vi),Je(er,"VertexFormat",Ke,Ye),Je(nr,"VertexAttribute",Ke),Je(ir,"VertexAttributesDescriptor",Ke),Je(ts,"TextureAnimationChunked",Ke),Je(ns,"CameraPathAnimator",Ke),Je(is,"CameraPosition",Ke),Je(os,"Companion",un),Je(hs,"CameraPositionInterpolator",Ke,Qe,Qe,hs),Je(us,"CameraPositionPair",Ke),Je(ds,"CameraState",Ke,Ye),Je(ws,"BlurSize",Ke,Ye),Je(Is,"Command",Ke),Je(io,"GroupCommand",Ke,Is,Qe,io),Je(Fo,"RenderPassCommand",Ke,io,Qe,Mo),Je(vs,"BlurredPassCommand",Ke,Fo,Qe,vs),Je(As,"DrawBlurredCommand",Ke,Is,Qe,As),Je(Cs,"ClearColorCommand",Ke,Is,Qe,Cs),Je(ys,"ClearCommandClearType",Ke,Ye),Je(Fs,"ClearCommand",Ke,Is,Qe,Fs),Je(Ps,"CommandType",Ke,Ye),Je(Ks,"DrawMeshState",Ke),Je(Js,"DrawMeshCommand",Ke,Is),Je(Qs,"DrawTransformedMeshCommand",Ke,Js),Je(to,"AffineTranformation",Ke),Je(ao,"Hint",Ke),Je(co,"ShadingRate",Ke,Ye),Je(fo,"VrsHint",Ke,ao),Je(xo,"MainPassCommand",Ke,Fo,Qe,To),Je(Co,"NoopCommand",Ke,Is,Qe,Co),Je(Oo,"VignetteCommand",Ke,Is,Qe,Oo),Je(Do,"ColorMode",Ke,Ye),Je(Wo,"MathUtils",un),Je(Xo,"Matrix",un),Je(qo,"Vec2",Ke),Je(Zo,"Vec3",Ke),Je(Ko,"Vec4",Ke),Je(Jo,"TimerParams",Ke),Je(Qo,"TimersMap",Ke,Qe,Qe,Qo),qe($n).e6=function(t){this.enabled=t},qe($n).f6=function(){return this.enabled},qe($n).g6=function(t){this.isSeparateAlpha=t},qe($n).h6=function(){return this.isSeparateAlpha},qe($n).i6=function(t){this.equationAlpha=t},qe($n).j6=function(){return this.equationAlpha},qe($n).k6=function(t){this.equationColor=t},qe($n).l6=function(){return this.equationColor},qe($n).m6=function(t){this.sourceFactorAlpha=t},qe($n).n6=function(){return this.sourceFactorAlpha},qe($n).o6=function(t){this.destinationFactorAlpha=t},qe($n).p6=function(){return this.destinationFactorAlpha},qe($n).q6=function(t){this.sourceFactorColor=t},qe($n).r6=function(){return this.sourceFactorColor},qe($n).s6=function(t){this.destinationFactorColor=t},qe($n).t6=function(){return this.destinationFactorColor},qe(ui).w6=function(t){this.depthTest=t},qe(ui).x6=function(){return this.depthTest},qe(ui).y6=function(t){this.depthWrite=t},qe(ui).z6=function(){return this.depthWrite},qe(ci).a7=function(t){this.name=t},qe(ci).c4=function(){return this.name},qe(ci).b7=function(t){this.id=t},qe(ci).c7=function(){return this.id},qe(ci).d7=function(t){this.fileName=t},qe(ci).e7=function(){return this.fileName},qe(ci).f7=function(t){this.loaded=t},qe(ci).g7=function(){return this.loaded},qe(di).u7=function(t){this.lastFrameTime=t},qe(di).v7=function(){return this.lastFrameTime},qe(di).w7=function(t){this.viewportWidth=t},qe(di).x7=function(){return this.viewportWidth},qe(di).y7=function(t){this.viewportHeight=t},qe(di).z7=function(){return this.viewportHeight},qe(di).a8=function(){return this.matView},qe(di).b8=function(t){this.useExternalViewMatrix=t},qe(di).c8=function(){return this.useExternalViewMatrix},qe(di).d8=function(){return this.matProjection},qe(di).e8=function(){return this.matModel},qe(di).f8=function(){return this.matMVP},qe(di).g8=function(t){this.zoom=t},qe(di).h8=function(){return this.zoom},qe(di).i8=function(t){this.ZOOM_FOV=t},qe(di).j8=function(){return this.ZOOM_FOV},qe(di).k8=function(t){this.FOV_LANDSCAPE=t},qe(di).l8=function(){return this.FOV_LANDSCAPE},qe(di).m8=function(t){this.FOV_PORTRAIT=t},qe(di).n8=function(){return this.FOV_PORTRAIT},qe(di).o8=function(t){this.Z_NEAR=t},qe(di).p8=function(){return this.Z_NEAR},qe(di).q8=function(t){this.Z_FAR=t},qe(di).r8=function(){return this.Z_FAR},qe(di).s8=function(t){this.backendMode=t},qe(di).t8=function(){return this.backendMode},qe(di).f7=function(t){this.p7_1=t},qe(di).g7=function(){return this.p7_1},qe(di).u8=function(t){this.q7_1=t},qe(di).v8=function(){return this.q7_1},qe(di).w8=function(t){this.r7_1=t},qe(di).x8=function(){return this.r7_1},qe(di).y8=function(t){this.s7_1=t},qe(di).z8=function(){return this.s7_1},qe(di).a9=function(t){this.t7_1=t},qe(di).b9=function(){return this.t7_1},qe(di).updateTimers=function(t){this.lastFrameTime=t},qe(di).updateViewportSize=function(t,e){this.viewportWidth=t,this.viewportHeight=e},qe(di).c9=function(t,e,n){var i=n>0?e/n:1,r=e>=n?this.FOV_LANDSCAPE*t:this.FOV_PORTRAIT*t;if(r+=this.zoom*this.ZOOM_FOV,fi(this,this.matProjection,r,i,this.Z_NEAR,this.Z_FAR),this.backendMode.equals(bn())){var s=this.Z_FAR/(this.Z_NEAR-this.Z_FAR);this.matProjection[10]=s,this.matProjection[14]=s*this.Z_NEAR}},qe(di).calculateProjection=function(t,e,n,i){return t=t===Qe?1:t,e=e===Qe?this.viewportWidth:e,n=n===Qe?this.viewportHeight:n,this.c9(t,e,n)},qe(di).calculateMVPMatrix=function(t,e,n,i,r,s,o,a,h){Yo().d9(this.matModel,0),Yo().e9(this.matModel,0,0,1,0,0),Yo().f9(this.matModel,0,0,0,1,0),Yo().g9(this.matModel,0,t,e,n),Yo().h9(this.matModel,0,o,a,h),Yo().f9(this.matModel,0,i,1,0,0),Yo().f9(this.matModel,0,r,0,1,0),Yo().f9(this.matModel,0,s,0,0,1),Yo().i9(this.matMVP,0,this.matView,0,this.matModel,0),Yo().i9(this.matMVP,0,this.matProjection,0,this.matMVP,0)},qe(di).setMvpUniform=function(t,e,n,i,r,s,o,a,h,u){this.calculateMVPMatrix(e,n,i,r,s,o,a,h,u),Yi(t,this.matMVP)},qe(di).updateMeshTransformations=function(t){for(var e=t.h();e.o();){var n=e.p();n.enabled&&(n instanceof io&&this.updateMeshTransformations(n.commands),n instanceof Qs&&(this.calculateMVPMatrix(n.tranform.j9_1.x,n.tranform.j9_1.y,n.tranform.j9_1.z,n.tranform.k9_1.x,n.tranform.k9_1.y,n.tranform.k9_1.z,n.tranform.l9_1.x,n.tranform.l9_1.y,n.tranform.l9_1.z),n.indexUniformMvp>=0&&Yi(n.uniforms.q(n.indexUniformMvp),this.matMVP),n.indexUniformModel>=0&&Yi(n.uniforms.q(n.indexUniformModel),this.matModel),n.indexUniformView>=0&&Yi(n.uniforms.q(n.indexUniformView),this.matView),n.indexUniformProjection>=0&&Yi(n.uniforms.q(n.indexUniformProjection),this.matProjection)))}},qe(mi).a7=function(t){this.name=t},qe(mi).c4=function(){return this.name},qe(mi).b7=function(t){this.id=t},qe(mi).c7=function(){return this.id},qe(Si).a7=function(t){this.name=t},qe(Si).c4=function(){return this.name},qe(Si).d7=function(t){this.fileName=t},qe(Si).e7=function(){return this.fileName},qe(Si).b7=function(t){this.id=t},qe(Si).c7=function(){return this.id},qe(Si).f7=function(t){this.loaded=t},qe(Si).g7=function(){return this.loaded},qe(Si).u9=function(t){this.width=t},qe(Si).v9=function(){return this.width},qe(Si).w9=function(t){this.height=t},qe(Si).x9=function(){return this.height},qe(Si).y9=function(t){this.minFilter=t},qe(Si).z9=function(){return this.minFilter},qe(Si).aa=function(t){this.magFilter=t},qe(Si).ba=function(){return this.magFilter},qe(Si).ca=function(t){this.wrapping=t},qe(Si).da=function(){return this.wrapping},qe(Si).ea=function(t){this.mipmaps=t},qe(Si).fa=function(){return this.mipmaps},qe(Si).ga=function(t){this.format=t},qe(Si).ha=function(){return this.format},qe(Si).ia=function(t){this.anisotropy=t},qe(Si).ja=function(){return this.anisotropy},qe(ji).ka=function(t){this.value=t},qe(ji).k2=function(){return this.value},qe(Wi).la=function(t){this.value=t},qe(Wi).k2=function(){return this.value},qe(Xi).ma=function(t){this.value=t},qe(Xi).k2=function(){return this.value},qe(nr).pa=function(){return this.index},qe(nr).ha=function(){return this.format},qe(nr).qa=function(){return this.offset},qe(nr).g5=function(){return this.index},qe(nr).h5=function(){return this.format},qe(nr).ra=function(){return this.offset},qe(nr).sa=function(t,e,n){return new nr(t,e,n)},qe(nr).copy=function(t,e,n,i){return t=t===Qe?this.index:t,e=e===Qe?this.format:e,n=n===Qe?this.offset:n,this.sa(t,e,n)},qe(nr).toString=function(){return"VertexAttribute(index="+this.index+", format="+this.format+", offset="+this.offset+")"},qe(nr).hashCode=function(){var t=this.index;return t=je(t,31)+this.format.hashCode()|0,t=je(t,31)+this.offset|0},qe(nr).equals=function(t){if(this===t)return!0;if(!(t instanceof nr))return!1;var e=t instanceof nr?t:en();return this.index===e.index&&!!this.format.equals(e.format)&&this.offset===e.offset},qe(ir).ta=function(){return this.attributes},qe(ir).ua=function(){return this.stride},qe(ir).g5=function(){return this.attributes},qe(ir).h5=function(){return this.stride},qe(ir).va=function(t,e){return new ir(t,e)},qe(ir).copy=function(t,e,n){return t=t===Qe?this.attributes:t,e=e===Qe?this.stride:e,this.va(t,e)},qe(ir).toString=function(){return"VertexAttributesDescriptor(attributes="+this.attributes+", stride="+this.stride+")"},qe(ir).hashCode=function(){var t=rn(this.attributes);return t=je(t,31)+this.stride|0},qe(ir).equals=function(t){if(this===t)return!0;if(!(t instanceof ir))return!1;var e=t instanceof ir?t:en();return!!sn(this.attributes,e.attributes)&&this.stride===e.stride},qe(ts).db=function(t){var e=t<.5?2*t:2*(1-t);return this.ab_1*e*(this.xa_1-1|0)+this.za_1},qe(ns).sb=function(t){this.speed=t},qe(ns).tb=function(){return this.speed},qe(ns).ub=function(t){this.minDuration=t},qe(ns).vb=function(){return this.minDuration},qe(ns).wb=function(t){this.transitionDuration=t},qe(ns).xb=function(){return this.transitionDuration},qe(ns).e6=function(t){this.enabled=t},qe(ns).f6=function(){return this.enabled},qe(ns).yb=function(t){this.jb_1=t,es(this)},qe(ns).zb=function(){return this.jb_1},qe(ns).enable=function(){this.enabled=!0},qe(ns).disable=function(){this.enabled=!1},qe(ns).ac=function(){return this.eb_1},qe(ns).bc=function(){return this.eb_1.timer},qe(ns).cc=function(){return this.hb_1},qe(ns).dc=function(t,e){this.ib_1=t,this.gb_1=0,es(this),e&&this.randomCamera()},qe(ns).setCameras=function(t,e,n){return e=e!==Qe&&e,this.dc(t,e)},qe(ns).ec=function(){return this.ib_1[this.gb_1]},qe(ns).nextCamera=function(){if(!this.enabled)return Xe;this.setCameraState(_s())},qe(ns).randomCamera=function(){this.gb_1=ze.fc(this.ib_1.length,this.gb_1),es(this)},qe(ns).setCameraState=function(t){if(this.hb_1===ms()&&t===_s()){this.gb_1=this.gb_1+1|0,this.gb_1=this.gb_1%this.ib_1.length|0;var e=this.ib_1[this.gb_1];this.eb_1.setMinDuration(this.transitionDuration),this.eb_1.setPosition(new us(new is(new Zo(this.eb_1.cameraPosition.x,this.eb_1.cameraPosition.y,this.eb_1.cameraPosition.z),new Zo(this.eb_1.cameraRotation.x,this.eb_1.cameraRotation.y,this.eb_1.cameraRotation.z)),new is(new Zo((e.jc_1.gc_1.x-e.ic_1.gc_1.x)/2+e.ic_1.gc_1.x,(e.jc_1.gc_1.y-e.ic_1.gc_1.y)/2+e.ic_1.gc_1.y,(e.jc_1.gc_1.z-e.ic_1.gc_1.z)/2+e.ic_1.gc_1.z),new Zo((e.jc_1.hc_1.x-e.ic_1.hc_1.x)/2+e.ic_1.hc_1.x,(e.jc_1.hc_1.y-e.ic_1.hc_1.y)/2+e.ic_1.hc_1.y,(e.jc_1.hc_1.z-e.ic_1.hc_1.z)/2+e.ic_1.hc_1.z)))),this.fb_1=this.eb_1.reverse,this.eb_1.reverse=!1,this.eb_1.reset()}else this.hb_1===_s()&&t===ms()&&(es(this),this.eb_1.reverse=this.fb_1,this.eb_1.setTimer(.5));this.hb_1=t},qe(ns).animate=function(t){0!==this.kb_1&&(this.eb_1.iterate(t),1===this.eb_1.timer&&(this.hb_1===ms()?(this.eb_1.reverse=!this.eb_1.reverse,this.eb_1.reset()):this.setCameraState(ms()))),this.kb_1=t},qe(ns).changeDirection=function(t){if(this.hb_1===_s())return Xe;var e=this.eb_1.reverse;t<0?e&&(this.eb_1.reverse=!1,this.eb_1.setTimer(1-this.eb_1.timer)):e||(this.eb_1.reverse=!0,this.eb_1.setTimer(1-this.eb_1.timer))},qe(is).toString=function(){return"CameraPosition(position="+this.gc_1+", rotation="+this.hc_1+")"},qe(is).hashCode=function(){var t=this.gc_1.hashCode();return t=je(t,31)+this.hc_1.hashCode()|0},qe(is).equals=function(t){if(this===t)return!0;if(!(t instanceof is))return!1;var e=t instanceof is?t:en();return!!this.gc_1.equals(e.gc_1)&&!!this.hc_1.equals(e.hc_1)},qe(hs).nc=function(t){this.isSmooth=t},qe(hs).oc=function(){return this.isSmooth},qe(hs).sb=function(t){this.speed=t},qe(hs).tb=function(){return this.speed},qe(hs).bc=function(){return this.timer},qe(hs).pc=function(t){this.reverse=t},qe(hs).qc=function(){return this.reverse},qe(hs).rc=function(){return this.matrix},qe(hs).sc=function(){return this.qb_1},qe(hs).tc=function(){return this.rb_1},qe(hs).setMinDuration=function(t){this.nb_1=t},qe(hs).setPosition=function(t){this.lb_1=t;var e=this,n=rs(this)/this.speed,i=this.nb_1;e.mb_1=Math.max(n,i)},qe(hs).setTimer=function(t){this.ob_1=t,this.timer=t,ss(this)},qe(hs).iterate=function(t){if(0!==this.pb_1){var e=t-this.pb_1;this.ob_1=this.ob_1+e/this.mb_1,this.ob_1>1&&(this.ob_1=1)}this.timer=this.ob_1,this.pb_1=t,ss(this)},qe(hs).reset=function(){this.pb_1=0,this.ob_1=0,this.timer=0,ss(this)},qe(ds).k2=function(){return this.value},qe(vs).ad=function(){return this.zc_1},qe(vs).bd=function(t){this.minSize=t},qe(vs).cd=function(){return this.minSize},qe(vs).dd=function(t){this.brightness=t},qe(vs).ed=function(){return this.brightness},qe(vs).fd=function(t){this.blurSize=t},qe(vs).gd=function(){return this.blurSize},qe(vs).b7=function(t){this.id=t},qe(vs).c7=function(){return this.id},qe(As).ad=function(){return this.hd_1},qe(As).jd=function(t){this.blending=t},qe(As).kd=function(){return this.blending},qe(As).b7=function(t){this.id=t},qe(As).c7=function(){return this.id},qe(Cs).ad=function(){return this.ld_1},qe(Cs).md=function(t){this.color=t},qe(Cs).nd=function(){return this.color},qe(Fs).ad=function(){return this.qd_1},qe(Fs).rd=function(t){this.clearType=t},qe(Fs).sd=function(){return this.clearType},qe(Is).e6=function(t){this.enabled=t},qe(Is).f6=function(){return this.enabled},qe(Is).a7=function(t){this.name=t},qe(Is).c4=function(){return this.name},qe(Ps).k2=function(){return this.value},qe(Ks).vd=function(t){this.shader=t},qe(Ks).wd=function(){return this.shader},qe(Ks).jd=function(t){this.blending=t},qe(Ks).kd=function(){return this.blending},qe(Ks).xd=function(t){this.depthMode=t},qe(Ks).yd=function(){return this.depthMode},qe(Ks).zd=function(t){this.culling=t},qe(Ks).ae=function(){return this.culling},qe(Ks).be=function(t){this.vertexAttributes=t},qe(Ks).ce=function(){return this.vertexAttributes},qe(Js).de=function(t){this.mesh=t},qe(Js).ee=function(){return this.mesh},qe(Js).fe=function(t){this.uniforms=t},qe(Js).ge=function(){return this.uniforms},qe(Js).he=function(t){this.state=t},qe(Js).cc=function(){return this.state},qe(Js).ad=function(){return this.n9_1},qe(Js).ie=function(t){this.hints=t},qe(Js).je=function(){return this.hints},qe(Qs).ke=function(t){this.tranform=t},qe(Qs).le=function(){return this.tranform},qe(Qs).me=function(t){this.indexUniformMvp=t},qe(Qs).ne=function(){return this.indexUniformMvp},qe(Qs).oe=function(t){this.indexUniformModel=t},qe(Qs).pe=function(){return this.indexUniformModel},qe(Qs).qe=function(t){this.indexUniformView=t},qe(Qs).re=function(){return this.indexUniformView},qe(Qs).se=function(t){this.indexUniformProjection=t},qe(Qs).te=function(){return this.indexUniformProjection},qe(to).toString=function(){return"AffineTranformation(translation="+this.j9_1+", rotation="+this.k9_1+", scale="+this.l9_1+")"},qe(to).hashCode=function(){var t=this.j9_1.hashCode();return t=je(t,31)+this.k9_1.hashCode()|0,t=je(t,31)+this.l9_1.hashCode()|0},qe(to).equals=function(t){if(this===t)return!0;if(!(t instanceof to))return!1;var e=t instanceof to?t:en();return!!this.j9_1.equals(e.j9_1)&&!!this.k9_1.equals(e.k9_1)&&!!this.l9_1.equals(e.l9_1)},qe(io).ad=function(){return Hs()},qe(io).u8=function(t){this.commands=t},qe(io).v8=function(){return this.commands},qe(co).k2=function(){return this.value},qe(fo).we=function(){return this.shadingRate},qe(xo).ad=function(){return this.ye_1},qe(Co).ad=function(){return ks()},qe(Fo).ad=function(){return this.ze_1},qe(Oo).ad=function(){return this.af_1},qe(Oo).bf=function(t){this.color0=t},qe(Oo).cf=function(){return this.color0},qe(Oo).df=function(t){this.color1=t},qe(Oo).ef=function(){return this.color1},qe(Wo).hf=function(t,e,n){var i=Math.min(t,n);return Math.max(i,e)},qe(Wo).lc=function(t,e,n){var i=this.hf((n-t)/(e-t),0,1);return i*i*(3-2*i)},qe(Wo).fc=function(t,e){return((e+1|0)+on(fn().o5()*(t-2|0))|0)%t|0},qe(Xo).i9=function(t,e,n,i,r,s){this.if(t,e,this.i7_1,0,16),this.if(n,i,this.j7_1,0,16),this.if(r,s,this.k7_1,0,16),this.jf(this.i7_1,this.j7_1,this.k7_1),this.if(this.i7_1,0,t,e,16)},qe(Xo).if=function(t,e,n,i,r){nn(t,n,i,e,e+r|0)},qe(Xo).kf=function(t,e){return e+je(4,t)|0},qe(Xo).jf=function(t,e,n){var i=0;if(i<=3)do{var r=i;i=i+1|0;var s=n[this.kf(r,0)],o=e[this.kf(0,0)]*s,a=e[this.kf(0,1)]*s,h=e[this.kf(0,2)]*s,u=e[this.kf(0,3)]*s,l=1;if(l<=3)do{var c=l;l=l+1|0;var f=n[this.kf(r,c)];o+=e[this.kf(c,0)]*f,a+=e[this.kf(c,1)]*f,h+=e[this.kf(c,2)]*f,u+=e[this.kf(c,3)]*f}while(l<=3);t[this.kf(r,0)]=o,t[this.kf(r,1)]=a,t[this.kf(r,2)]=h,t[this.kf(r,3)]=u}while(i<=3)},qe(Xo).o7=function(t,e,n,i,r,s,o,a){if(n===i)throw mn(dn("left == right"));if(s===r)throw mn(dn("top == bottom"));if(o===a)throw mn(dn("near == far"));if(o<=0)throw mn(dn("near <= 0.0f"));if(a<=0)throw mn(dn("far <= 0.0f"));var h=1/(i-n),u=1/(s-r),l=1/(o-a),c=o*h*2,f=o*u*2,d=(i+n)*h,m=(s+r)*u,_=(a+o)*l,g=a*o*l*2;t[e+0|0]=c,t[e+5|0]=f,t[e+8|0]=d,t[e+9|0]=m,t[e+10|0]=_,t[e+14|0]=g,t[e+11|0]=-1,t[e+1|0]=0,t[e+2|0]=0,t[e+3|0]=0,t[e+4|0]=0,t[e+6|0]=0,t[e+7|0]=0,t[e+12|0]=0,t[e+13|0]=0,t[e+15|0]=0},qe(Xo).lf=function(t,e,n){var i=t*t+e*e+n*n;return Math.sqrt(i)},qe(Xo).d9=function(t,e){var n=0;if(n<=15)do{var i=n;n=n+1|0,t[e+i|0]=0}while(n<=15);for(var r=0;r<16;)t[e+r|0]=1,r=r+5|0},qe(Xo).h9=function(t,e,n,i,r){var s=0;if(s<=3)do{var o=s;s=s+1|0;var a=e+o|0;t[a]=t[a]*n;var h=4+a|0;t[h]=t[h]*i;var u=8+a|0;t[u]=t[u]*r}while(s<=3)},qe(Xo).g9=function(t,e,n,i,r){var s=0;if(s<=3)do{var o=s;s=s+1|0;var a=e+o|0,h=12+a|0;t[h]=t[h]+(t[a]*n+t[4+a|0]*i+t[8+a|0]*r)}while(s<=3)},qe(Xo).f9=function(t,e,n,i,r,s){this.e9(this.h7_1,0,n,i,r,s),this.i9(this.h7_1,16,t,e,this.h7_1,0),this.if(this.h7_1,16,t,e,16)},qe(Xo).e9=function(t,e,n,i,r,s){var o=n,a=i,h=r,u=s;t[e+3|0]=0,t[e+7|0]=0,t[e+11|0]=0,t[e+12|0]=0,t[e+13|0]=0,t[e+14|0]=0,t[e+15|0]=1;var l=o*=_n()/180,c=Math.sin(l),f=o,d=Math.cos(f);if(1===a&&0===h&&0===u)t[e+5|0]=d,t[e+10|0]=d,t[e+6|0]=c,t[e+9|0]=-c,t[e+1|0]=0,t[e+2|0]=0,t[e+4|0]=0,t[e+8|0]=0,t[e+0|0]=1;else if(0===a&&1===h&&0===u)t[e+0|0]=d,t[e+10|0]=d,t[e+8|0]=c,t[e+2|0]=-c,t[e+1|0]=0,t[e+4|0]=0,t[e+6|0]=0,t[e+9|0]=0,t[e+5|0]=1;else if(0===a&&0===h&&1===u)t[e+0|0]=d,t[e+5|0]=d,t[e+1|0]=c,t[e+4|0]=-c,t[e+2|0]=0,t[e+6|0]=0,t[e+8|0]=0,t[e+9|0]=0,t[e+10|0]=1;else{var m=this.lf(a,h,u);if(1!==m){var _=1/m;a*=_,h*=_,u*=_}var g=1-d,p=a*h,E=h*u,w=u*a,v=a*c,A=h*c,T=u*c;t[e+0|0]=a*a*g+d,t[e+4|0]=p*g-T,t[e+8|0]=w*g+A,t[e+1|0]=p*g+T,t[e+5|0]=h*h*g+d,t[e+9|0]=E*g-v,t[e+2|0]=w*g-A,t[e+6|0]=E*g+v,t[e+10|0]=u*u*g+d}},qe(Xo).mf=function(t,e,n,i,r,s,o,a,h,u,l){var c=s-n,f=o-i,d=a-r,m=1/this.lf(c,f,d),_=(f*=m)*l-(d*=m)*u,g=d*h-(c*=m)*l,p=c*u-f*h,E=1/this.lf(_,g,p),w=(g*=E)*d-(p*=E)*f,v=p*c-(_*=E)*d,A=_*f-g*c;t[e+0|0]=_,t[e+1|0]=w,t[e+2|0]=-c,t[e+3|0]=0,t[e+4|0]=g,t[e+5|0]=v,t[e+6|0]=-f,t[e+7|0]=0,t[e+8|0]=p,t[e+9|0]=A,t[e+10|0]=-d,t[e+11|0]=0,t[e+12|0]=0,t[e+13|0]=0,t[e+14|0]=0,t[e+15|0]=1,this.g9(t,e,-n,-i,-r)},qe(qo).pf=function(t){this.nf_1=t},qe(qo).qf=function(){return this.nf_1},qe(qo).rf=function(t){this.nf_1=t},qe(qo).sf=function(){return this.nf_1},qe(qo).tf=function(t){this.of_1=t},qe(qo).uf=function(){return this.of_1},qe(qo).vf=function(t){this.of_1=t},qe(qo).wf=function(){return this.of_1},qe(qo).xf=function(t,e){return new qo(t,e)},qe(qo).copy=function(t,e,n){return t=t===Qe?this.nf_1:t,e=e===Qe?this.of_1:e,this.xf(t,e)},qe(qo).toString=function(){return"Vec2(_x="+this.nf_1+", _y="+this.of_1+")"},qe(qo).hashCode=function(){var t=gn(this.nf_1);return t=je(t,31)+gn(this.of_1)|0},qe(qo).equals=function(t){if(this===t)return!0;if(!(t instanceof qo))return!1;var e=t instanceof qo?t:en();return!!sn(this.nf_1,e.nf_1)&&!!sn(this.of_1,e.of_1)},qe(Zo).pf=function(t){this.yf_1=t},qe(Zo).qf=function(){return this.yf_1},qe(Zo).rf=function(t){this.yf_1=t},qe(Zo).sf=function(){return this.yf_1},qe(Zo).tf=function(t){this.zf_1=t},qe(Zo).uf=function(){return this.zf_1},qe(Zo).vf=function(t){this.zf_1=t},qe(Zo).wf=function(){return this.zf_1},qe(Zo).bg=function(t){this.ag_1=t},qe(Zo).cg=function(){return this.ag_1},qe(Zo).dg=function(t){this.ag_1=t},qe(Zo).eg=function(){return this.ag_1},qe(Zo).fg=function(t,e,n){return new Zo(t,e,n)},qe(Zo).copy=function(t,e,n,i){return t=t===Qe?this.yf_1:t,e=e===Qe?this.zf_1:e,n=n===Qe?this.ag_1:n,this.fg(t,e,n)},qe(Zo).toString=function(){return"Vec3(_x="+this.yf_1+", _y="+this.zf_1+", _z="+this.ag_1+")"},qe(Zo).hashCode=function(){var t=gn(this.yf_1);return t=je(t,31)+gn(this.zf_1)|0,t=je(t,31)+gn(this.ag_1)|0},qe(Zo).equals=function(t){if(this===t)return!0;if(!(t instanceof Zo))return!1;var e=t instanceof Zo?t:en();return!!sn(this.yf_1,e.yf_1)&&!!sn(this.zf_1,e.zf_1)&&!!sn(this.ag_1,e.ag_1)},qe(Ko).pf=function(t){this.gg_1=t},qe(Ko).qf=function(){return this.gg_1},qe(Ko).rf=function(t){this.gg_1=t},qe(Ko).sf=function(){return this.gg_1},qe(Ko).tf=function(t){this.hg_1=t},qe(Ko).uf=function(){return this.hg_1},qe(Ko).vf=function(t){this.hg_1=t},qe(Ko).wf=function(){return this.hg_1},qe(Ko).bg=function(t){this.ig_1=t},qe(Ko).cg=function(){return this.ig_1},qe(Ko).dg=function(t){this.ig_1=t},qe(Ko).eg=function(){return this.ig_1},qe(Ko).kg=function(t){this.jg_1=t},qe(Ko).lg=function(){return this.jg_1},qe(Ko).mg=function(t){this.jg_1=t},qe(Ko).ng=function(){return this.jg_1},qe(Ko).og=function(t,e,n,i){return new Ko(t,e,n,i)},qe(Ko).copy=function(t,e,n,i,r){return t=t===Qe?this.gg_1:t,e=e===Qe?this.hg_1:e,n=n===Qe?this.ig_1:n,i=i===Qe?this.jg_1:i,this.og(t,e,n,i)},qe(Ko).toString=function(){return"Vec4(_x="+this.gg_1+", _y="+this.hg_1+", _z="+this.ig_1+", _w="+this.jg_1+")"},qe(Ko).hashCode=function(){var t=gn(this.gg_1);return t=je(t,31)+gn(this.hg_1)|0,t=je(t,31)+gn(this.ig_1)|0,t=je(t,31)+gn(this.jg_1)|0},qe(Ko).equals=function(t){if(this===t)return!0;if(!(t instanceof Ko))return!1;var e=t instanceof Ko?t:en();return!!(sn(this.gg_1,e.gg_1)&&sn(this.hg_1,e.hg_1)&&sn(this.ig_1,e.ig_1)&&sn(this.jg_1,e.jg_1))},qe(Qo).ug=function(t,e){this.sg_1.c1(t,new Jo(0,e,!0))},qe(Qo).vg=function(t){var e=this.sg_1.i1(t);if(null==e)throw an("Timer not found");return e.pg_1},qe(Qo).wg=function(t){for(var e=this.sg_1.b1().h();e.o();){var n=e.p(),i=(t-this.tg_1)/n.qg_1;n.pg_1=n.pg_1+i,n.rg_1?n.pg_1=n.pg_1%1:n.pg_1>1&&(n.pg_1=1)}this.tg_1=t},Ze(qe(An),"name",qe(An).c4),Ze(qe(An),"ordinal",qe(An).d4),Ze(qe(Mn),"name",qe(Mn).c4),Ze(qe(Mn),"ordinal",qe(Mn).d4),Ze(qe(On),"name",qe(On).c4),Ze(qe(On),"ordinal",qe(On).d4),Ze(qe(ni),"name",qe(ni).c4),Ze(qe(ni),"ordinal",qe(ni).d4),Ze(qe(di),"loaded",qe(di).g7,qe(di).f7),Ze(qe(di),"commands",(function(){return this.v8()}),(function(t){this.u8(t)})),Ze(qe(di),"meshes",(function(){return this.x8()}),(function(t){this.w8(t)})),Ze(qe(di),"textures",(function(){return this.z8()}),(function(t){this.y8(t)})),Ze(qe(di),"shaders",(function(){return this.b9()}),(function(t){this.a9(t)})),Ze(qe(Ei),"name",qe(Ei).c4),Ze(qe(Ei),"ordinal",qe(Ei).d4),Ze(qe(Ti),"name",qe(Ti).c4),Ze(qe(Ti),"ordinal",qe(Ti).d4),Ze(qe(Ci),"name",qe(Ci).c4),Ze(qe(Ci),"ordinal",qe(Ci).d4),Ze(qe(er),"name",qe(er).c4),Ze(qe(er),"ordinal",qe(er).d4),Ze(qe(ns),"minDurationCoefficient",qe(ns).zb,qe(ns).yb),Ze(qe(ns),"positionInterpolator",qe(ns).ac),Ze(qe(ns),"timer",qe(ns).bc),Ze(qe(ns),"state",qe(ns).cc),Ze(qe(ns),"currentCameraPair",qe(ns).ec),Ze(qe(hs),"cameraPosition",qe(hs).sc),Ze(qe(hs),"cameraRotation",qe(hs).tc),Ze(qe(ds),"name",qe(ds).c4),Ze(qe(ds),"ordinal",qe(ds).d4),Ze(qe(ws),"name",qe(ws).c4),Ze(qe(ws),"ordinal",qe(ws).d4),Ze(qe(Is),"type",(function(){return this.ad()})),Ze(qe(ys),"name",qe(ys).c4),Ze(qe(ys),"ordinal",qe(ys).d4),Ze(qe(Ps),"name",qe(Ps).c4),Ze(qe(Ps),"ordinal",qe(Ps).d4),Ze(qe(co),"name",qe(co).c4),Ze(qe(co),"ordinal",qe(co).d4),Ze(qe(Do),"name",qe(Do).c4),Ze(qe(Do),"ordinal",qe(Do).d4),Ze(qe(qo),"x",qe(qo).qf,qe(qo).pf),Ze(qe(qo),"r",qe(qo).sf,qe(qo).rf),Ze(qe(qo),"y",qe(qo).uf,qe(qo).tf),Ze(qe(qo),"g",qe(qo).wf,qe(qo).vf),Ze(qe(Zo),"x",qe(Zo).qf,qe(Zo).pf),Ze(qe(Zo),"r",qe(Zo).sf,qe(Zo).rf),Ze(qe(Zo),"y",qe(Zo).uf,qe(Zo).tf),Ze(qe(Zo),"g",qe(Zo).wf,qe(Zo).vf),Ze(qe(Zo),"z",qe(Zo).cg,qe(Zo).bg),Ze(qe(Zo),"b",qe(Zo).eg,qe(Zo).dg),Ze(qe(Ko),"x",qe(Ko).qf,qe(Ko).pf),Ze(qe(Ko),"r",qe(Ko).sf,qe(Ko).rf),Ze(qe(Ko),"y",qe(Ko).uf,qe(Ko).tf),Ze(qe(Ko),"g",qe(Ko).wf,qe(Ko).vf),Ze(qe(Ko),"z",qe(Ko).cg,qe(Ko).bg),Ze(qe(Ko),"b",qe(Ko).eg,qe(Ko).dg),Ze(qe(Ko),"w",qe(Ko).lg,qe(Ko).kg),Ze(qe(Ko),"a",qe(Ko).ng,qe(Ko).mg),Kt=new os,ze=new Wo,ta(t),t.$jsExportAll$=ta,t.$_$=t.$_$||{},t.$_$.a=_s,t.$_$.b=Rs,t.$_$.c=Ts,t.$_$.d=Ls,t.$_$.e=Zs,t.$_$.f=Bo,t.$_$.g=Po,t.$_$.h=Ln,t.$_$.i=Un,t.$_$.j=ri,t.$_$.k=$i,t.$_$.l=Mi,t.$_$.m=zi,t.$_$.n=Hi,t.$_$.o=Li,t.$_$.p=Hr,t.$_$.q=Gr,t.$_$.r=zr,t.$_$.s=Br,t.$_$.t=Ur,t.$_$.u=no,t.$_$.v=Ro,t.$_$.w=Yo,t.$_$.x=ts,t.$_$.y=ns,t.$_$.z=us,t.$_$.a1=is,t.$_$.b1=to,t.$_$.c1=vs,t.$_$.d1=Cs,t.$_$.e1=Fs,t.$_$.f1=Is,t.$_$.g1=As,t.$_$.h1=Js,t.$_$.i1=Ks,t.$_$.j1=Qs,t.$_$.k1=io,t.$_$.l1=so,t.$_$.m1=oo,t.$_$.n1=ro,t.$_$.o1=Co,t.$_$.p1=Oo,t.$_$.q1=Zo,t.$_$.r1=Ko,t.$_$.s1=Qo,t.$_$.t1=Rn,t.$_$.u1=$n,t.$_$.v1=hi,t.$_$.w1=ai,t.$_$.x1=ci,t.$_$.y1=di,t.$_$.z1=mi,t.$_$.a2=Si,t.$_$.b2=ji,t.$_$.c2=Wi,t.$_$.d2=Xi,t.$_$.e2=ir,t.$_$.f2=nr,t.$_$.g2=Ki,t.$_$.h2=Zi,t.$_$.i2=qi}(t.exports,E)})),v=p((function(t,e){!function(t,e,n){var i,r,s,o,a,h,u,l,c,f,d,m,_,g=e.$_$.q1,p=e.$_$.a1,E=e.$_$.z,w=n.$_$.w,v=n.$_$.v,A=n.$_$.x,T=e.$_$.f1,b=e.$_$.e,R=n.$_$.n,x=n.$_$.a,C=e.$_$.y1,S=e.$_$.s1,M=e.$_$.n1,N=n.$_$.l,y=e.$_$.f,F=e.$_$.y,O=e.$_$.r1,$=e.$_$.d1,L=e.$_$.x1,I=e.$_$.a2,D=e.$_$.m,B=e.$_$.k,U=e.$_$.o,P=e.$_$.z1,k=e.$_$.t1,H=e.$_$.w1,G=e.$_$.j,z=e.$_$.t,V=e.$_$.f2,j=e.$_$.s,W=n.$_$.j,X=e.$_$.e2,Y=e.$_$.i1,q=e.$_$.b1,Z=e.$_$.k1,K=e.$_$.b2,J=e.$_$.d2,Q=e.$_$.j1,tt=e.$_$.m1,et=e.$_$.e1,nt=e.$_$.d,it=e.$_$.c1,rt=e.$_$.c,st=e.$_$.g1,ot=e.$_$.u1,at=e.$_$.h,ht=e.$_$.i,ut=e.$_$.p1,lt=e.$_$.v,ct=e.$_$.u,ft=e.$_$.b,dt=n.$_$.g,mt=e.$_$.l1,_t=n.$_$.f,gt=e.$_$.g,pt=e.$_$.w,Et=e.$_$.a,wt=n.$_$.u,vt=e.$_$.r,At=n.$_$.i,Tt=n.$_$.q,bt=e.$_$.p,Rt=n.$_$.e1,xt=n.$_$.k,Ct=e.$_$.n,St=e.$_$.l,Mt=e.$_$.c2,Nt=e.$_$.x,yt=e.$_$.v1,Ft=e.$_$.q,Ot=e.$_$.o1,$t=e.$_$.h1,Lt=n.$_$.b,It=n.$_$.b1,Dt=e.$_$.i2,Bt=e.$_$.h2,Ut=e.$_$.g2,Pt=n.$_$.z,kt=n.$_$.o,Ht=n.$_$.a1;function Gt(){i=this;var t=this,e=[new E(new p(new g(1595.2762,-1516.1268,83.44518),new g(-569.53894,-770.3358,151.01573)),new p(new g(1957.1698,1356.8844,83.44518),new g(-515.5615,-151.354,151.01573)),1),new E(new p(new g(-829.46936,-908.0382,136.9292),new g(-165.64581,1195.0557,251.3715)),new p(new g(1024.0853,-362.24524,136.9292),new g(1414.9342,567.3635,251.3715)),1),new E(new p(new g(-243.95557,1205.2717,136.9292),new g(362.46558,-880.0043,251.3715)),new p(new g(-819.9841,-194.45178,136.9292),new g(991.0796,1096.154,251.3715)),1),new E(new p(new g(81.35687,-835.5989,39.98031),new g(334.3451,-294.1427,394.6469)),new p(new g(895.4863,-925.46606,39.98031),new g(1337.5438,-802.4769,725.81354)),1)];t.xg_1=[e,[new E(new p(new g(-842.0926,-846.5076,129.98555),new g(-674.4083,775.07825,47.71223)),new p(new g(-828.56775,790.18756,129.86708),new g(940.84375,1304.5559,46.237785)),1),new E(new p(new g(-1442.4281,-137.39117,400.79602),new g(98.2589,-729.51196,445.23422)),new p(new g(-165.14899,2.8690004,130.22337),new g(1178.7565,470.28696,214.73752)),1),new E(new p(new g(-451.56958,-252.30167,587.1848),new g(-898.23376,597.8059,38.427677)),new p(new g(1161.2458,-52.537415,721.2996),new g(1249.9236,615.2596,46.237785)),1),new E(new p(new g(-1809.4268,206.302,822.04504),new g(-704.4282,-1200.5166,570.46594)),new p(new g(485.292,.00439453,654.2626),new g(740.58057,152.70099,570.47485)),1),new E(new p(new g(-1201.3511,-321.01813,1267.3562),new g(-1091.3955,484.66968,-120.63285)),new p(new g(348.40283,333.19476,531.56305),new g(1243.907,207.53552,454.83487)),1),new E(new p(new g(1280.2383,.00817871,765.05676),new g(1020.4136,-.0057373,681.30115)),new p(new g(-542.4983,-.00439453,765.0978),new g(-716.4851,.00195313,656.9107)),1),new E(new p(new g(684.19763,-906.22656,562.2279),new g(293.5536,-235.00806,457.9884)),new p(new g(-355.00952,702.02734,585.4181),new g(582.56335,400.67163,433.59796)),1),new E(new p(new g(255.49573,-216.34082,356.14874),new g(621.0696,213.13354,377.2011)),new p(new g(-261.60974,210.44629,9.956253),new g(444.66296,48.16748,614.7096)),1),new E(new p(new g(187.09607,-779.0669,151.3941),new g(-729.9801,-1107.8511,366.46796)),new p(new g(181.64563,716.58813,151.3935),new g(-921.05164,-237.90332,366.46844)),1)]]}function zt(){return null==i&&new Gt,i}function Vt(){T.call(this),this.yg_1=b()}function jt(){C.call(this),this.timers=new S,this.eh_1=1e6,this.fh_1=22e3,this.gh_1=3500,this.FOV_TRANSITION=20,this.yh_1=N([M()]),this.Z_NEAR=20,this.Z_FAR=1e4,this.FOV_LANDSCAPE=85,this.FOV_PORTRAIT=100;var t=this,e=new Wt;e.lowQuality=!1,e.cameraPeriod=1,e.vignette=!0,e.clock=!1,e.blurred=!1,e.colorMode=y(),e.autoSwitchCameras=!0,t.settings=e,this.cameraAnimator=new F(this.eh_1,this.fh_1,this.gh_1,!0),this.cameraAnimator.setCameras(zt().xg_1[1]),this.cameraAnimator.minDurationCoefficient=this.settings.cameraPeriod,this.wh_1=new O(1,1,1,1),this.xh_1=new O(.74,.55,.3,1);var n=this,i=new $;i.color=this.wh_1,i.name="clear color",i.enabled=!0,n.vh_1=i;var r=new L;r.fileName="room1";var s=r,o=new L;o.fileName="room2-optimized0";var a=o,h=new L;h.fileName="room2-optimized1";var u=h,l=new L;l.fileName="room2-optimized2";var c=l;this.meshes=N([s,a,u,c]);var f=new I;f.name="room1",f.fileName="room1",f.format=D(),f.mipmaps=11,f.minFilter=B(),f.magFilter=B(),f.anisotropy=3;var d=f,m=new I;m.name="room20",m.fileName="room20",m.format=D(),m.mipmaps=12,m.minFilter=B(),m.magFilter=B(),m.anisotropy=3,m.wrapping=U();var _=m,p=new I;p.name="room21",p.fileName="room21",p.format=D();var E=p,w=new I;w.name="room22",w.fileName="room22",w.format=D();var v=w;this.textures=N([d,_,E,v]);var A=new P;A.name="Diffuse";var T=A;this.shaders=N([T]);var b=new Y(T,k(),H(),G(),new X(W([new V(0,z(),0),new V(1,j(),6)]),12)),R=new q(new g(0,0,0),new g(0,0,0),new g(1,1,1)),x=new q(new g(0,0,0),new g(0,0,0),new g(1,1,1)),dt=this,mt=new Z;mt.name="room1",mt.enabled=!1;var _t=mt,gt=new Q(s,W([new K(new Float32Array(16)),new J(d)]),b,R);gt.hints=this.yh_1,_t.commands=N([gt]),dt.hh_1=mt;var pt=this,Et=new Z;Et.name="room1-blurred";var wt=Et,vt=new Q(s,W([new K(new Float32Array(16)),new J(E)]),b,R);vt.hints=N([tt()]),wt.commands=N([vt]),pt.ih_1=Et;var At=this,Tt=new Z;Tt.name="room2",Tt.enabled=!0;var bt=Tt,Rt=new Q(a,W([new K(new Float32Array(16)),new J(_)]),b,x);Rt.hints=this.yh_1;var xt=Rt,Ct=new Q(u,W([new K(new Float32Array(16)),new J(E)]),b,x);Ct.hints=N([tt()]);var St=Ct,Mt=new Q(c,W([new K(new Float32Array(16)),new J(v)]),b,x);Mt.hints=N([tt()]),bt.commands=N([xt,St,Mt]),At.jh_1=Tt;var Nt=this,yt=new Z;yt.name="room2-blurred";var Ft=yt,Ot=new Q(a,W([new K(new Float32Array(16)),new J(E)]),b,x);Ot.hints=N([tt()]);var $t=Ot,Lt=new Q(u,W([new K(new Float32Array(16)),new J(E)]),b,x);Lt.hints=N([tt()]);var It=Lt,Dt=new Q(c,W([new K(new Float32Array(16)),new J(v)]),b,x);Dt.hints=N([tt()]),Ft.commands=N([$t,It,Dt]),Nt.kh_1=yt;var Bt=this,Ut=new Z,Pt=Ut,kt=new et;kt.clearType=nt(),Pt.commands=N([this.vh_1,kt]),Bt.lh_1=Ut;var Ht=this,Gt=new it;Gt.name="bloom1",Gt.enabled=!1,Gt.minSize=170,Gt.brightness=1,Gt.blurSize=rt(),Gt.commands=N([this.lh_1,this.ih_1]),Gt.id=0,Ht.mh_1=Gt;var jt=this,Xt=new it;Xt.name="bloom2",Xt.enabled=!0,Xt.minSize=170,Xt.brightness=1,Xt.blurSize=rt(),Xt.commands=N([this.lh_1,this.kh_1]),Xt.id=1,jt.nh_1=Xt;var Yt=this,qt=new st;qt.name="draw bloom";var Zt=qt,Kt=new ot;Kt.enabled=!0,Kt.equationColor=at(),Kt.sourceFactorColor=ht(),Kt.destinationFactorColor=ht(),Zt.blending=Kt,Yt.oh_1=qt;var Jt=this,Qt=new st;Qt.name="draw blurred",Qt.blending=k(),Jt.ph_1=Qt;var te=this,ee=new ut;ee.color0=new O(.4,.4,.4,1),ee.color1=new O(1,1,1,1),te.qh_1=ee,this.rh_1=new Vt,this.sh_1=ct(!0,[this.mh_1,this.nh_1,lt(!0,[this.lh_1,this.hh_1,this.jh_1,this.oh_1,this.qh_1,this.rh_1])]);var ne=this,ie=new it;ie.name="blurred-main",ie.enabled=!0,ie.minSize=200,ie.brightness=.93,ie.blurSize=ft(),ie.commands=N([this.lh_1,this.hh_1,this.jh_1,this.qh_1]),ie.id=2,ne.uh_1=ie,this.th_1=ct(!0,[this.uh_1,lt(!0,[this.lh_1,this.ph_1])]),this.commands=N([this.sh_1,this.th_1])}function Wt(){this.lowQuality=!1,this.cameraPeriod=1,this.vignette=!0,this.clock=!1,this.blurred=!1,this.colorMode=y(),this.autoSwitchCameras=!0}function Xt(){r=this,this.ri_1=[Zt(new p(new g(4.84,-644.785,-25.362),new g(4.673,-1.741,4.447)),new p(new g(2.56,-126,-8.595),new g(2.533,-1.741,3.993)),1,"",!1),Zt(new p(new g(-137,-115,-12),new g(3.485,-.679,-16.321)),new p(new g(138,-110,20),new g(3.485,-.679,-16.321)),1,"",!0),Zt(new p(new g(208,-208,-21),new g(0,0,0)),new p(new g(265,77,22),new g(0,0,-35)),1,"",!0),Zt(new p(new g(347,73,15),new g(161,-220,-19)),new p(new g(69,365,15),new g(-100,162,-18)),1,"",!0),Zt(new p(new g(147,212,0),new g(20,-10,7)),new p(new g(-146,182,30),new g(-20,4,-35)),1,"",!0),Zt(new p(new g(-244,139,77),new g(-3,-27,-37)),new p(new g(-151,-357,11),new g(20,-45,0)),1,"",!0),Zt(new p(new g(-265,-158,-20),new g(0,0,32)),new p(new g(-95,-70,0),new g(9,-13,-10)),1,"",!1)]}function Yt(){return null==r&&new Xt,r}function qt(t,e,n,i,r,s){return E.call(s,t,e,n),Kt.call(s),s.vi_1=i,s.wi_1=r,s}function Zt(t,e,n,i,r){return qt(t,e,n,i,r,wt(w(Kt)))}function Kt(){this.vi_1="",this.wi_1=!1}function Jt(){s=this,this.xi_1=new O(.55859375,.7578125,.87890625,1);var t=this,e=new $;e.color=Qt().xi_1,e.name="clear color",e.enabled=!0,t.yi_1=e}function Qt(){return null==s&&new Jt,s}function te(){Qt(),C.call(this),this.timers=new S,this.ej_1=6.2831855,this.fj_1=1e6,this.gj_1=11e3,this.hj_1=1100,this.FOV_TRANSITION=20,this.testVertexAttributesDescriptor=new X(At(new V(0,vt(),0)),16),this.arr1=new Float32Array(16);for(var t=this,e=0,n=Tt(Array(16),null);e<16;)n[e]=0,e=e+1|0;t.arr2=n,this.arr3=new Float32Array([0,0,0]),this.arr4=[1,1,1],this.arr5=[new V(0,vt(),0),new V(0,bt(),0)],this.list6=W([new V(0,vt(),0),new V(0,bt(),0)]),this.list7=N([new V(0,vt(),0),new V(0,bt(),0)]),this.map8=xt([Rt(1,"x"),Rt(2,"y"),Rt(-1,"zz")]);var i=this,r=new K(new Float32Array(16)),s=new Float32Array([.55078125,.703125,.77734375,1]);i.uniformsMountainsBright=W([r,new K(s)]);var o=this,a=new K(new Float32Array(16)),h=new Float32Array([.42578125,.62890625,.73828125,1]);o.uniformsMountainsDark=W([a,new K(h)]);var u=this,l=new K(new Float32Array(16)),c=new Float32Array([.37890625,.375,.33984375,1]);u.uniformsCenterRockBright=W([l,new K(c)]);var f=this,d=new K(new Float32Array(16)),m=new Float32Array([.26953125,.265625,.23828125,1]);f.uniformsCenterRockDark=W([d,new K(m)]);var _=this,p=new K(new Float32Array(16)),E=new Float32Array([.08984375,.26953125,.23828125,1]);_.uniformsHills=W([p,new K(E)]);var w=this,v=new K(new Float32Array(16)),A=new Float32Array([.15625,.359375,.25390625,1]);w.uniformsGround1=W([v,new K(A)]);var T=this,b=new K(new Float32Array(16)),R=new Float32Array([.33203125,.578125,.62890625,1]);T.uniformsGround2=W([b,new K(R)]);var x=this,M=new K(new Float32Array(16)),y=new Float32Array([.55859375,.7578125,.81640625,1]);x.uniformsWater=W([M,new K(y)]);var $=this,B=new K(new Float32Array(16)),U=new Float32Array([.74609375,.85546875,.921875,1]);$.uniformsWaterHighlights=W([B,new K(U),new K(new Float32Array(1))]);var j=this,tt=new K(new Float32Array(16)),it=new Float32Array([.99609375,.99609375,.86328125,1]);j.uniformsSkyObjects=W([tt,new K(it)]);var rt=this,st=new I;st.name="static",st.fileName="static",st.format=D(),st.mipmaps=9,rt.texStatic=st,this.uniformsDiffuseTest=W([new K(new Float32Array(16)),new J(this.texStatic)]);var ot=this,at=new I;at.name="testfp16",at.fileName="Alpaca/Eating/animal.rgba.fp16",at.format=Ct(),at.minFilter=St(),at.magFilter=St(),at.width=362,at.height=19,ot.texFp16=at,this.uniformsAnimated=W([new K(new Float32Array(16)),new K(new Float32Array(4)),new Mt(new Int32Array(1)),new K(new Float32Array(1)),new J(this.texFp16),new K(new Float32Array(4))]),this.animationAnimal=new Nt(362,362,18),this.ij_1=25e3,this.jj_1=34e3,this.kj_1=25e4,this.lj_1=3e5,this.mj_1=2500,this.nj_1=1e3,this.oj_1=900,this.pj_1=6e3,this.qj_1=1e3,this.Z_NEAR=50,this.Z_FAR=1e4,this.FOV_LANDSCAPE=35,this.FOV_PORTRAIT=60,this.timers.ug(ie(),this.kj_1),this.timers.ug(re(),this.lj_1),this.timers.ug(ae(),this.mj_1),this.timers.ug(he(),this.nj_1),this.timers.ug(ue(),this.oj_1),this.timers.ug(le(),this.pj_1),this.timers.ug(ce(),this.qj_1),this.timers.ug(se(),this.ij_1),this.timers.ug(oe(),this.jj_1),this.cameraAnimator=new F(this.fj_1,this.gj_1,this.hj_1,!0),this.cameraAnimator.setCameras(Yt().ri_1),this.cameraAnimator.minDurationCoefficient=2;var ht=new L;ht.fileName="static";var lt=ht,ct=new L;ct.fileName="Alpaca-Idle";var ft=ct,dt=new L;dt.fileName="sun";var mt=dt,_t=new L;_t.fileName="sun_small";var gt=_t,pt=new L;pt.fileName="stars";var Et=pt,wt=new L;wt.fileName="mountains_bright";var It=wt,Dt=new L;Dt.fileName="mountains_dark";var Bt=Dt,Ut=new L;Ut.fileName="center_rock_bright";var Pt=Ut,kt=new L;kt.fileName="center_rock_dark";var Ht=kt,Gt=new L;Gt.fileName="ground_1";var zt=Gt,Vt=new L;Vt.fileName="ground_2";var jt=Vt,Wt=new L;Wt.fileName="hills";var Xt=Wt,qt=new L;qt.fileName="water";var Zt=qt,Kt=new L;Kt.fileName="water_highlights",this.meshes=N([It,Bt,Pt,Ht,zt,jt,Xt,Zt,Kt,lt,ft,mt,gt,Et]),this.textures=N([this.texStatic,this.texFp16]);var Jt=new P;Jt.name="Color";var te=Jt,ee=new P;ee.name="Diffuse";var ne=ee,fe=new P;fe.name="ColorAnimatedTextureChunked";var de=fe,me=new P;me.name="Water";var _e=me;this.shaders=N([te,ne,de,_e]);var ge=new Y(te,k(),H(),G(),new X(At(new V(0,z(),0)),8)),pe=new Y(te,k(),yt(),G(),new X(At(new V(0,z(),0)),8)),Ee=new Y(ne,k(),H(),G(),new X(W([new V(0,Ft(),0),new V(1,bt(),12)]),20)),we=new Y(de,k(),H(),G(),null),ve=new Y(_e,k(),H(),G(),new X(At(new V(0,z(),0)),8)),Ae=new q(new g(0,0,0),new g(0,0,0),new g(1,1,1)),Te=new Ot,be=new Z,Re=be,xe=Qt().yi_1,Ce=new et;Ce.clearType=nt(),Re.commands=N([xe,Ce]);var Se=be,Me=new $t(ft,this.uniformsAnimated,we),Ne=new Z;Ne.name="hill",Ne.commands=N([new Q(this.meshes.q(2),this.uniformsCenterRockBright,ge,Ae),new Q(this.meshes.q(3),this.uniformsCenterRockDark,ge,Ae)]);var ye=Ne,Fe=new Z;Fe.name="grounds",Fe.commands=N([new Q(this.meshes.q(4),this.uniformsGround1,ge,Ae),new Q(this.meshes.q(6),this.uniformsHills,ge,Ae),new Q(this.meshes.q(5),this.uniformsGround2,ge,Ae)]);var Oe=Fe,$e=new Z;$e.name="mountains",$e.commands=N([new Q(this.meshes.q(0),this.uniformsMountainsBright,ge,Ae),new Q(this.meshes.q(1),this.uniformsMountainsDark,ge,Ae)]);var Le=$e,Ie=new Z;Ie.name="water",Ie.commands=N([new Q(this.meshes.q(7),this.uniformsWater,pe,Ae),new Q(this.meshes.q(8),this.uniformsWaterHighlights,ve,Ae)]);var De=Ie,Be=new Z;Be.name="birds",Be.commands=Lt();var Ue=Be,Pe=new Z;Pe.name="clouds",Pe.commands=Lt();var ke=Pe,He=new Z;He.name="sky objects";var Ge=He,ze=new Q(mt,this.uniformsSkyObjects,ge,Ae);ze.enabled=!1;var Ve=ze,je=new Q(gt,this.uniformsSkyObjects,ge,Ae),We=new Q(Et,this.uniformsSkyObjects,ge,Ae);We.enabled=!1,Ge.commands=N([Ve,je,We]);var Xe=He,Ye=new Z;Ye.name="shooting stars",Ye.commands=Lt();var qe=Ye,Ze=new $t(lt,this.uniformsDiffuseTest,Ee),Ke=new ut;Ke.color0=new O(.5,.5,.5,1),Ke.color1=new O(1,1,1,1),this.commands=N([Te,Se,Me,ye,Oe,Le,De,Ue,ke,Xe,qe,Ze,Ke])}function ee(){if(_)return dt;_=!0,o=new ne("Clouds1",0),a=new ne("Clouds2",1),h=new ne("BirdsFly",2),u=new ne("Camera",3),l=new ne("Water",4),c=new ne("BirdWings1",5),f=new ne("BirdWings2",6),d=new ne("AnimalAnimation",7),m=new ne("ShootingStar",8)}function ne(t,e){Ht.call(this,t,e)}function ie(){return ee(),o}function re(){return ee(),a}function se(){return ee(),h}function oe(){return ee(),u}function ae(){return ee(),l}function he(){return ee(),c}function ue(){return ee(),f}function le(){return ee(),d}function ce(){return ee(),m}function fe(t){((n=(e=t.org||(t.org={})).androidworks||(e.androidworks={})).brutalism||(n.brutalism={})).DrawClockCommand=Vt,((n=(e=t.org||(t.org={})).androidworks||(e.androidworks={})).brutalism||(n.brutalism={})).BrutalismScene=jt,((n=(e=t.org||(t.org={})).androidworks||(e.androidworks={})).brutalism||(n.brutalism={})).BrutalismSettings=Wt;var e,n,i=(n=(e=t.org||(t.org={})).androidworks||(e.androidworks={})).example||(n.example={});i.ExampleScene=te,kt(i.ExampleScene,"Companion",Qt)}A(Gt,"Cameras",v),A(Vt,"DrawClockCommand",R,T,x,Vt),A(jt,"BrutalismScene",R,C,x,jt),A(Wt,"BrutalismSettings",R,x,x,Wt),A(Xt,"Cameras",v),A(Kt,"InteractiveCameraPositionPair",R,E),A(Jt,"Companion",v),A(te,"ExampleScene",R,C,x,te),A(ne,"Timers",R,Ht),w(Vt).ad=function(){return this.yg_1},w(jt).zh=function(){return this.timers},w(jt).ai=function(){return this.cameraAnimator},w(jt).bi=function(){return this.FOV_TRANSITION},w(jt).ci=function(){return this.settings},w(jt).updateTimers=function(t){this.timers.wg(t),this.cameraAnimator.animate(t),this.animate(),w(C).updateTimers.call(this,t)},w(jt).updateViewportSize=function(t,e){w(C).updateViewportSize.call(this,t,e)},w(jt).initialize=function(){},w(jt).applySettings=function(){this.sh_1.enabled=!this.settings.blurred,this.th_1.enabled=this.settings.blurred,this.mh_1.blurSize=this.settings.lowQuality?ft():rt(),this.nh_1.blurSize=this.settings.lowQuality?ft():rt(),this.yh_1.s(0,this.settings.lowQuality?mt():M()),this.qh_1.enabled=this.settings.vignette,this.cameraAnimator.minDurationCoefficient!==this.settings.cameraPeriod&&(this.cameraAnimator.minDurationCoefficient=this.settings.cameraPeriod),this.rh_1.enabled=this.settings.clock,this.cameraAnimator.timer>.98&&this.settings.autoSwitchCameras&&_t().o5()<.5&&this.randomCameraOrNextRoom(),this.vh_1.color=this.settings.colorMode.equals(gt())?this.xh_1:this.wh_1},w(jt).animate=function(){this.applySettings(),this.calculateProjection();var t=this.cameraAnimator.positionInterpolator,e=t.cameraPosition,n=t.cameraRotation;this.useExternalViewMatrix||pt().mf(this.matView,0,e.x,e.y,e.z,n.x,n.y,n.z,0,0,1),this.updateMeshTransformations(this.commands)},w(jt).nextCamera=function(){this.cameraAnimator.nextCamera()},w(jt).nextRoom=function(){this.hh_1.enabled?(this.hh_1.enabled=!1,this.jh_1.enabled=!0,this.mh_1.enabled=!1,this.nh_1.enabled=!0,this.cameraAnimator.setCameras(zt().xg_1[1],!0)):this.jh_1.enabled&&(this.hh_1.enabled=!0,this.jh_1.enabled=!1,this.mh_1.enabled=!0,this.nh_1.enabled=!1,this.cameraAnimator.setCameras(zt().xg_1[0],!0))},w(jt).nextCameraOrRoom=function(){if(this.cameraAnimator.state.equals(Et()))return dt;var t=this.hh_1.enabled?.75:.25;_t().o5()<t?this.nextRoom():this.nextCamera()},w(jt).randomCameraOrNextRoom=function(){if(this.cameraAnimator.state.equals(Et()))return dt;var t=this.hh_1.enabled?.75:.25;_t().o5()<t?this.nextRoom():(this.cameraAnimator.positionInterpolator.reverse=_t().o5()<.5,this.cameraAnimator.randomCamera())},w(Wt).di=function(t){this.lowQuality=t},w(Wt).ei=function(){return this.lowQuality},w(Wt).fi=function(t){this.cameraPeriod=t},w(Wt).gi=function(){return this.cameraPeriod},w(Wt).hi=function(t){this.vignette=t},w(Wt).ii=function(){return this.vignette},w(Wt).ji=function(t){this.clock=t},w(Wt).ki=function(){return this.clock},w(Wt).li=function(t){this.blurred=t},w(Wt).mi=function(){return this.blurred},w(Wt).ni=function(t){this.colorMode=t},w(Wt).oi=function(){return this.colorMode},w(Wt).pi=function(t){this.autoSwitchCameras=t},w(Wt).qi=function(){return this.autoSwitchCameras},w(te).zh=function(){return this.timers},w(te).ai=function(){return this.cameraAnimator},w(te).bi=function(){return this.FOV_TRANSITION},w(te).rj=function(){return this.testVertexAttributesDescriptor},w(te).sj=function(){return this.arr1},w(te).tj=function(){return this.arr2},w(te).uj=function(){return this.arr3},w(te).vj=function(t){this.arr4=t},w(te).wj=function(){return this.arr4},w(te).xj=function(t){this.arr5=t},w(te).yj=function(){return this.arr5},w(te).zj=function(t){this.list6=t},w(te).ak=function(){return this.list6},w(te).bk=function(t){this.list7=t},w(te).ck=function(){return this.list7},w(te).dk=function(){return this.map8},w(te).ek=function(){return this.uniformsMountainsBright},w(te).fk=function(){return this.uniformsMountainsDark},w(te).gk=function(){return this.uniformsCenterRockBright},w(te).hk=function(){return this.uniformsCenterRockDark},w(te).ik=function(){return this.uniformsHills},w(te).jk=function(){return this.uniformsGround1},w(te).kk=function(){return this.uniformsGround2},w(te).lk=function(){return this.uniformsWater},w(te).mk=function(){return this.uniformsWaterHighlights},w(te).nk=function(){return this.uniformsSkyObjects},w(te).ok=function(){return this.texStatic},w(te).pk=function(){return this.uniformsDiffuseTest},w(te).qk=function(){return this.texFp16},w(te).rk=function(){return this.uniformsAnimated},w(te).sk=function(){return this.animationAnimal},w(te).updateTimers=function(t){this.timers.wg(t),this.cameraAnimator.animate(t),this.animate(),w(C).updateTimers.call(this,t)},w(te).updateViewportSize=function(t,e){w(C).updateViewportSize.call(this,t,e)},w(te).initialize=function(){},w(te).animate=function(){this.calculateProjection();var t=this.cameraAnimator.positionInterpolator,e=t.cameraPosition,n=t.cameraRotation;this.useExternalViewMatrix||pt().mf(this.matView,0,e.x,e.y,e.z,n.x,n.y,n.z,0,0,1),this.updateMeshTransformations(this.commands);var i=this.uniformsDiffuseTest.q(0);this.setMvpUniform(i instanceof K?i:It(),0,0,0,0,0,0,8,8,8);var r=1.1*this.timers.vg(le()),s=Math.min(r,1);this.setMvpUniform(this.uniformsAnimated.q(0),1.554,-.796,-2.327,0,0,0,.4,.4,.4),Dt(this.uniformsAnimated.q(1),.1640625,.1484375,.1171875,1),Bt(this.uniformsAnimated.q(2),this.animationAnimal.wa_1),Ut(this.uniformsAnimated.q(3),1/this.animationAnimal.bb_1),Dt(this.uniformsAnimated.q(5),this.animationAnimal.wa_1,this.animationAnimal.ya_1,this.animationAnimal.db(s),this.animationAnimal.cb_1),Ut(this.uniformsWaterHighlights.q(2),this.timers.vg(ae())*Pt()*2)},fe(t),e.$jsExportAll$(t)}(t.exports,w,E)}));const A=v.org.androidworks.engine;v.org.androidworks.example;const T=v.org.androidworks.brutalism;class b extends r{constructor(){super(...arguments),this.rm_Vertex=0,this.rm_AO=1}fillCode(){this.vertexShaderCode="#version 300 es\n            precision highp float;\n            layout(location = 0) in vec2 rm_Vertex;\n            layout(location = 1) in mediump float aAO;\n\n            uniform mediump vec4 color0;\n            uniform mediump vec4 color1;\n            out mediump vec4 vAO;\n            void main() {\n              gl_Position.xy = rm_Vertex;\n              gl_Position.z = 0.5;\n              gl_Position.w = 1.0;\n              vAO = mix(color0, color1, aAO);\n            }",this.fragmentShaderCode="#version 300 es\n            precision mediump float;\n            out vec4 fragColor;\n            in mediump vec4 vAO;\n\n            const float MIN = 0.0;\n            const float MAX = 1.0;\n\n            void main() {\n              fragColor = smoothstep(MIN, MAX, vAO);\n            }"}fillUniformsAttributes(){this.color0=this.getUniform("color0"),this.color1=this.getUniform("color1")}drawVignette(t,e){const n=t.gl;e.bindBuffers(n),n.enableVertexAttribArray(this.rm_Vertex),n.enableVertexAttribArray(this.rm_AO),n.vertexAttribPointer(this.rm_Vertex,2,n.HALF_FLOAT,!1,8,0),n.vertexAttribPointer(this.rm_AO,1,n.UNSIGNED_BYTE,!0,8,6),n.drawElements(n.TRIANGLES,3*e.getNumIndices(),n.UNSIGNED_SHORT,0),t.checkGlError("VertexVignetteShader2 drawVignette")}}class R{constructor(){this.fmVignette=new i,this.color0=[0,0,0,1],this.color1=[1,1,1,1]}async initialize(t){this.shader=new b(t),await this.fmVignette.load("data/models/vignette-round-vntao",t)}setColor0(t,e,n,i){this.color0[0]=t,this.color0[1]=e,this.color0[2]=n,this.color0[3]=i}setColor1(t,e,n,i){this.color1[0]=t,this.color1[1]=e,this.color1[2]=n,this.color1[3]=i}draw(t){if(void 0===this.shader)return;const e=t.gl;e.disable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.ZERO,e.SRC_COLOR),this.shader.use(),e.uniform4fv(this.shader.color0,this.color0),e.uniform4fv(this.shader.color1,this.color1),this.shader.drawVignette(t,this.fmVignette),e.enable(e.DEPTH_TEST),e.disable(e.BLEND)}}const x={ZERO:WebGL2RenderingContext.ZERO,ONE:WebGL2RenderingContext.ONE,SRC_COLOR:WebGL2RenderingContext.SRC_COLOR,ONE_MINUS_SRC_COLOR:WebGL2RenderingContext.ONE_MINUS_SRC_COLOR,DST_COLOR:WebGL2RenderingContext.DST_COLOR,ONE_MINUS_DST_COLOR:WebGL2RenderingContext.ONE_MINUS_DST_COLOR,SRC_ALPHA:WebGL2RenderingContext.SRC_ALPHA,ONE_MINUS_SRC_ALPHA:WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA,DST_ALPHA:WebGL2RenderingContext.DST_ALPHA,ONE_MINUS_DST_ALPHA:WebGL2RenderingContext.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:WebGL2RenderingContext.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:WebGL2RenderingContext.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:WebGL2RenderingContext.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:WebGL2RenderingContext.ONE_MINUS_CONSTANT_ALPHA,SRC_ALPHA_SATURATE:WebGL2RenderingContext.SRC_ALPHA_SATURATE},C={ADD:WebGL2RenderingContext.FUNC_ADD,SUBTRACT:WebGL2RenderingContext.FUNC_SUBTRACT,REVERSE_SUBTRACT:WebGL2RenderingContext.FUNC_REVERSE_SUBTRACT},S={BACK:WebGL2RenderingContext.BACK,FRONT:WebGL2RenderingContext.FRONT,FRONT_AND_BACK:WebGL2RenderingContext.FRONT_AND_BACK},M={UBYTE:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:1,normalized:!1},UBYTE2:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:2,normalized:!1},UBYTE3:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:3,normalized:!1},UBYTE4:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:4,normalized:!1},BYTE:{type:WebGL2RenderingContext.BYTE,size:1,normalized:!1},BYTE2:{type:WebGL2RenderingContext.BYTE,size:2,normalized:!1},BYTE3:{type:WebGL2RenderingContext.BYTE,size:3,normalized:!1},BYTE4:{type:WebGL2RenderingContext.BYTE,size:4,normalized:!1},UBYTE_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:1,normalized:!0},UBYTE2_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:2,normalized:!0},UBYTE3_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:3,normalized:!0},UBYTE4_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_BYTE,size:4,normalized:!0},BYTE_NORMALIZED:{type:WebGL2RenderingContext.BYTE,size:1,normalized:!0},BYTE2_NORMALIZED:{type:WebGL2RenderingContext.BYTE,size:2,normalized:!0},BYTE3_NORMALIZED:{type:WebGL2RenderingContext.BYTE,size:3,normalized:!0},BYTE4_NORMALIZED:{type:WebGL2RenderingContext.BYTE,size:4,normalized:!0},USHORT:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:1,normalized:!1},USHORT2:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:2,normalized:!1},USHORT3:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:3,normalized:!1},USHORT4:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:4,normalized:!1},SHORT:{type:WebGL2RenderingContext.SHORT,size:1,normalized:!1},SHORT2:{type:WebGL2RenderingContext.SHORT,size:2,normalized:!1},SHORT3:{type:WebGL2RenderingContext.SHORT,size:3,normalized:!1},SHORT4:{type:WebGL2RenderingContext.SHORT,size:4,normalized:!1},USHORT_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:1,normalized:!0},USHORT2_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:2,normalized:!0},USHORT3_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:3,normalized:!0},USHORT4_NORMALIZED:{type:WebGL2RenderingContext.UNSIGNED_SHORT,size:4,normalized:!0},SHORT_NORMALIZED:{type:WebGL2RenderingContext.SHORT,size:1,normalized:!0},SHORT2_NORMALIZED:{type:WebGL2RenderingContext.SHORT,size:2,normalized:!0},SHORT3_NORMALIZED:{type:WebGL2RenderingContext.SHORT,size:3,normalized:!0},SHORT4_NORMALIZED:{type:WebGL2RenderingContext.SHORT,size:4,normalized:!0},HALF:{type:WebGL2RenderingContext.HALF_FLOAT,size:1,normalized:!1},HALF2:{type:WebGL2RenderingContext.HALF_FLOAT,size:2,normalized:!1},HALF3:{type:WebGL2RenderingContext.HALF_FLOAT,size:3,normalized:!1},HALF4:{type:WebGL2RenderingContext.HALF_FLOAT,size:4,normalized:!1},FLOAT:{type:WebGL2RenderingContext.FLOAT,size:1,normalized:!1},FLOAT2:{type:WebGL2RenderingContext.FLOAT,size:2,normalized:!1},FLOAT3:{type:WebGL2RenderingContext.FLOAT,size:3,normalized:!1},FLOAT4:{type:WebGL2RenderingContext.FLOAT,size:4,normalized:!1},UINT:{type:WebGL2RenderingContext.UNSIGNED_INT,size:1,normalized:!1},UINT2:{type:WebGL2RenderingContext.UNSIGNED_INT,size:2,normalized:!1},UINT3:{type:WebGL2RenderingContext.UNSIGNED_INT,size:3,normalized:!1},UINT4:{type:WebGL2RenderingContext.UNSIGNED_INT,size:4,normalized:!1},INT:{type:WebGL2RenderingContext.INT,size:1,normalized:!1},INT2:{type:WebGL2RenderingContext.INT,size:2,normalized:!1},INT3:{type:WebGL2RenderingContext.INT,size:3,normalized:!1},INT4:{type:WebGL2RenderingContext.INT,size:4,normalized:!1},INT_1010102_NORMALIZED:{type:WebGL2RenderingContext.INT_2_10_10_10_REV,size:1,normalized:!0},UINT_1010102_NORMALIZED:{type:WebGL2RenderingContext.INT_2_10_10_10_REV,size:1,normalized:!0}},N={NEAREST:WebGL2RenderingContext.NEAREST,LINEAR:WebGL2RenderingContext.LINEAR,NEAREST_MIPMAP_NEAREST:WebGL2RenderingContext.NEAREST_MIPMAP_NEAREST,LINEAR_MIPMAP_NEAREST:WebGL2RenderingContext.LINEAR_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_LINEAR:WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR};async function y(t){const e=await fetch(t);return await e.arrayBuffer()}function F(t,e,n,i,r,s=n.LINEAR,o=n.LINEAR,a=!1,h="fp16",u=3){const l=n.createTexture();if(null===l)throw new Error("Error creating WebGL texture");const c="fp16"===h?new Uint16Array(e):"fp32"===h?new Float32Array(e):new Int8Array(e);n.bindTexture(n.TEXTURE_2D,l),t.checkGlError("loadFloatingPointTexture 0"),n.pixelStorei(n.UNPACK_ALIGNMENT,1);let f=n.RGB16F,d=n.RGB,m=n.HALF_FLOAT;return 2===u?(f=n.RG16F,d=n.RG):1===u?(f=n.R16F,d=n.RED):4===u&&(f=n.RGBA16F,d=n.RGBA),"snorm8"===h?(f=n.RGB8_SNORM,d=n.RGB,m=n.BYTE,2===u?(f=n.RG8_SNORM,d=n.RG):1===u?(f=n.R8_SNORM,d=n.RED):4===u&&(f=n.RGBA8_SNORM,d=n.RGBA)):"sbyte"===h?(f=n.RGB8I,d=n.RGB_INTEGER,m=n.BYTE,2===u?(f=n.RG8I,d=n.RG_INTEGER):1===u?(f=n.R8I,d=n.RED_INTEGER):4===u&&(f=n.RGBA8I,d=n.RGBA_INTEGER)):"fp32"===h&&(f=n.RGB32F,d=n.RGB,m=n.FLOAT,2===u?(f=n.RG32F,d=n.RG):1===u?(f=n.R32F,d=n.RED):4===u&&(f=n.RGBA32F,d=n.RGBA)),n.texImage2D(n.TEXTURE_2D,0,f,i,r,0,d,m,c),t.checkGlError("loadFloatingPointTexture 1"),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,s),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,o),!0===a?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT)),t.checkGlError("loadFloatingPointTexture 2"),n.bindTexture(n.TEXTURE_2D,null),l}var O,$,L,I="undefined"!=typeof Float32Array?Float32Array:Array;function D(){var t=new I(16);return I!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function B(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],m=e[12],_=e[13],g=e[14],p=e[15],E=n*a-i*o,w=n*h-r*o,v=n*u-s*o,A=i*h-r*a,T=i*u-s*a,b=r*u-s*h,R=l*_-c*m,x=l*g-f*m,C=l*p-d*m,S=c*g-f*_,M=c*p-d*_,N=f*p-d*g,y=E*N-w*M+v*S+A*C-T*x+b*R;return y?(y=1/y,t[0]=(a*N-h*M+u*S)*y,t[1]=(r*M-i*N-s*S)*y,t[2]=(_*b-g*T+p*A)*y,t[3]=(f*T-c*b-d*A)*y,t[4]=(h*C-o*N-u*x)*y,t[5]=(n*N-r*C+s*x)*y,t[6]=(g*v-m*b-p*w)*y,t[7]=(l*b-f*v+d*w)*y,t[8]=(o*M-a*C+u*R)*y,t[9]=(i*C-n*M-s*R)*y,t[10]=(m*T-_*v+p*E)*y,t[11]=(c*v-l*T-d*E)*y,t[12]=(a*x-o*S-h*R)*y,t[13]=(n*S-i*x+r*R)*y,t[14]=(_*w-m*A-g*E)*y,t[15]=(l*A-c*w+f*E)*y,t):null}function P(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],h=e[7],u=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+u*i,t[5]=o*r+l*i,t[6]=a*r+c*i,t[7]=h*r+f*i,t[8]=u*r-s*i,t[9]=l*r-o*i,t[10]=c*r-a*i,t[11]=f*r-h*i,t}function k(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],h=e[3],u=e[4],l=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+u*i,t[1]=o*r+l*i,t[2]=a*r+c*i,t[3]=h*r+f*i,t[4]=u*r-s*i,t[5]=l*r-o*i,t[6]=c*r-a*i,t[7]=f*r-h*i,t}function H(){var t=new I(3);return I!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),function(){var t=H()}();class G{get angles(){return this._angles}set angles(t){this._angles=t,this._dirty=!0}get position(){return this._position}set position(t){this._position=t,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}get viewMat(){if(this._dirty){var t=this._viewMat;B(t),P(t,t,this.angles[0]-Math.PI/2),k(t,t,this.angles[1]),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],h=e[3],u=e[8],l=e[9],c=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-u*i,t[1]=o*r-l*i,t[2]=a*r-c*i,t[3]=h*r-f*i,t[8]=s*i+u*r,t[9]=o*i+l*r,t[10]=a*i+c*r,t[11]=h*i+f*r}(t,t,this.angles[2]),function(t,e,n){var i,r,s,o,a,h,u,l,c,f,d,m,_=n[0],g=n[1],p=n[2];e===t?(t[12]=e[0]*_+e[4]*g+e[8]*p+e[12],t[13]=e[1]*_+e[5]*g+e[9]*p+e[13],t[14]=e[2]*_+e[6]*g+e[10]*p+e[14],t[15]=e[3]*_+e[7]*g+e[11]*p+e[15]):(i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],m=e[11],t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=m,t[12]=i*_+a*g+c*p+e[12],t[13]=r*_+h*g+f*p+e[13],t[14]=s*_+u*g+d*p+e[14],t[15]=o*_+l*g+m*p+e[15])}(t,t,[-this.position[0],-this.position[1],-this.position[2]]),this._dirty=!1}return this._viewMat}constructor(t){var e,n;this.options=t,this._dirty=!0,this._angles=H(),this._position=H(),this.speed=100,this.rotationSpeed=.025,this._cameraMat=D(),this._viewMat=D(),this.projectionMat=D(),this.pressedKeys=new Array,this.vec3Temp1=H(),this.vec3Temp2=H(),this.canvas=t.canvas,this.speed=null!==(e=t.movementSpeed)&&void 0!==e?e:100,this.rotationSpeed=null!==(n=t.rotationSpeed)&&void 0!==n?n:.025;let i,r,s=!1;window.addEventListener("keydown",(t=>this.pressedKeys[t.keyCode]=!0)),window.addEventListener("keyup",(t=>this.pressedKeys[t.keyCode]=!1)),this.canvas.addEventListener("contextmenu",(t=>t.preventDefault())),this.canvas.addEventListener("mousedown",(t=>{3===t.which&&(s=!0),i=t.pageX,r=t.pageY})),this.canvas.addEventListener("mousemove",(t=>{if(s){let e=t.pageX-i,n=t.pageY-r;i=t.pageX,r=t.pageY,this.angles[1]+=e*this.rotationSpeed,this.angles[1]<0&&(this.angles[1]+=2*Math.PI),this.angles[1]>=2*Math.PI&&(this.angles[1]-=2*Math.PI),this.angles[0]+=n*this.rotationSpeed,this.angles[0]<.5*-Math.PI&&(this.angles[0]=.5*-Math.PI),this.angles[0]>.5*Math.PI&&(this.angles[0]=.5*Math.PI),this._dirty=!0}})),this.canvas.addEventListener("mouseup",(t=>s=!1))}update(t){this.vec3Temp1[0]=0,this.vec3Temp1[1]=0,this.vec3Temp1[2]=0;let e=this.speed/1e3*t;if(this.pressedKeys[16]&&(e*=5),this.pressedKeys["W".charCodeAt(0)]&&(this.vec3Temp1[1]+=e),this.pressedKeys["S".charCodeAt(0)]&&(this.vec3Temp1[1]-=e),this.pressedKeys["A".charCodeAt(0)]&&(this.vec3Temp1[0]-=e),this.pressedKeys["D".charCodeAt(0)]&&(this.vec3Temp1[0]+=e),this.pressedKeys[32]&&(this.vec3Temp1[2]+=e),this.pressedKeys["C".charCodeAt(0)]&&(this.vec3Temp1[2]-=e),0!==this.vec3Temp1[0]||0!==this.vec3Temp1[1]||0!==this.vec3Temp1[2]){let t=this._cameraMat;if(B(t),P(t,t,this.angles[0]),k(t,t,this.angles[1]),U(t,t),function(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o}(this.vec3Temp1,this.vec3Temp1,t),function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}(this.position,this.position,this.vec3Temp1),this.options.boundingBox){const{boundingBox:t}=this.options;this.position[0]<t.minX&&(this.position[0]=t.minX),this.position[0]>t.maxX&&(this.position[0]=t.maxX),this.position[1]<t.minY&&(this.position[1]=t.minY),this.position[1]>t.maxY&&(this.position[1]=t.maxY),this.position[2]<t.minZ&&(this.position[2]=t.minZ),this.position[2]>t.maxZ&&(this.position[2]=t.maxZ)}this._dirty=!0}}}!function(t){t[t.Free=0]="Free",t[t.Predefined=1]="Predefined"}(O||(O={}));class z{constructor(t,e){this.renderer=t,this.options=e,this.matCamera=D(),this.matInvCamera=new Float32Array(16),this.vec3Eye=new Float32Array(3),this.vec3Rotation=new Float32Array(3),this.enabled=!1,this.mode=O.Predefined,this.setupControls()}enable(){this.enabled=!0}disable(){this.enabled=!1,this.renderer.setCustomCamera(void 0)}setupControls(){var t;this.matCamera=function(t){var e=new I(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}(this.renderer.getViewMatrix()),this.mode=O.Free,U(this.matInvCamera,this.matCamera),function(t,e){t[0]=e[12],t[1]=e[13],t[2]=e[14]}(this.vec3Eye,this.matInvCamera),function(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(this.vec3Rotation,this.vec3Eye),function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}(this.vec3Rotation,this.vec3Rotation,-1),this.fpsCamera=null!==(t=this.fpsCamera)&&void 0!==t?t:new G(this.options),this.fpsCamera.position=this.vec3Eye;const e=t=>{this.mode===O.Free&&(this.fpsCamera.update(16),this.matCamera=this.fpsCamera.viewMat,this.enabled&&this.renderer.setCustomCamera(this.matCamera,this.fpsCamera.position,this.fpsCamera.angles),requestAnimationFrame(e))};e()}updatePosition(t){this.fpsCamera&&(this.fpsCamera.position[0]=t[0],this.fpsCamera.position[1]=t[1],this.fpsCamera.position[2]=t[2],this.fpsCamera.dirty=!0,this.fpsCamera.update(0))}updateRotation(t){this.fpsCamera&&(this.fpsCamera.angles[0]=t[0],this.fpsCamera.angles[1]=t[1],this.fpsCamera.angles[2]=t[2],this.fpsCamera.dirty=!0,this.fpsCamera.update(0))}}!function(t){t[t.Rotating=0]="Rotating",t[t.Random=1]="Random",t[t.Orbiting=2]="Orbiting",t[t.FPS=3]="FPS",t[t.FrontEnd=4]="FrontEnd"}($||($={}));class V extends r{getKernel(){return"const int SAMPLE_COUNT = 6;\nconst float OFFSETS[6] = float[6](\n    -4.455269417428358,\n    -2.4751038298192056,\n    -0.4950160492928827,\n    1.485055021558738,\n    3.465172537482815,\n    5.0\n);\nconst float WEIGHTS[6] = float[6](\n    0.14587920530480702,\n    0.19230308352110734,\n    0.21647621943673803,\n    0.20809835496561988,\n    0.17082879595769634,\n    0.06641434081403137\n);"}fillCode(){this.vertexShaderCode="#version 300 es\n            precision highp float;\n            out vec2 vTextureCoord;\n\n            const vec2 vertices[4] = vec2[4](\n              vec2(-1.0f, -1.0f),\n              vec2( 1.0f, -1.0f),\n              vec2(-1.0f,  1.0f),\n              vec2( 1.0f,  1.0f)\n            );\n            const vec2 uvs[4] = vec2[4](\n              vec2(0.0f, 0.0f),\n              vec2(1.0f, 0.0f),\n              vec2(0.0f, 1.0f),\n              vec2(1.0f, 1.0f)\n            );\n\n            void main() {\n              gl_Position = vec4(vertices[gl_VertexID], 0.0f, 1.0f);\n              vTextureCoord = uvs[gl_VertexID];\n            }",this.fragmentShaderCode=`#version 300 es\n            precision highp float;\n\n            ${this.getKernel()}\n\n            // blurDirection is:\n            //     vec2(1,0) for horizontal pass\n            //     vec2(0,1) for vertical pass\n            // The sourceTexture to be blurred MUST use linear filtering!\n            // pixelCoord is in [0..1]\n            mediump vec4 blur(in sampler2D sourceTexture, vec2 blurDirection, vec2 pixelCoord)\n            {\n                mediump vec4 result = vec4(0.0);\n                vec2 size = vec2(textureSize(sourceTexture, 0));\n                for (int i = 0; i < SAMPLE_COUNT; ++i)\n                {\n                    vec2 offset = blurDirection * OFFSETS[i] / size;\n                    float weight = WEIGHTS[i];\n                    result += texture(sourceTexture, pixelCoord + offset) * weight;\n                }\n                return result;\n            }\n\n            in vec2 vTextureCoord;\n            uniform sampler2D sTexture;\n            uniform vec2 direction;\n            uniform mediump float brightness;\n            out mediump vec4 fragColor;\n\n            void main() {\n                fragColor = blur(sTexture, direction, vTextureCoord);\n                fragColor *= brightness;\n            }`}fillUniformsAttributes(){this.sTexture=this.getUniform("sTexture"),this.brightness=this.getUniform("brightness"),this.direction=this.getUniform("direction")}}class j extends V{getKernel(){return"const int SAMPLE_COUNT = 5;\nconst float OFFSETS[5] = float[5](\n    -3.4048471718931532,\n    -1.4588111840004858,\n    0.48624268466894843,\n    2.431625915613778,\n    4.\n);\nconst float WEIGHTS[5] = float[5](\n    0.15642123799829394,\n    0.26718801880015064,\n    0.29738065394682034,\n    0.21568339342709997,\n    0.06332669582763516\n);"}}class W extends V{getKernel(){return"const int SAMPLE_COUNT = 4;\nconst float OFFSETS[4] = float[4](\n    -2.431625915613778,\n    -0.4862426846689484,\n    1.4588111840004858,\n    3.\n);\nconst float WEIGHTS[4] = float[4](\n    0.24696196374528634,\n    0.34050702333458593,\n    0.30593582919679174,\n    0.10659518372333592\n);"}}class X extends V{getKernel(){return"const int SAMPLE_COUNT = 3;\nconst float OFFSETS[3] = float[3](\n    -1.4588111840004858,\n    0.48624268466894843,\n    2.\n);\nconst float WEIGHTS[3] = float[3](\n    0.38883081312055,\n    0.43276926113573877,\n    0.17839992574371122\n);"}}!function(t){t[t.KERNEL_5=0]="KERNEL_5",t[t.KERNEL_4=1]="KERNEL_4",t[t.KERNEL_3=2]="KERNEL_3",t[t.KERNEL_2=3]="KERNEL_2"}(L||(L={}));class Y{constructor(t,e,n){this.gl=t,this.width=0,this.height=0,this.width=n>1?Math.round(e*n):e,this.height=n>1?e:Math.round(e/n),this.blurShader5=new V(t),this.blurShader4=new j(t),this.blurShader3=new W(t),this.blurShader2=new X(t),this.textureOffscreen=g.createNpotTexture(t,this.width,this.height,!1),this.fboOffscreen=new m(t),this.fboOffscreen.textureHandle=this.textureOffscreen,this.fboOffscreen.width=this.width,this.fboOffscreen.height=this.height,this.fboOffscreen.createGLData(this.width,this.height),this.textureOffscreenMsaa=g.createNpotTexture(t,this.width,this.height,!1),this.fboOffscreenMsaa=new _(t),this.fboOffscreenMsaa.textureHandle=this.textureOffscreenMsaa,this.fboOffscreenMsaa.width=this.width,this.fboOffscreenMsaa.height=this.height,this.fboOffscreenMsaa.createGLData(this.width,this.height),this.textureOffscreenVert=g.createNpotTexture(t,this.width,this.height,!1),this.fboOffscreenVert=new m(t),this.fboOffscreenVert.textureHandle=this.textureOffscreenVert,this.fboOffscreenVert.width=this.width,this.fboOffscreenVert.height=this.height,this.fboOffscreenVert.createGLData(this.width,this.height),this.textureOffscreenVertMsaa=g.createNpotTexture(t,this.width,this.height,!1),this.fboOffscreenVertMsaa=new m(t),this.fboOffscreenVertMsaa.textureHandle=this.textureOffscreenVertMsaa,this.fboOffscreenVertMsaa.width=this.width,this.fboOffscreenVertMsaa.height=this.height,this.fboOffscreenVertMsaa.createGLData(this.width,this.height),console.log(`Created GaussianBlurRenderPass with dimensions ${this.width}x${this.height}`)}switchToOffscreenFBO(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fboOffscreen.framebufferHandle),this.gl.viewport(0,0,this.width,this.height)}switchToOffscreenFBOMsaa(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fboOffscreenMsaa.framebufferMsaaHandle),this.gl.viewport(0,0,this.width,this.height)}blitToTexture(){this.gl.bindFramebuffer(this.gl.READ_FRAMEBUFFER,this.fboOffscreenMsaa.framebufferMsaaHandle),this.gl.bindFramebuffer(this.gl.DRAW_FRAMEBUFFER,this.fboOffscreen.framebufferHandle),this.gl.clearBufferfv(this.gl.COLOR,0,[0,0,0,1]),this.gl.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,this.gl.COLOR_BUFFER_BIT,this.gl.NEAREST)}get texture(){return this.textureOffscreen}getShader(t){switch(t){case L.KERNEL_2:return this.blurShader2;case L.KERNEL_3:return this.blurShader3;default:case L.KERNEL_4:return this.blurShader4;case L.KERNEL_5:return this.blurShader5}}setTexture2D(t,e,n){this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(n,t)}blur(t,e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null);let n=this.getShader(e);n.use(),this.gl.uniform1f(n.brightness,t),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fboOffscreenVert.framebufferHandle),this.gl.viewport(0,0,this.width,this.height),this.gl.uniform2f(n.direction,0,1),this.setTexture2D(0,this.textureOffscreen,n.sTexture),this.gl.disable(this.gl.DEPTH_TEST),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fboOffscreen.framebufferHandle),this.gl.viewport(0,0,this.width,this.height),this.gl.uniform2f(n.direction,1,0),this.setTexture2D(0,this.textureOffscreenVert,n.sTexture),this.gl.disable(this.gl.DEPTH_TEST),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}checkGlError(t){let e;for(;(e=this.gl.getError())!==this.gl.NO_ERROR;)console.error(`${t}: glError ${e}`)}}class q{constructor(t){this.gl=t,this.matrix=D(),B(this.matrix),this.initBuffer()}initBuffer(){this.quadTriangles=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,-1,1,0,0,1,1,1,0,1,1]),this.vertexDataBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexDataBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.quadTriangles,this.gl.STATIC_DRAW)}draw(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexDataBuffer),this.gl.enableVertexAttribArray(t.rm_Vertex),this.gl.vertexAttribPointer(t.rm_Vertex,3,this.gl.FLOAT,!1,20,0),this.gl.enableVertexAttribArray(t.rm_TexCoord0),this.gl.vertexAttribPointer(t.rm_TexCoord0,2,this.gl.FLOAT,!1,20,12),this.gl.uniformMatrix4fv(t.view_proj_matrix,!1,this.matrix),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}const Z={KERNEL_2:L.KERNEL_2,KERNEL_3:L.KERNEL_3,KERNEL_4:L.KERNEL_4,KERNEL_5:L.KERNEL_5};class K extends r{constructor(t,e=[],n=[]){super(t),this.preprocessingVertex=e,this.preprocessingFragment=n,this.initShader()}initShader(){void 0!==this.preprocessingVertex&&void 0!==this.preprocessingFragment&&(this.preprocessCode(),super.initShader())}preprocessCode(){var t,e;for(const e of null!==(t=this.preprocessingVertex)&&void 0!==t?t:[])this.vertexShaderCode=this.vertexShaderCode.replace(e.stringToReplace,e.valueToReplaceWith);for(const t of null!==(e=this.preprocessingFragment)&&void 0!==e?e:[])this.fragmentShaderCode=this.fragmentShaderCode.replace(t.stringToReplace,t.valueToReplaceWith)}}class J extends K{fillCode(){this.vertexShaderCode="precision highp float;\n            uniform mat4 view_proj_matrix;\n            attribute vec4 rm_Vertex;\n            attribute vec2 rm_TexCoord0;\n            varying vec2 vTextureCoord;\n            /*UNIFORMS*/\n\n            void main() {\n              gl_Position = view_proj_matrix * rm_Vertex;\n              vTextureCoord = rm_TexCoord0;\n              /*POST_VERTEX*/;\n            }",this.fragmentShaderCode="precision mediump float;\n            varying vec2 vTextureCoord;\n            uniform sampler2D sTexture;\n            /*UNIFORMS*/\n\n            void main() {\n              gl_FragColor = texture2D(sTexture, vTextureCoord);\n              /*POST_FRAGMENT*/;\n            }"}fillUniformsAttributes(){this.rm_Vertex=this.getAttrib("rm_Vertex"),this.rm_TexCoord0=this.getAttrib("rm_TexCoord0"),this.view_proj_matrix=this.getUniform("view_proj_matrix"),this.sTexture=this.getUniform("sTexture"),this.attributes=[this.rm_Vertex,this.rm_TexCoord0],this.uniforms=[this.view_proj_matrix,this.sTexture]}}class Q extends d{constructor(){super(),this.framesCount=0,this.models=[],this.textures=[],this.shaders=[],this.cameraMode=$.FrontEnd,this.cameraPosition=H(),this.cameraRotation=H(),this.SCENE_BOUNDING_BOX={minX:-25e3,maxX:25e3,minY:-25e3,maxY:25e3,minZ:-11e3,maxZ:23e3},this.FREE_MOVEMENT_SPEED=1e3,this.scene=this.createScene()}onBeforeInit(){}onAfterInit(){this.freeMovement=new z(this,{canvas:this.canvas,movementSpeed:this.FREE_MOVEMENT_SPEED,rotationSpeed:.006,boundingBox:this.SCENE_BOUNDING_BOX})}onInitError(){var t,e;null===(t=document.getElementById("canvasGL"))||void 0===t||t.classList.add("hidden"),null===(e=document.getElementById("alertError"))||void 0===e||e.classList.remove("hidden")}initShaders(){if(void 0===this.scene)return;this.gl;const t=this.scene.shaders.toArray();this.shaders.length=0;for(const e of t)e.id=this.shaders.length,this.shaders.push(this.createShader(e.name));console.log("Created scene shaders.")}async loadSceneModels(){if(void 0===this.scene)return;const t=this.scene.meshes.toArray();this.models.length=0;for(const e of t){e.id=this.models.length;const t=new i;await t.load(`data/models/${e.fileName}`,this.gl),this.models.push(t)}}async loadSceneTextures(){if(void 0===this.scene)return;const t=this.gl,e=this.scene.textures.toArray();this.textures.length=0;for(const i of e){i.id=this.textures.length;const e=i.format.name,r=N[i.minFilter.name],s=N[i.magFilter.name],o="CLAMP_TO_EDGE"===i.wrapping.name;let a;if("RGBA8"===e||"RGB8"===e)a=await n.load(`data/textures/${i.fileName}.webp`,t,r,s,o),i.mipmaps>0&&(t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)),this.textures.push(a);else if("ASTC"===e)a=await n.load(`data/textures/${i.fileName}.webp`,t,r,s,o),i.mipmaps>0&&(t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)),this.textures.push(a);else if("RGB16F"===e){const e=`data/textures/${i.fileName}`;a=F(this,await y(e),t,i.width,i.height,r,s,o,"fp16",3),this.textures.push(a),console.log(`Loaded texture ${e} [${i.width}x${i.height}]`)}else if("RGBA16F"===e){const e=`data/textures/${i.fileName}`;a=F(this,await y(e),t,i.width,i.height,r,s,o,"fp16",4),this.textures.push(a),console.log(`Loaded texture ${e} [${i.width}x${i.height}]`)}else if("RGB32F"===e){const e=`data/textures/${i.fileName}`;a=F(this,await y(e),t,i.width,i.height,r,s,o,"fp32",3),this.textures.push(a),console.log(`Loaded texture ${e} [${i.width}x${i.height}]`)}}}async loadData(){var t,e,n;void 0!==this.scene&&(this.vignette=new R,await this.vignette.initialize(this.gl),await Promise.all([this.loadSceneModels(),this.loadSceneTextures()]),console.log("Loaded scene data."),this.canvas&&(null===(t=this.scene)||void 0===t||t.updateViewportSize(this.canvas.width,this.canvas.height),null===(e=this.scene)||void 0===e||e.initialize()),this.fullscreenQuad=new q(this.gl),this.shaderDiffuse=new J(this.gl),this.scene.loaded=!0,null===(n=this.readyCallback)||void 0===n||n.call(this))}resizeCanvas(){var t;if(void 0===this.canvas)return;null===(t=this.scene)||void 0===t||t.updateViewportSize(this.canvas.width,this.canvas.height);const e=this.canvas.width,n=this.canvas.height;super.resizeCanvas(),e===this.canvas.width&&n===this.canvas.height||(this.blurredPass=void 0)}animate(){var t;const e=(new Date).getTime();null===(t=this.scene)||void 0===t||t.updateTimers(e)}drawScene(){var t;(null===(t=this.scene)||void 0===t?void 0:t.loaded)&&(this.gl.colorMask(!0,!0,!0,!0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.gl.depthMask(!0),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.disable(this.gl.BLEND),this.processCommands(this.commands),this.framesCount++)}get commands(){return this.scene.commands.toArray()}processCommands(t){for(const e of t)if(e.enabled)if(e instanceof A.commands.BlurredPassCommand)this.processBlurredPassCommands(e);else if(e instanceof A.commands.GroupCommand)this.processCommands(e.commands.toArray());else if(e instanceof A.commands.ClearColorCommand){const{color:t}=e;this.gl.clearColor(t.r,t.g,t.b,t.a)}else if(e instanceof A.commands.ClearCommand)switch(e.clearType){case A.commands.ClearCommandClearType.COLOR:this.gl.clear(this.gl.COLOR_BUFFER_BIT);break;case A.commands.ClearCommandClearType.DEPTH:this.gl.clear(this.gl.DEPTH_BUFFER_BIT);break;case A.commands.ClearCommandClearType.COLOR_AND_DEPTH:this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}else e instanceof A.commands.VignetteCommand?this.drawVignette(e):e instanceof A.commands.DrawMeshCommand?this.drawMesh(e):e instanceof A.commands.DrawBlurredCommand?this.processDrawBlurred(e):this.processCustomCommand(e)}processBlurredPassCommands(t){var e,n,i;null!==(e=this.blurredPass)&&void 0!==e||(this.blurredPass=new Y(this.gl,t.minSize,this.canvas.width/this.canvas.height)),null===(n=this.blurredPass)||void 0===n||n.switchToOffscreenFBOMsaa(),this.processCommands(t.commands.toArray()),this.blurredPass.blitToTexture(),null===(i=this.blurredPass)||void 0===i||i.blur(t.brightness,Z[t.blurSize.name]),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}processDrawBlurred(t){var e;this.updateBlending(t.blending),this.gl.disable(this.gl.DEPTH_TEST),this.gl.depthMask(!1),this.unbindBuffers(),this.shaderDiffuse.use(),this.setTexture2D(0,this.blurredPass.texture,this.shaderDiffuse.sTexture),null===(e=this.fullscreenQuad)||void 0===e||e.draw(this.shaderDiffuse)}drawVignette(t){var e,n,i;const{color0:r,color1:s}=t;null===(e=this.vignette)||void 0===e||e.setColor0(r.r,r.g,r.b,r.a),null===(n=this.vignette)||void 0===n||n.setColor1(s.r,s.g,s.b,s.a),null===(i=this.vignette)||void 0===i||i.draw(this)}drawMesh(t){const e=this.shaders[t.state.shader.id],n=this.models[t.mesh.id];void 0!==e&&void 0!==n&&(this.updateBlending(t.state.blending),this.updateDepthMode(t.state.depthMode),this.updateCulling(t.state.culling),e.use(),n.bindBuffers(this.gl),this.setAttributes(e,t.state.vertexAttributes),this.setUniforms(e,t.uniforms.toArray()),this.gl.drawElements(this.gl.TRIANGLES,3*n.getNumIndices(),this.gl.UNSIGNED_SHORT,0))}setAttributes(t,e){if(void 0===t.attributes)return;if(null===e)return;const n=e.attributes.toArray();for(const i of n){const{type:n,size:r,normalized:s}=M[i.format.name];this.gl.enableVertexAttribArray(t.attributes[i.index]),this.gl.vertexAttribPointer(t.attributes[i.index],r,n,s,e.stride,i.offset)}}setUniforms(t,e){if(void 0===t.uniforms)return;let n=0;const i=this.gl;for(let r=0;r<e.length;r++){const s=e[r],o=t.uniforms[r];if(s instanceof A.UniformFloatValue)switch(s.value.length){case 1:i.uniform1fv(o,s.value);break;case 2:i.uniform2fv(o,s.value);break;case 3:i.uniform3fv(o,s.value);break;case 4:i.uniform4fv(o,s.value);break;case 16:i.uniformMatrix4fv(o,!1,s.value)}else if(s instanceof A.UniformTextureValue)this.setTexture2D(n++,this.textures[s.value.id],o);else if(s instanceof A.UniformIntValue)switch(s.value.length){case 1:i.uniform1iv(o,s.value);break;case 2:i.uniform2iv(o,s.value);break;case 3:i.uniform3iv(o,s.value);break;case 4:i.uniform4iv(o,s.value)}}}updateBlending(t){const e=this.gl;t.enabled?(e.enable(e.BLEND),t.isSeparateAlpha?(e.blendEquationSeparate(C[t.equationColor.name],C[t.equationAlpha.name]),e.blendFuncSeparate(x[t.sourceFactorColor.name],x[t.destinationFactorColor.name],x[t.sourceFactorAlpha.name],x[t.destinationFactorAlpha.name])):(e.blendEquation(C[t.equationColor.name]),e.blendFunc(x[t.sourceFactorColor.name],x[t.destinationFactorColor.name]))):e.disable(e.BLEND)}updateCulling(t){const e=this.gl;"DISABLED"===t.name?e.disable(e.CULL_FACE):(e.enable(e.CULL_FACE),e.cullFace(S[t.name]))}updateDepthMode(t){const e=this.gl;t.depthTest?(e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clearDepth(1)):e.disable(e.DEPTH_TEST),t.depthWrite?e.depthMask(!0):e.depthMask(!1)}processCustomCommand(t){}checkGlError(t){}set ready(t){this.readyCallback=t}setCustomCamera(t,e,n){if(void 0!==this.scene)if(this.customCamera=t,this.cameraPosition=null!=e?e:this.cameraPosition,this.cameraRotation=null!=n?n:this.cameraRotation,void 0!==this.customCamera){this.scene.useExternalViewMatrix=!0;for(let t=0;t<16;t++)this.scene.matView[t]=this.customCamera[t]}else this.scene.useExternalViewMatrix=!1}setCameraMode(t){var e,n,i,r;t===$.FPS?(null===(e=this.freeMovement)||void 0===e||e.updatePosition([0,0,0]),null===(n=this.freeMovement)||void 0===n||n.updateRotation([0,0,0]),null===(i=this.freeMovement)||void 0===i||i.enable()):t===$.FrontEnd&&(null===(r=this.freeMovement)||void 0===r||r.disable()),this.cameraMode=t}get currentCameraMode(){return this.cameraMode}set currentCameraMode(t){this.setCameraMode(t)}}class tt extends q{constructor(){super(...arguments),this.screenRatio=1,this.overlaySize=.5,this.overlayOffsetY=0}initBuffer(){void 0!==this.vertexDataBuffer&&this.gl.deleteBuffer(this.vertexDataBuffer);const{overlaySize:t,screenRatio:e,overlayOffsetY:n}=this;this.quadTriangles=new Float32Array([-t,-t*e/3+n,0,0,0,t,-t*e/3+n,0,1,0,-t,t*e/3+n,0,0,-1,t,t*e/3+n,0,1,-1]),this.vertexDataBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexDataBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.quadTriangles,this.gl.STATIC_DRAW)}set ratio(t){this.screenRatio!==t&&(this.screenRatio=t,this.initBuffer())}set size(t){this.overlaySize!==t&&(this.overlaySize=t,this.initBuffer())}set offsetY(t){this.overlayOffsetY!==t&&(this.overlayOffsetY=t,this.initBuffer())}}const et="/*UNIFORMS*/",nt="/*POST_FRAGMENT*/",it="vec4 grayscale(in vec4 color) {\n  float y = 0.299 * color.r + 0.587 * color.g + 0.114 * color.b;\n  return vec4(y, y, y, color.a);\n}\n",rt="vec4 brightnessContrast(in vec4 inColor, in float brightness, in float contrast)\n{\n  return vec4((inColor.rgb - 0.5) * contrast + 0.5 + brightness, inColor.a);\n}\n";class st extends Q{constructor(){super(),this.SCENE_BOUNDING_BOX={minX:-5e3,maxX:5e3,minY:-5e3,maxY:5e3,minZ:-1e3,maxZ:3e3},this.FREE_MOVEMENT_SPEED=200,this.initCommands()}initCommands(){}createScene(){return new T.BrutalismScene}createShader(t){var e;var n;const i={Grayscale:[{stringToReplace:et,valueToReplaceWith:it+rt},{stringToReplace:nt,valueToReplaceWith:(n="gl_FragColor")+" = grayscale(brightnessContrast("+n+", 0.15, 1.4));"}],Sepia:[{stringToReplace:et,valueToReplaceWith:it+rt},{stringToReplace:nt,valueToReplaceWith:n+" = vec4(0.74, 0.55, 0.3, 1.0) * grayscale(brightnessContrast("+n+", 0.2, 0.9));"}],HighContrast:[{stringToReplace:et,valueToReplaceWith:"const mat3 rgb_to_yuv = mat3(\n  vec3(0.2126, -0.099991, 0.615),\n  vec3(0.7152, -0.33609, -0.55861),\n  vec3(0.0722, 0.436, -0.05639)\n);\nconst mat3 yuv_to_rgb = mat3(\n  vec3(1.0, 1.0, 1.0),\n  vec3(0.0, -0.21482, 2.12798),\n  vec3(1.28033, -0.38059, 0.0)\n);\nvec4 vibrance(in vec4 color, in float v) {\n  vec3 yuv = rgb_to_yuv * color.rgb;\n  yuv.gb *= v;\n  return vec4(yuv_to_rgb * yuv, color.a);\n}\n"},{stringToReplace:nt,valueToReplaceWith:n+" = vibrance("+n+", 2.2);"}],LowContrast:[{stringToReplace:et,valueToReplaceWith:rt},{stringToReplace:nt,valueToReplaceWith:n+" = brightnessContrast("+n+", 0.0, 0.9);"}],LimitedColors:[{stringToReplace:et,valueToReplaceWith:"vec4 reduceColors(in vec4 color, in float colors) {\n  return floor(color * colors + 0.5) / colors;\n}\n"+rt},{stringToReplace:nt,valueToReplaceWith:n+" = reduceColors(brightnessContrast("+n+", 0.25, 1.9), 6.0);"}],Normal:[]}[null===(e=this.scene)||void 0===e?void 0:e.settings.colorMode.name];if("Diffuse"===t)return new J(this.gl,[],i);throw new Error(`Unknown shader type ${t}`)}nextCamera(){var t;null===(t=this.scene)||void 0===t||t.nextCamera()}nextRoom(){var t;null===(t=this.scene)||void 0===t||t.nextRoom()}nextCameraOrRoom(){var t;null===(t=this.scene)||void 0===t||t.nextCameraOrRoom()}randomCameraOrNextRoom(){var t;null===(t=this.scene)||void 0===t||t.randomCameraOrNextRoom()}get settings(){return this.scene.settings}processCustomCommand(t){t.enabled&&t instanceof T.DrawClockCommand&&this.processDrawClock()}async loadSceneTextures(){await super.loadSceneTextures(),this.texClock=await n.load("data/textures/time.webp",this.gl,this.gl.LINEAR,this.gl.LINEAR,!1)}processDrawClock(){var t;null!==(t=this.clockOverlay)&&void 0!==t||(this.clockOverlay=new tt(this.gl));const e=this.canvas.width/this.canvas.height;this.clockOverlay.ratio=e,this.clockOverlay.offsetY=.3,this.clockOverlay.size=e>1?.4:.75,this.gl.disable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.ONE,this.gl.ONE),this.gl.depthMask(!1),this.unbindBuffers(),this.shaderDiffuse.use(),this.setTexture2D(0,this.texClock,this.shaderDiffuse.sTexture),this.clockOverlay.draw(this.shaderDiffuse)}}
/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.19.2
 * @author George Michael Brower
 * @license MIT
 */class ot{constructor(t,e,n,i,r="div"){this.parent=t,this.object=e,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement(r),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),ot.nextNameID=ot.nextNameID||0,this.$name.id="lil-gui-name-"+ ++ot.nextNameID,this.$widget=document.createElement("div"),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",(t=>t.stopPropagation())),this.domElement.addEventListener("keyup",(t=>t.stopPropagation())),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(t){return this._name=t,this.$name.textContent=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.getValue()!==t&&(this.object[this.property]=t,this._callOnChange(),this.updateDisplay()),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class at extends ot{constructor(t,e,n){super(t,e,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function ht(t){let e,n;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!n&&"#"+n}const ut={isPrimitive:!0,match:t=>"string"==typeof t,fromHexString:ht,toHexString:ht},lt={isPrimitive:!0,match:t=>"number"==typeof t,fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},ct={isPrimitive:!1,match:t=>Array.isArray(t),fromHexString(t,e,n=1){const i=lt.fromHexString(t);e[0]=(i>>16&255)/255*n,e[1]=(i>>8&255)/255*n,e[2]=(255&i)/255*n},toHexString:([t,e,n],i=1)=>lt.toHexString(t*(i=255/i)<<16^e*i<<8^n*i)},ft={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,n=1){const i=lt.fromHexString(t);e.r=(i>>16&255)/255*n,e.g=(i>>8&255)/255*n,e.b=(255&i)/255*n},toHexString:({r:t,g:e,b:n},i=1)=>lt.toHexString(t*(i=255/i)<<16^e*i<<8^n*i)},dt=[ut,lt,ct,ft];class mt extends ot{constructor(t,e,n,i){var r;super(t,e,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(r=this.initialValue,dt.find((t=>t.match(r)))),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const t=ht(this.$text.value);t&&this._setValueFromHexString(t)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class _t extends ot{constructor(t,e,n){super(t,e,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(t=>{t.preventDefault(),this.getValue().call(this.object),this._callOnChange()})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class gt extends ot{constructor(t,e,n,i,r,s){super(t,e,n,"number"),this._initInput(),this.min(i),this.max(r);const o=void 0!==s;this.step(o?s:this._getImplicitStep(),o),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id);window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=t=>{const e=parseFloat(this.$input.value);isNaN(e)||(this._snapClampSetValue(e+t),this.$input.value=this.getValue())};let e,n,i,r,s,o=!1;const a=t=>{if(o){const i=t.clientX-e,r=t.clientY-n;Math.abs(r)>5?(t.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(i)>5&&h()}if(!o){const e=t.clientY-i;s-=e*this._step*this._arrowKeyMultiplier(t),r+s>this._max?s=this._max-r:r+s<this._min&&(s=this._min-r),this._snapClampSetValue(r+s)}i=t.clientY},h=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",h)};this.$input.addEventListener("input",(()=>{let t=parseFloat(this.$input.value);isNaN(t)||(this._stepExplicit&&(t=this._snap(t)),this.setValue(this._clamp(t)))})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.key&&this.$input.blur(),"ArrowUp"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e))),"ArrowDown"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e)*-1))})),this.$input.addEventListener("wheel",(e=>{this._inputFocused&&(e.preventDefault(),t(this._step*this._normalizeMouseWheel(e)))}),{passive:!1}),this.$input.addEventListener("mousedown",(t=>{e=t.clientX,n=i=t.clientY,o=!0,r=this.getValue(),s=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",h)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=t=>{const e=this.$slider.getBoundingClientRect();let n=(i=t,r=e.left,s=e.right,o=this._min,a=this._max,(i-r)/(s-r)*(a-o)+o);var i,r,s,o,a;this._snapClampSetValue(n)},e=e=>{t(e.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n)};let i,r,s=!1;const o=e=>{e.preventDefault(),this._setDraggingStyle(!0),t(e.touches[0].clientX),s=!1},a=e=>{if(s){const t=e.touches[0].clientX-i,n=e.touches[0].clientY-r;Math.abs(t)>Math.abs(n)?o(e):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",h))}else e.preventDefault(),t(e.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",h)},u=this._callOnFinishChange.bind(this);let l;this.$slider.addEventListener("mousedown",(i=>{this._setDraggingStyle(!0),t(i.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(t=>{t.touches.length>1||(this._hasScrollBar?(i=t.touches[0].clientX,r=t.touches[0].clientY,s=!0):o(t),window.addEventListener("touchmove",a,{passive:!1}),window.addEventListener("touchend",h))}),{passive:!1}),this.$slider.addEventListener("wheel",(t=>{if(Math.abs(t.deltaX)<Math.abs(t.deltaY)&&this._hasScrollBar)return;t.preventDefault();const e=this._normalizeMouseWheel(t)*this._step;this._snapClampSetValue(this.getValue()+e),this.$input.value=this.getValue(),clearTimeout(l),l=setTimeout(u,400)}),{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:n}=t;Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,n=-t.wheelDelta/120,n*=this._stepExplicit?1:10);return e+-n}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){const e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class pt extends ot{constructor(t,e,n,i){super(t,e,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.options(i)}options(t){return this._values=Array.isArray(t)?t:Object.values(t),this._names=Array.isArray(t)?t:Object.keys(t),this.$select.replaceChildren(),this._names.forEach((t=>{const e=document.createElement("option");e.textContent=t,this.$select.appendChild(e)})),this.updateDisplay(),this}updateDisplay(){const t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.textContent=-1===e?t:this._names[e],this}}class Et extends ot{constructor(t,e,n){super(t,e,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("spellcheck","false"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let wt=!1;class vt{constructor({parent:t,autoPlace:e=void 0===t,container:n,width:i,title:r="Controls",closeFolders:s=!1,injectStyles:o=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(t=>{"Enter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(r),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),a&&this.domElement.classList.add("allow-touch-styles"),!wt&&o&&(!function(t){const e=document.createElement("style");e.innerHTML=t;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n  background: var(--background-color);\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui label, .lil-gui input, .lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n}\n.lil-gui input {\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  width: var(--checkbox-size);\n  height: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: none;\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),wt=!0),n?n.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this._closeFolders=s}add(t,e,n,i,r){if(Object(n)===n)return new pt(this,t,e,n);const s=t[e];switch(typeof s){case"number":return new gt(this,t,e,n,i,r);case"boolean":return new at(this,t,e);case"string":return new Et(this,t,e);case"function":return new _t(this,t,e)}console.error("gui.add failed\n\tproperty:",e,"\n\tobject:",t,"\n\tvalue:",s)}addColor(t,e,n=1){return new mt(this,t,e,n)}addFolder(t){const e=new vt({parent:this,title:t});return this.root._closeFolders&&e.close(),e}load(t,e=!0){return t.controllers&&this.controllers.forEach((e=>{e instanceof _t||e._name in t.controllers&&e.load(t.controllers[e._name])})),e&&t.folders&&this.folders.forEach((e=>{e._title in t.folders&&e.load(t.folders[e._title])})),this}save(t=!0){const e={controllers:{},folders:{}};return this.controllers.forEach((t=>{if(!(t instanceof _t)){if(t._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);e.controllers[t._name]=t.save()}})),t&&this.folders.forEach((t=>{if(t._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);e.folders[t._title]=t.save()})),e}open(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(t){this._closed!==t&&(this._closed=t,this._callOnOpenClose(this))}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._setClosed(!t),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");const n=t=>{t.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const i=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame((()=>{this.$children.style.height=i+"px"}))})),this}title(t){return this._title=t,this.$title.textContent=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach((t=>t.reset())),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),void 0!==this._onChange&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onOpenClose(t){return this._onOpenClose=t,this}_callOnOpenClose(t){this.parent&&this.parent._callOnOpenClose(t),void 0!==this._onOpenClose&&this._onOpenClose.call(this,t)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((t=>t.destroy()))}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach((e=>{t=t.concat(e.controllersRecursive())})),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach((e=>{t=t.concat(e.foldersRecursive())})),t}}var At=vt;let Tt;var bt;bt=()=>{Tt=new st,Tt.ready=()=>{!function(){var e,n;null===(e=document.getElementById("message"))||void 0===e||e.classList.add("hidden"),null===(n=document.getElementById("canvasGL"))||void 0===n||n.classList.remove("transparent");const i=new At,r=new t,s={toggleFullscreen:()=>{r.isFullScreen()?r.exitFullScreen():r.enterFullScreen()}};i.add(Tt,"currentCameraMode",{FrontEnd:$.FrontEnd,FPS:$.FPS}).name("Camera"),i.add(Tt.settings,"lowQuality"),i.add(Tt.settings,"cameraPeriod",.1,2,.1),i.add(Tt.settings,"vignette"),i.add(Tt.settings,"clock"),i.add(Tt.settings,"blurred"),i.add(Tt.settings,"autoSwitchCameras"),i.add(Tt.settings,"colorMode",{Normal:A.common.ColorMode.Normal,Grayscale:A.common.ColorMode.Grayscale,Sepia:A.common.ColorMode.Sepia,HighContrast:A.common.ColorMode.HighContrast,LowContrast:A.common.ColorMode.LowContrast,LimitedColors:A.common.ColorMode.LimitedColors}).onChange((()=>Tt.initShaders())),i.add(Tt,"nextCamera"),i.add(Tt,"nextRoom"),i.add(Tt,"nextCameraOrRoom"),i.add(Tt,"randomCameraOrNextRoom"),i.add(s,"toggleFullscreen"),document.getElementById("canvasGL")&&document.addEventListener("keypress",(t=>{"f"===t.key?Tt.currentCameraMode=Tt.currentCameraMode===$.FPS?$.FrontEnd:$.FPS:"n"===t.key?Tt.nextCamera():"r"===t.key?Tt.nextRoom():"x"===t.key&&Tt.nextCameraOrRoom()}))}()},Tt.init("canvasGL",!0)},"loading"!==document.readyState?bt():document.addEventListener("DOMContentLoaded",bt);
//# sourceMappingURL=index.min.js.map
